# ğŸ—ï¸ Infrastructure Architecture - Phase 1-3

## Complete System Architecture Overview

```
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ                          DEVELOPER WORKSTATION                       â”ƒ
â”ƒ                          (Windows 11 Machine)                        â”ƒ
â”ƒ  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”ƒ
â”ƒ  â”‚   VS Code    â”‚  â”‚  PowerShell  â”‚  â”‚   Web Browser            â”‚  â”ƒ
â”ƒ  â”‚   + WSL Ext  â”‚  â”‚  (SSH Client)â”‚  â”‚   (Jenkins UI Access)    â”‚  â”ƒ
â”ƒ  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”¿â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”¿â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”¿â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›
           â”‚                 â”‚                     â”‚
           â”‚ Git Push        â”‚ SSH (Port 22)       â”‚ HTTP (Port 8080)
           â–¼                 â–¼                     â–¼
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ                            GITHUB                                    â”ƒ
â”ƒ                   Source Code Repository                             â”ƒ
â”ƒ  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”ƒ
â”ƒ  â”‚  devops-url-shortener/                                         â”‚ â”ƒ
â”ƒ  â”‚  â”œâ”€â”€ src/           (Node.js application code)                 â”‚ â”ƒ
â”ƒ  â”‚  â”œâ”€â”€ terraform/     (Infrastructure as Code)                   â”‚ â”ƒ
â”ƒ  â”‚  â”œâ”€â”€ ansible/       (Configuration Management)                 â”‚ â”ƒ
â”ƒ  â”‚  â”œâ”€â”€ Dockerfile     (Container image definition)               â”‚ â”ƒ
â”ƒ  â”‚  â””â”€â”€ docker-compose.yml  (Local development)                   â”‚ â”ƒ
â”ƒ  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›
                                â”‚
                                â”‚ Webhook Trigger (Phase 4)
                                â–¼
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ                          AWS CLOUD (us-east-1)                       â”ƒ
â”ƒ                                                                       â”ƒ
â”ƒ  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”ƒ
â”ƒ  â”‚                    VPC: url-shortener-vpc                      â”‚ â”ƒ
â”ƒ  â”‚                    CIDR: 10.0.0.0/16                           â”‚ â”ƒ
â”ƒ  â”‚                                                                â”‚ â”ƒ
â”ƒ  â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“  â”‚ â”ƒ
â”ƒ  â”‚  â”ƒ         PUBLIC SUBNETS (Internet-facing)              â”ƒ  â”‚ â”ƒ
â”ƒ  â”‚  â”ƒ         10.0.101.0/24, 10.0.102.0/24                  â”ƒ  â”‚ â”ƒ
â”ƒ  â”‚  â”ƒ                                                        â”ƒ  â”‚ â”ƒ
â”ƒ  â”‚  â”ƒ  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”ƒ  â”‚ â”ƒ
â”ƒ  â”‚  â”ƒ  â”‚  ğŸ–¥ï¸  JENKINS EC2 SERVER (t2.medium)           â”‚  â”ƒ  â”‚ â”ƒ
â”ƒ  â”‚  â”ƒ  â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚  â”ƒ  â”‚ â”ƒ
â”ƒ  â”‚  â”ƒ  â”‚  Public IP: 54.x.x.x                           â”‚  â”ƒ  â”‚ â”ƒ
â”ƒ  â”‚  â”ƒ  â”‚  Security Group: SSH (22), Jenkins (8080)      â”‚  â”ƒ  â”‚ â”ƒ
â”ƒ  â”‚  â”ƒ  â”‚                                                 â”‚  â”ƒ  â”‚ â”ƒ
â”ƒ  â”‚  â”ƒ  â”‚  Installed Software (Phase 3):                 â”‚  â”ƒ  â”‚ â”ƒ
â”ƒ  â”‚  â”ƒ  â”‚  âœ… Ubuntu 22.04                               â”‚  â”ƒ  â”‚ â”ƒ
â”ƒ  â”‚  â”ƒ  â”‚  âœ… Java 17 (Jenkins runtime)                  â”‚  â”ƒ  â”‚ â”ƒ
â”ƒ  â”‚  â”ƒ  â”‚  âœ… Jenkins (CI/CD server)                     â”‚  â”ƒ  â”‚ â”ƒ
â”ƒ  â”‚  â”ƒ  â”‚  âœ… Docker + Docker Compose                    â”‚  â”ƒ  â”‚ â”ƒ
â”ƒ  â”‚  â”ƒ  â”‚  âœ… kubectl (K8s CLI)                          â”‚  â”ƒ  â”‚ â”ƒ
â”ƒ  â”‚  â”ƒ  â”‚  âœ… AWS CLI v2                                 â”‚  â”ƒ  â”‚ â”ƒ
â”ƒ  â”‚  â”ƒ  â”‚  âœ… Git                                        â”‚  â”ƒ  â”‚ â”ƒ
â”ƒ  â”‚  â”ƒ  â”‚                                                 â”‚  â”ƒ  â”‚ â”ƒ
â”ƒ  â”‚  â”ƒ  â”‚  IAM Role: Jenkins-Role                        â”‚  â”ƒ  â”‚ â”ƒ
â”ƒ  â”‚  â”ƒ  â”‚  - ECR Push/Pull                               â”‚  â”ƒ  â”‚ â”ƒ
â”ƒ  â”‚  â”ƒ  â”‚  - EKS Full Access                             â”‚  â”ƒ  â”‚ â”ƒ
â”ƒ  â”‚  â”ƒ  â”‚  - Secrets Manager Read                        â”‚  â”ƒ  â”‚ â”ƒ
â”ƒ  â”‚  â”ƒ  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”ƒ  â”‚ â”ƒ
â”ƒ  â”‚  â”ƒ                                                        â”ƒ  â”‚ â”ƒ
â”ƒ  â”‚  â”ƒ  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”ƒ  â”‚ â”ƒ
â”ƒ  â”‚  â”ƒ  â”‚  ğŸŒ Internet Gateway                           â”‚  â”ƒ  â”‚ â”ƒ
â”ƒ  â”‚  â”ƒ  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”ƒ  â”‚ â”ƒ
â”ƒ  â”‚  â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›  â”‚ â”ƒ
â”ƒ  â”‚                              â”‚                                â”‚ â”ƒ
â”ƒ  â”‚                              â”‚ NAT Gateway                    â”‚ â”ƒ
â”ƒ  â”‚                              â–¼                                â”‚ â”ƒ
â”ƒ  â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“  â”‚ â”ƒ
â”ƒ  â”‚  â”ƒ         PRIVATE SUBNETS (Isolated)                 â”ƒ  â”‚ â”ƒ
â”ƒ  â”‚  â”ƒ         10.0.1.0/24, 10.0.2.0/24                   â”ƒ  â”‚ â”ƒ
â”ƒ  â”‚  â”ƒ                                                        â”ƒ  â”‚ â”ƒ
â”ƒ  â”‚  â”ƒ  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”ƒ  â”‚ â”ƒ
â”ƒ  â”‚  â”ƒ  â”‚  â˜¸ï¸  EKS CLUSTER (Kubernetes)                  â”‚  â”ƒ  â”‚ â”ƒ
â”ƒ  â”‚  â”ƒ  â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚  â”ƒ  â”‚ â”ƒ
â”ƒ  â”‚  â”ƒ  â”‚  Name: url-shortener-eks                       â”‚  â”ƒ  â”‚ â”ƒ
â”ƒ  â”‚  â”ƒ  â”‚  Version: 1.30                                  â”‚  â”ƒ  â”‚ â”ƒ
â”ƒ  â”‚  â”ƒ  â”‚                                                 â”‚  â”ƒ  â”‚ â”ƒ
â”ƒ  â”‚  â”ƒ  â”‚  Worker Nodes (t3.medium):                     â”‚  â”ƒ  â”‚ â”ƒ
â”ƒ  â”‚  â”ƒ  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚  â”ƒ  â”‚ â”ƒ
â”ƒ  â”‚  â”ƒ  â”‚  â”‚  Node 1  â”‚  â”‚  Node 2  â”‚                   â”‚  â”ƒ  â”‚ â”ƒ
â”ƒ  â”‚  â”ƒ  â”‚  â”‚          â”‚  â”‚          â”‚                   â”‚  â”ƒ  â”‚ â”ƒ
â”ƒ  â”‚  â”ƒ  â”‚  â”‚ Ready to â”‚  â”‚ Ready to â”‚                   â”‚  â”ƒ  â”‚ â”ƒ
â”ƒ  â”‚  â”ƒ  â”‚  â”‚  deploy  â”‚  â”‚  deploy  â”‚                   â”‚  â”ƒ  â”‚ â”ƒ
â”ƒ  â”‚  â”ƒ  â”‚  â”‚ (Phase 4)â”‚  â”‚ (Phase 4)â”‚                   â”‚  â”ƒ  â”‚ â”ƒ
â”ƒ  â”‚  â”ƒ  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚  â”ƒ  â”‚ â”ƒ
â”ƒ  â”‚  â”ƒ  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”ƒ  â”‚ â”ƒ
â”ƒ  â”‚  â”ƒ                                                        â”ƒ  â”‚ â”ƒ
â”ƒ  â”‚  â”ƒ  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”ƒ  â”‚ â”ƒ
â”ƒ  â”‚  â”ƒ  â”‚  ğŸ—„ï¸  DOCUMENTDB CLUSTER (MongoDB-compatible)   â”‚  â”ƒ  â”‚ â”ƒ
â”ƒ  â”‚  â”ƒ  â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚  â”ƒ  â”‚ â”ƒ
â”ƒ  â”‚  â”ƒ  â”‚  Endpoint: url-shortener-docdb.xxx             â”‚  â”ƒ  â”‚ â”ƒ
â”ƒ  â”‚  â”ƒ  â”‚  Port: 27017                                    â”‚  â”ƒ  â”‚ â”ƒ
â”ƒ  â”‚  â”ƒ  â”‚  Instance: db.t3.medium                         â”‚  â”ƒ  â”‚ â”ƒ
â”ƒ  â”‚  â”ƒ  â”‚  Storage: Encrypted                             â”‚  â”ƒ  â”‚ â”ƒ
â”ƒ  â”‚  â”ƒ  â”‚                                                 â”‚  â”ƒ  â”‚ â”ƒ
â”ƒ  â”‚  â”ƒ  â”‚  Credentials stored in:                        â”‚  â”ƒ  â”‚ â”ƒ
â”ƒ  â”‚  â”ƒ  â”‚  AWS Secrets Manager                           â”‚  â”ƒ  â”‚ â”ƒ
â”ƒ  â”‚  â”ƒ  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”ƒ  â”‚ â”ƒ
â”ƒ  â”‚  â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›  â”‚ â”ƒ
â”ƒ  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”ƒ
â”ƒ                                                                       â”ƒ
â”ƒ  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”ƒ
â”ƒ  â”‚  ğŸ“¦ ECR REPOSITORY (Container Registry)                       â”‚ â”ƒ
â”ƒ  â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚ â”ƒ
â”ƒ  â”‚  Name: url-shortener-api                                      â”‚ â”ƒ
â”ƒ  â”‚  URL: xxxx.dkr.ecr.us-east-1.amazonaws.com/url-shortener-api  â”‚ â”ƒ
â”ƒ  â”‚  Scan on Push: Enabled                                        â”‚ â”ƒ
â”ƒ  â”‚  Encryption: AES256                                           â”‚ â”ƒ
â”ƒ  â”‚                                                                â”‚ â”ƒ
â”ƒ  â”‚  Images (Phase 4):                                            â”‚ â”ƒ
â”ƒ  â”‚  - url-shortener-api:latest                                   â”‚ â”ƒ
â”ƒ  â”‚  - url-shortener-api:v1.0.0                                   â”‚ â”ƒ
â”ƒ  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”ƒ
â”ƒ                                                                       â”ƒ
â”ƒ  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”ƒ
â”ƒ  â”‚  ğŸ” AWS SECRETS MANAGER                                       â”‚ â”ƒ
â”ƒ  â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚ â”ƒ
â”ƒ  â”‚  Secret: url-shortener-docdb-password                         â”‚ â”ƒ
â”ƒ  â”‚  Contains: DB username, password, endpoint, port              â”‚ â”ƒ
â”ƒ  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”ƒ
â”ƒ                                                                       â”ƒ
â”ƒ  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”ƒ
â”ƒ  â”‚  ğŸ’¾ S3 BUCKET (Terraform State)                               â”‚ â”ƒ
â”ƒ  â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚ â”ƒ
â”ƒ  â”‚  Name: my-team-url-shortener-tfstate                          â”‚ â”ƒ
â”ƒ  â”‚  Versioning: Enabled                                          â”‚ â”ƒ
â”ƒ  â”‚  Encryption: AES256                                           â”‚ â”ƒ
â”ƒ  â”‚  Public Access: Blocked                                       â”‚ â”ƒ
â”ƒ  â”‚                                                                â”‚ â”ƒ
â”ƒ  â”‚  DynamoDB Table: terraform-state-lock                         â”‚ â”ƒ
â”ƒ  â”‚  (Prevents concurrent Terraform runs)                         â”‚ â”ƒ
â”ƒ  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›
```

---

## ğŸ”„ Data Flow (Current State - Phase 3)

### Development Workflow

```
1. Developer writes code (Windows/VS Code)
              â†“
2. Code committed to Git
              â†“
3. Pushed to GitHub repository
              â†“
4. [Phase 4: Jenkins webhook triggered automatically]
              â†“
5. [Phase 4: Jenkins builds Docker image]
              â†“
6. [Phase 4: Image pushed to ECR]
              â†“
7. [Phase 4: Deployed to EKS]
```

### Current Access Patterns

```
Windows Machine
       â”‚
       â”œâ”€â†’ SSH (Port 22) â”€â”€â”€â”€â†’ Jenkins EC2
       â”‚
       â””â”€â†’ HTTPS (Port 8080) â”€â†’ Jenkins Web UI
```

---

## ğŸ›¡ï¸ Security Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SECURITY LAYERS                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  Layer 1: Network Isolation (VPC)                          â”‚
â”‚  â”œâ”€ Public Subnets: Jenkins only                           â”‚
â”‚  â””â”€- Private Subnets: EKS, DocumentDB (no direct internet) â”‚
â”‚                                                             â”‚
â”‚  Layer 2: Security Groups (Firewall Rules)                 â”‚
â”‚  â”œâ”€ Jenkins SG: SSH from your IP, HTTP:8080 from anywhere  â”‚
â”‚  â”œâ”€ EKS SG: Allow Jenkins, deny external                   â”‚
â”‚  â””â”€ DocumentDB SG: Allow EKS only                          â”‚
â”‚                                                             â”‚
â”‚  Layer 3: IAM Roles (No Hardcoded Credentials)             â”‚
â”‚  â”œâ”€ Jenkins Role: ECR, EKS, Secrets Manager access         â”‚
â”‚  â””â”€ EKS Node Role: ECR pull, Secrets Manager read          â”‚
â”‚                                                             â”‚
â”‚  Layer 4: Secrets Management                               â”‚
â”‚  â””â”€ AWS Secrets Manager: DocumentDB credentials            â”‚
â”‚                                                             â”‚
â”‚  Layer 5: Encryption                                       â”‚
â”‚  â”œâ”€ EBS volumes: Encrypted at rest                         â”‚
â”‚  â”œâ”€ DocumentDB: Encrypted storage                          â”‚
â”‚  â””â”€ S3 state: Encrypted                                    â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Resource Inventory

### Compute Resources

| Resource | Type | Purpose | Status |
|----------|------|---------|--------|
| Jenkins EC2 | t2.medium | CI/CD Server | âœ… Running & Configured |
| EKS Control Plane | Managed | K8s API Server | âœ… Running |
| EKS Worker Nodes | t3.medium (2x) | Container Runtime | âœ… Ready |

### Network Resources

| Resource | CIDR/Value | Purpose | Status |
|----------|------------|---------|--------|
| VPC | 10.0.0.0/16 | Network Isolation | âœ… Active |
| Public Subnet 1 | 10.0.101.0/24 | Jenkins, NAT | âœ… Active |
| Public Subnet 2 | 10.0.102.0/24 | HA/Failover | âœ… Active |
| Private Subnet 1 | 10.0.1.0/24 | EKS, DocumentDB | âœ… Active |
| Private Subnet 2 | 10.0.2.0/24 | EKS, DocumentDB | âœ… Active |
| Internet Gateway | - | Public internet access | âœ… Active |
| NAT Gateway | - | Private subnet internet | âœ… Active |

### Storage & Database

| Resource | Configuration | Purpose | Status |
|----------|---------------|---------|--------|
| ECR Repository | url-shortener-api | Docker images | âœ… Ready |
| DocumentDB | db.t3.medium | MongoDB database | âœ… Running |
| S3 Bucket | tfstate bucket | Terraform state | âœ… Active |

### Security Resources

| Resource | Purpose | Status |
|----------|---------|--------|
| Jenkins Security Group | Firewall for Jenkins | âœ… Active |
| EKS Security Group | Firewall for K8s | âœ… Active |
| DocumentDB Security Group | Firewall for DB | âœ… Active |
| Secrets Manager Secret | DB credentials | âœ… Created |
| IAM Roles (3) | Service permissions | âœ… Attached |

---

## ğŸ”Œ Network Connectivity Matrix

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   From   â”‚    To    â”‚  Port   â”‚   Protocol  â”‚  Allowed â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Your IP  â”‚ Jenkins  â”‚   22    â”‚    SSH      â”‚    âœ…    â”‚
â”‚ Your IP  â”‚ Jenkins  â”‚  8080   â”‚    HTTP     â”‚    âœ…    â”‚
â”‚ Jenkins  â”‚ GitHub   â”‚  443    â”‚   HTTPS     â”‚    âœ…    â”‚
â”‚ Jenkins  â”‚ ECR      â”‚  443    â”‚   HTTPS     â”‚    âœ…    â”‚
â”‚ Jenkins  â”‚ EKS      â”‚  443    â”‚   HTTPS     â”‚    âœ…    â”‚
â”‚ Jenkins  â”‚ DocDB    â”‚ 27017   â”‚   MongoDB   â”‚    âœ…    â”‚
â”‚ EKS      â”‚ DocDB    â”‚ 27017   â”‚   MongoDB   â”‚    âœ…    â”‚
â”‚ EKS      â”‚ ECR      â”‚  443    â”‚   HTTPS     â”‚    âœ…    â”‚
â”‚ Internet â”‚ Jenkins  â”‚   22    â”‚    SSH      â”‚    âŒ    â”‚
â”‚ Internet â”‚ EKS      â”‚   Any   â”‚    Any      â”‚    âŒ    â”‚
â”‚ Internet â”‚ DocDB    â”‚ 27017   â”‚   MongoDB   â”‚    âŒ    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ˆ System State: Phase 3 Complete

### âœ… Deployed & Running

- VPC with public/private subnets
- Internet Gateway
- NAT Gateway
- Jenkins EC2 instance
- EKS Cluster (control plane + 2 worker nodes)
- DocumentDB cluster
- ECR repository
- Security groups
- IAM roles
- Secrets Manager secret

### âœ… Configured & Ready

- Jenkins with all plugins
- Docker on Jenkins
- kubectl on Jenkins
- AWS CLI on Jenkins
- Jenkins user permissions
- Service integrations

### ğŸ”œ Pending (Phase 4)

- Kubernetes deployment manifests
- Jenkinsfile (pipeline definition)
- GitHub webhooks
- Application deployment to EKS
- Load balancer configuration
- DNS setup (optional)

---

**Architecture Status:** 75% Complete  
**Next Phase:** CI/CD Pipeline Implementation
