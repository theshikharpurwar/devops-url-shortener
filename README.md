# âš¡ Shorty - URL Shortener# âš¡ Shorty - URL Shortener



<div align="center"><div align="center">



**Lightning-fast URL shortening with a stunning modern interface**![Shorty Logo](https://img.shields.io/badge/âš¡-Shorty-blueviolet?style=for-the-badge)



[![Node.js](https://img.shields.io/badge/Node.js-18+-339933?style=flat&logo=node.js&logoColor=white)](https://nodejs.org/)**Lightning-fast URL shortening with a stunning modern interface**

[![Docker](https://img.shields.io/badge/Docker-Ready-2496ED?style=flat&logo=docker&logoColor=white)](https://www.docker.com/)

[![MongoDB](https://img.shields.io/badge/MongoDB-7.0-47A248?style=flat&logo=mongodb&logoColor=white)](https://www.mongodb.com/)[![Node.js](https://img.shields.io/badge/Node.js-18+-green.svg)](https://nodejs.org/)

[![License](https://img.shields.io/badge/License-MIT-yellow.svg)](LICENSE)

[![Docker](https://img.shields.io/badge/Docker-20+-blue.svg)](https://www.docker.com/)

![GitHub last commit](https://img.shields.io/github/last-commit/theshikharpurwar/devops-url-shortener)

![GitHub repo size](https://img.shields.io/github/repo-size/theshikharpurwar/devops-url-shortener)[![Node.js](https://img.shields.io/badge/Node.js-18+-green.svg)](https://nodejs.org/)[![MongoDB](https://img.shields.io/badge/MongoDB-Latest-green.svg)](https://www.mongodb.com/)



[Live Demo](http://34.72.126.110:8001) â€¢ [Report Bug](https://github.com/theshikharpurwar/devops-url-shortener/issues) â€¢ [Request Feature](https://github.com/theshikharpurwar/devops-url-shortener/issues)[![Docker](https://img.shields.io/badge/Docker-Ready-blue.svg)](https://www.docker.com/)[![License](https://img.shields.io/badge/License-MIT-yellow.svg)](LICENSE)



</div>[![MongoDB](https://img.shields.io/badge/MongoDB-7.0-green.svg)](https://www.mongodb.com/)



---[![License](https://img.shields.io/badge/License-MIT-yellow.svg)](LICENSE)> **End-to-End DevOps Pipeline Project** - A complete URL shortener application with containerization, built for learning CI/CD, Kubernetes, AWS, and Infrastructure as Code.



## ğŸ“– Table of Contents



- [About](#-about)## âœ¨ Features---

- [Features](#-features)

- [Demo](#-demo)

- [Quick Start](#-quick-start)

- [Usage](#-usage)- ğŸš€ **Lightning Fast** - Instant URL shortening## ğŸ“‹ Table of Contents

- [API Documentation](#-api-documentation)

- [Technology Stack](#-technology-stack)- ğŸ¨ **Modern UI** - Beautiful, animated interface

- [Project Structure](#-project-structure)

- [Configuration](#-configuration)- ğŸ“Š **Analytics** - Track clicks and visit history- [Project Overview](#-project-overview)

- [Deployment](#-deployment)

- [Security](#-security)- ğŸ”’ **Secure** - Rate limiting and security headers- [Phase 1: Local Development](#-phase-1-local-development-current)

- [Contributing](#-contributing)

- [License](#-license)- ğŸ³ **Docker Ready** - One command to run- [Prerequisites](#-prerequisites)



---- ğŸ“± **Responsive** - Works on all devices- [Quick Start](#-quick-start)



## ğŸ¯ About- [Project Structure](#-project-structure)



**Shorty** is a modern, production-ready URL shortener built with the MERN stack (MongoDB, Express, React-inspired UI, Node.js). It features a stunning animated interface, comprehensive analytics, and enterprise-grade security features.## ğŸš€ Quick Start- [API Documentation](#-api-documentation)



### Why Shorty?- [Testing the Application](#-testing-the-application)



- ğŸ¨ **Beautiful Design** - Modern UI with animated gradients and smooth interactions### Prerequisites- [Troubleshooting](#-troubleshooting)

- âš¡ **Blazing Fast** - Optimized performance with Docker containerization

- ğŸ“Š **Analytics Ready** - Track every click with detailed visit history- [Next Phases](#-next-phases)

- ğŸ”’ **Secure by Default** - Rate limiting, security headers, and input validation

- ğŸ³ **Cloud Ready** - Deployed on Google Cloud Platform with CI/CD- Docker & Docker Compose



---- Git---



## âœ¨ Features



### Core Features### Run Locally## ğŸ¯ Project Overview

- âš¡ **Instant URL Shortening** - Generate short links in milliseconds

- ğŸ”„ **Smart Redirects** - Fast 302 redirects to original URLs

- ğŸ“Š **Real-time Analytics** - Track clicks, timestamps, user agents, and IPs

- ğŸ¨ **Modern UI** - Animated gradient backgrounds with floating shapes```bashThis is a **complete DevOps project** designed to demonstrate the full software development lifecycle with modern DevOps practices. We're building a URL shortener application and deploying it through a professional CI/CD pipeline.

- ğŸ“± **Fully Responsive** - Works perfectly on desktop, tablet, and mobile

- ğŸ”— **One-Click Copy** - Copy shortened URLs with visual feedback# Clone the repository



### Security Featuresgit clone https://github.com/theshikharpurwar/devops-url-shortener.git### The Complete Journey (4 Phases)

- ğŸ›¡ï¸ **Helmet.js Integration** - 12+ security headers enabled

- â±ï¸ **Rate Limiting** - 10 URLs per 15 minutes per IPcd devops-url-shortener

- âœ… **Input Validation** - URL format validation and sanitization

- ğŸ”’ **CORS Protection** - Configurable cross-origin policies| Phase | Focus | Tools | Status |

- ğŸš« **XSS Protection** - Content Security Policy headers

# Start the application|-------|-------|-------|--------|

### Developer Features

- ğŸ³ **Docker Support** - Multi-stage builds with Alpine Linuxdocker-compose up -d| **Phase 1** | **Local Development** | Node.js, MongoDB, Docker, Docker Compose | âœ… **COMPLETE** |

- ğŸ“¦ **Docker Compose** - One-command local development

- ğŸ” **Health Checks** - Built-in health monitoring endpoint| **Phase 2** | **Infrastructure as Code** | Terraform, AWS (VPC, EKS, ECR, DocumentDB) | âœ… **COMPLETE** |

- ğŸ“ **Comprehensive Logging** - Detailed request/response logs

- ğŸ§ª **RESTful API** - Clean, well-documented endpoints# Access at http://localhost:8001| **Phase 3** | **Configuration Management** | Ansible, Jenkins Setup | âœ… **COMPLETE** |



---```| **Phase 4** | **CI/CD Pipeline & Deployment** | Jenkins, Kubernetes, AWS EKS | âœ… **COMPLETE** |



## ğŸ¬ Demo



### Live ApplicationThat's it! ğŸ‰**Current Status**: ğŸŸ¢ **Phase 4 - Complete Pipeline Deployed!**

ğŸŒ **Live Demo**: [http://34.72.126.110:8001](http://34.72.126.110:8001)



### Screenshots

## ğŸ¯ Usage---

**Homepage - Animated Gradient Design**

```

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”

â”‚           âš¡                             â”‚### Web Interface## ğŸš€ Phase 1: Local Development

â”‚        Shorty                            â”‚

â”‚  Lightning-fast URL shortening           â”‚

â”‚                                          â”‚

â”‚  [Enter your long URL...        ]       â”‚1. Open http://localhost:8001 in your browserIn this phase, you will:

â”‚                                          â”‚

â”‚  [ âœ¨ Shorten Now!              ]       â”‚2. Enter a long URL

â”‚                                          â”‚

â”‚  Features:                               â”‚3. Click "Shorten Now!"âœ… Get a fully functional Node.js URL shortener application  

â”‚  âš¡ Fast    ğŸ”’ Secure    ğŸ“Š Analytics   â”‚

â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜4. Copy and share your shortened URLâœ… Containerize the application using Docker  

```

âœ… Run the entire stack locally with Docker Compose  

**Features**

- Animated gradient background (4-color rotation)### API Endpointsâœ… Test all API endpoints  

- Floating blur shapes animation

- Glassmorphism design (frosted glass effect)âœ… Understand the codebase before moving to cloud deployment  

- Smooth button ripple effects

- Responsive copy-to-clipboard functionality#### Create Short URL



---```bash### â¡ï¸ Next: Phase 2 - Infrastructure as Code



## ğŸš€ Quick Startcurl -X POST http://localhost:8001/url \



### Prerequisites  -H "Content-Type: application/json" \See **[terraform/README.md](terraform/README.md)** or **[terraform/QUICKSTART.md](terraform/QUICKSTART.md)**  



- **Docker** (v20.0+)  -d '{"url": "https://example.com/long/url"}'

- **Docker Compose** (v2.0+)

- **Git**```---



### Installation



```bash#### Get Analytics## âš™ï¸ Prerequisites

# 1. Clone the repository

git clone https://github.com/theshikharpurwar/devops-url-shortener.git```bash

cd devops-url-shortener

curl http://localhost:8001/url/analytics/{shortId}### 1ï¸âƒ£ Windows 11 Setup (CRITICAL)

# 2. Start the application

docker-compose up -d```



# 3. Access the applicationSince you're on Windows 11, you **MUST** use **WSL 2** for this project. Follow these steps:

# Open http://localhost:8001 in your browser

```#### Health Check



That's it! The app is now running! ğŸ‰```bash#### **Step 1: Install WSL 2**



### Verify Installationcurl http://localhost:8001/healthOpen PowerShell as Administrator and run:



```bash``````powershell

# Check if containers are running

docker pswsl --install



# You should see:## ğŸ“ Project Structure```

# - url-shortener-api (Node.js app)

# - url-shortener-mongo (MongoDB)



# Test the health endpoint```Restart your computer, then verify:

curl http://localhost:8001/health

â”œâ”€â”€ src/```powershell

# Expected response:

# {"status":"OK","message":"Server is running"}â”‚   â”œâ”€â”€ models/         # MongoDB schemaswsl --list --verbose

```

â”‚   â”œâ”€â”€ controllers/    # Business logic```

---

â”‚   â””â”€â”€ routes/         # API routes

## ğŸ’¡ Usage

â”œâ”€â”€ views/              # Frontend templatesYou should see `VERSION 2` for Ubuntu.

### Web Interface

â”œâ”€â”€ index.js            # Server entry point

1. **Open the App**

   - Navigate to `http://localhost:8001`â”œâ”€â”€ Dockerfile          # Container definitionğŸ“– **Detailed Instructions**: See [SETUP-WSL2.md](./SETUP-WSL2.md) for complete WSL 2 setup.



2. **Shorten a URL**â””â”€â”€ docker-compose.yml  # Multi-container setup

   - Enter any long URL (e.g., `https://github.com/username/very-long-repository-name`)

   - Click "âœ¨ Shorten Now!"```#### **Step 2: Install Docker Desktop**

   - Copy your new short URL

1. Download from: https://www.docker.com/products/docker-desktop/

3. **Use the Short URL**

   - Share the short URL anywhere## ğŸ› ï¸ Technology Stack2. Install with **WSL 2 backend enabled**

   - Anyone clicking it will be redirected to the original URL

3. In Docker Desktop Settings:

4. **View Analytics**

   - Access `/url/analytics/{shortId}` to see click statistics- **Backend**: Node.js + Express   - âœ… Enable "Use the WSL 2 based engine"



### Command Line Usage- **Database**: MongoDB   - âœ… Enable WSL Integration with Ubuntu



```bash- **Frontend**: EJS + CSS3 (Animated gradients)

# Create a short URL

curl -X POST http://localhost:8001/url \- **Security**: Helmet.js + Rate limiting#### **Step 3: Install VS Code + WSL Extension**

  -H "Content-Type: application/json" \

  -d '{"url": "https://github.com/theshikharpurwar"}'- **Containerization**: Docker + Docker Compose1. Install VS Code: https://code.visualstudio.com/



# Response:2. Install the **WSL** extension (by Microsoft)

# {

#   "success": true,## ğŸ”’ Security Features3. Open VS Code and connect to WSL:

#   "id": "abc123",

#   "shortUrl": "http://localhost:8001/abc123",   - Press `F1` â†’ Type `WSL: Connect to WSL`

#   "originalUrl": "https://github.com/theshikharpurwar"

# }- âœ… Helmet.js security headers



# Use the short URL (will redirect)- âœ… Rate limiting (10 URLs per 15 minutes per IP)### 2ï¸âƒ£ Required Software (Inside WSL 2)

curl -L http://localhost:8001/abc123

- âœ… Input validation

# Get analytics

curl http://localhost:8001/url/analytics/abc123- âœ… URL sanitizationOpen your WSL 2 terminal (Ubuntu) in VS Code and verify:

```



---

## ğŸ“Š Analytics```bash

## ğŸ“¡ API Documentation

# Check Docker

### Base URL

```Track your shortened URLs with:docker --version

Local:  http://localhost:8001

Cloud:  http://34.72.126.110:8001- Total click countdocker-compose --version

```

- Visit history with timestamps

### Endpoints

- User agent information# Check Git

#### 1. Create Short URL

- IP addressesgit --version

**POST** `/url`

```

Creates a new short URL from a long URL.

## ğŸ›‘ Stopping the App

**Request Headers:**

```If anything is missing, refer to [SETUP-WSL2.md](./SETUP-WSL2.md).

Content-Type: application/json

``````bash



**Request Body:**docker-compose down---

```json

{```

  "url": "https://example.com/very/long/url/here"

}## ğŸ Quick Start

```

## ğŸ› Troubleshooting

**Response:** `201 Created`

```json### Step 1: Navigate to Project Directory

{

  "success": true,**Port already in use?**

  "id": "XyZ123",

  "shortUrl": "http://localhost:8001/XyZ123",```bash**Important**: In WSL 2, your Windows drives are mounted under `/mnt/`:

  "originalUrl": "https://example.com/very/long/url/here"

}# Change the port in docker-compose.yml

```

ports:```bash

**Error Response:** `400 Bad Request`

```json  - "8002:8001"  # Change 8001 to 8002# Navigate to your project

{

  "success": false,```cd /mnt/d/devops-url-shortener

  "error": "URL is required"

}

```

**MongoDB connection issues?**# Verify you're in the right place

**Rate Limit:** 10 requests per 15 minutes per IP

```bashpwd

---

docker-compose down -vls -la

#### 2. Redirect to Original URL

docker-compose up -d```

**GET** `/:shortId`

```

Redirects to the original URL and tracks analytics.

You should see files like `package.json`, `Dockerfile`, `docker-compose.yml`, etc.

**Parameters:**

- `shortId` (required) - The shortened URL identifier## ğŸ“ Environment Variables



**Response:** `302 Found`### Step 2: Build and Run with Docker Compose

- Redirects to the original URL

- Increments click counterCreate a `.env` file (optional):

- Logs visit history

```envRun the following command in your WSL 2 terminal:

**Error Response:** `404 Not Found`

```jsonPORT=8001

{

  "success": false,MONGO_URL=mongodb://mongo:27017/url-shortener```bash

  "error": "Short URL not found"

}NODE_ENV=productiondocker-compose up --build

```

``````

---



#### 3. Get Analytics

## ğŸ¤ Contributing**What happens:**

**GET** `/url/analytics/:shortId`

- Docker builds the Node.js application image

Retrieves analytics data for a shortened URL.

Contributions are welcome! Feel free to:- Downloads MongoDB image (if not already cached)

**Parameters:**

- `shortId` (required) - The shortened URL identifier- Report bugs- Starts both `api` and `mongo` services



**Response:** `200 OK`- Suggest features- Creates a network for inter-service communication

```json

{- Submit pull requests- Sets up persistent volumes for MongoDB data

  "success": true,

  "shortId": "XyZ123",

  "originalUrl": "https://example.com/very/long/url/here",

  "totalClicks": 42,## ğŸ“„ License**Expected Output:**

  "visitHistory": [

    {```

      "timestamp": "2025-10-26T12:30:00.000Z",

      "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64)...",MIT License - feel free to use this project for learning and development!url-shortener-mongo    | waiting for connections on port 27017

      "ipAddress": "192.168.1.1",

      "_id": "6713a..."url-shortener-api      | âœ… MongoDB Connected Successfully

    }

  ],## ğŸ™ Acknowledgmentsurl-shortener-api      | ğŸš€ Server started on port 8001

  "createdAt": "2025-10-25T10:00:00.000Z",

  "updatedAt": "2025-10-26T12:30:00.000Z"```

}

```Built as a DevOps learning project with modern best practices.



**Error Response:** `404 Not Found`### Step 3: Access the Application

```json

{---

  "success": false,

  "error": "Short URL not found"Open your browser and go to:

}

```Made with â¤ï¸ by [Shikhar Purwar](https://github.com/theshikharpurwar) | 2025



---```

http://localhost:8001

#### 4. Health Check```



**GET** `/health`You should see a beautiful URL shortener interface! ğŸ‰



Checks if the server is running and responsive.---



**Response:** `200 OK`## ğŸ“ Project Structure

```json

{```

  "status": "OK",devops-url-shortener/

  "message": "Server is running",â”‚

  "timestamp": "2025-10-26T12:30:00.000Z"â”œâ”€â”€ src/

}â”‚   â”œâ”€â”€ models/

```â”‚   â”‚   â””â”€â”€ url.js                    # Mongoose URL schema

â”‚   â”œâ”€â”€ routes/

---â”‚   â”‚   â””â”€â”€ url.js                    # Express routes

â”‚   â”œâ”€â”€ controllers/

## ğŸ› ï¸ Technology Stackâ”‚   â”‚   â””â”€â”€ urlController.js          # Business logic

â”‚   â””â”€â”€ connect.js                    # MongoDB connection

### Backendâ”‚

- **Runtime**: Node.js 18 (LTS)â”œâ”€â”€ views/

- **Framework**: Express.js 4.18â”‚   â””â”€â”€ index.ejs                     # Frontend UI

- **Database**: MongoDB 7.0â”‚

- **ODM**: Mongoose 8.0â”œâ”€â”€ index.js                          # Express server entry point

- **ID Generation**: shortid 2.2â”œâ”€â”€ package.json                      # Dependencies

â”œâ”€â”€ Dockerfile                        # Container image definition

### Securityâ”œâ”€â”€ docker-compose.yml                # Multi-container orchestration

- **Helmet.js** - Security headersâ”œâ”€â”€ .dockerignore                     # Docker build exclusions

- **express-rate-limit** - Rate limiting middlewareâ”œâ”€â”€ .gitignore                        # Git exclusions

- **Input Validation** - URL format validationâ”‚

â””â”€â”€ Documentation/

### Frontend    â”œâ”€â”€ README.md                     # This file

- **Template Engine**: EJS 3.1    â”œâ”€â”€ SETUP-WSL2.md                 # WSL 2 setup guide

- **CSS**: Custom CSS3 with animations    â””â”€â”€ PROJECT-STRUCTURE.md          # Detailed structure docs

- **Fonts**: Google Fonts (Poppins)```

- **JavaScript**: Vanilla ES6+

---

### DevOps

- **Containerization**: Docker with multi-stage builds## ğŸ“¡ API Documentation

- **Orchestration**: Docker Compose

- **CI/CD**: GitHub Actions### 1. Create Short URL

- **Cloud**: Google Cloud Platform (GCE)

- **Image Registry**: Google Artifact Registry**Endpoint**: `POST /url`



---**Request Body**:

```json

## ğŸ“ Project Structure{

  "url": "https://www.example.com/very/long/url/here"

```}

devops-url-shortener/```

â”‚

â”œâ”€â”€ .github/**Response**:

â”‚   â””â”€â”€ workflows/```json

â”‚       â””â”€â”€ deploy.yml          # GCP deployment pipeline{

â”‚  "success": true,

â”œâ”€â”€ k8s/                         # Kubernetes manifests  "id": "XyZ123",

â”‚   â”œâ”€â”€ deployment.yml          # K8s deployment config  "shortUrl": "http://localhost:8001/XyZ123",

â”‚   â””â”€â”€ service.yml             # K8s service config  "originalUrl": "https://www.example.com/very/long/url/here"

â”‚}

â”œâ”€â”€ src/                         # Application source code```

â”‚   â”œâ”€â”€ controllers/

â”‚   â”‚   â””â”€â”€ urlController.js    # Business logic**cURL Example**:

â”‚   â”œâ”€â”€ models/```bash

â”‚   â”‚   â””â”€â”€ url.js              # Mongoose schemacurl -X POST http://localhost:8001/url \

â”‚   â”œâ”€â”€ routes/  -H "Content-Type: application/json" \

â”‚   â”‚   â””â”€â”€ url.js              # API routes  -d '{"url": "https://github.com/yourusername/repo"}'

â”‚   â””â”€â”€ connect.js              # MongoDB connection```

â”‚

â”œâ”€â”€ views/### 2. Redirect to Original URL

â”‚   â””â”€â”€ index.ejs               # Frontend template

â”‚**Endpoint**: `GET /:shortId`

â”œâ”€â”€ index.js                     # Express server entry point

â”œâ”€â”€ package.json                 # Node.js dependencies**Example**: `http://localhost:8001/XyZ123`

â”œâ”€â”€ package-lock.json            # Locked dependency versions

â”‚This will redirect you to the original URL.

â”œâ”€â”€ Dockerfile                   # Container image definition

â”œâ”€â”€ docker-compose.yml           # Local development setup### 3. Get Analytics

â”œâ”€â”€ .dockerignore               # Docker build exclusions

â”‚**Endpoint**: `GET /url/analytics/:shortId`

â”œâ”€â”€ .gitignore                  # Git exclusions

â”œâ”€â”€ README.md                   # This file**Example**: `http://localhost:8001/url/analytics/XyZ123`

â””â”€â”€ IMPROVEMENTS.md             # Enhancement proposals

```**Response**:

```json

---{

  "success": true,

## âš™ï¸ Configuration  "shortId": "XyZ123",

  "originalUrl": "https://github.com/yourusername/repo",

### Environment Variables  "totalClicks": 5,

  "visitHistory": [

Create a `.env` file in the project root (optional):    {

      "timestamp": "2025-10-25T10:30:00.000Z",

```env      "userAgent": "Mozilla/5.0...",

# Server Configuration      "ipAddress": "::1"

PORT=8001    }

NODE_ENV=production  ],

  "createdAt": "2025-10-25T10:00:00.000Z",

# MongoDB Configuration  "updatedAt": "2025-10-25T10:30:00.000Z"

MONGO_URL=mongodb://mongo:27017/url-shortener}

```

# Security (optional)

RATE_LIMIT_WINDOW_MS=900000    # 15 minutes### 4. Health Check

RATE_LIMIT_MAX_REQUESTS=10      # 10 requests per window

```**Endpoint**: `GET /health`



### Docker Compose Configuration**Response**:

```json

Modify `docker-compose.yml` to customize:{

  "status": "OK",

```yaml  "message": "Server is running",

version: '3.8'  "timestamp": "2025-10-25T10:30:00.000Z"

services:}

  mongo:```

    image: mongo:7.0

    ports:---

      - "27017:27017"  # Change MongoDB port if needed

    volumes:## ğŸ§ª Testing the Application

      - mongodb_data:/data/db

### Test 1: Using the Web Interface

  api:

    build: .1. Open http://localhost:8001

    ports:2. Enter a long URL (e.g., `https://github.com/yourusername/long-repo-name`)

      - "8001:8001"    # Change application port3. Click "Shorten URL"

    environment:4. Copy the shortened URL

      - MONGO_URL=mongodb://mongo:27017/url-shortener5. Open it in a new tab - you should be redirected!

      - PORT=8001

```### Test 2: Using cURL (Recommended for DevOps)



---```bash

# Test 1: Create a short URL

## ğŸš€ Deploymentcurl -X POST http://localhost:8001/url \

  -H "Content-Type: application/json" \

### Local Deployment (Docker Compose)  -d '{"url": "https://www.google.com"}'



```bash# Expected output: {"success":true,"id":"abc123",...}

# Build and start

docker-compose up -d --build# Test 2: Get analytics (replace abc123 with your ID)

curl http://localhost:8001/url/analytics/abc123

# View logs

docker-compose logs -f# Test 3: Health check

curl http://localhost:8001/health

# Stop```

docker-compose down

### Test 3: Using PowerShell (Windows)

# Stop and remove volumes (fresh start)

docker-compose down -v```powershell

```# Create a short URL

Invoke-RestMethod -Uri "http://localhost:8001/url" `

### Cloud Deployment (GCP)  -Method Post `

  -ContentType "application/json" `

This project includes automated deployment to Google Cloud Platform:  -Body '{"url": "https://www.google.com"}'

```

1. **GitHub Actions** - Automated CI/CD pipeline

2. **Google Artifact Registry** - Docker image storage---

3. **Google Compute Engine** - Production hosting

4. **Workload Identity Federation** - Secure, keyless authentication## ğŸ› Troubleshooting



**Deployment Trigger:**### Issue 1: "docker: command not found"

- Push to `main` or `gcp-actions-cicd` branch

- GitHub Actions automatically builds and deploys**Solution**: 

- Ensure Docker Desktop is running

**Live URL:** http://34.72.126.110:8001- Verify WSL Integration is enabled in Docker Desktop Settings

- Restart WSL: `wsl --shutdown` (in PowerShell), then reopen

### Manual Docker Deployment

### Issue 2: "Cannot connect to MongoDB"

```bash

# Build the image**Solution**:

docker build -t shorty:latest .```bash

# Check if MongoDB container is running

# Run the containerdocker ps

docker run -d \

  -p 8001:8001 \# Check MongoDB logs

  -e MONGO_URL=mongodb://your-mongo-host:27017/url-shortener \docker logs url-shortener-mongo

  --name shorty-app \

  shorty:latest# Restart the entire stack

docker-compose down

# Check logsdocker-compose up --build

docker logs -f shorty-app```

```

### Issue 3: Port 8001 already in use

---

**Solution**:

## ğŸ”’ Security```bash

# Find what's using the port

### Implemented Security Measuresnetstat -ano | findstr :8001



#### 1. **Security Headers (Helmet.js)**# Kill the process (PowerShell as Admin)

```Stop-Process -Id <PID> -Force

âœ… Strict-Transport-Security

âœ… X-Content-Type-Options: nosniff# Or change the port in docker-compose.yml

âœ… X-Frame-Options: SAMEORIGIN# Change "8001:8001" to "8002:8001"

âœ… X-XSS-Protection```

âœ… Referrer-Policy: no-referrer

âœ… Cross-Origin-Opener-Policy### Issue 4: Slow file performance in WSL

âœ… Cross-Origin-Resource-Policy

```**Solution**: Always work in the Linux filesystem, not `/mnt/`:



#### 2. **Rate Limiting**```bash

- **Limit**: 10 URL creations per 15 minutes per IP# Copy project to Linux filesystem

- **Purpose**: Prevent abuse and DDoS attackscp -r /mnt/d/devops-url-shortener ~/projects/devops-url-shortener

- **Scope**: Applied to POST /url endpointcd ~/projects/devops-url-shortener

```

#### 3. **Input Validation**

- URL format validation### Issue 5: Changes not reflecting after rebuild

- Automatic protocol addition (http/https)

- Malicious input sanitization**Solution**:

```bash

#### 4. **MongoDB Security**# Stop all containers

- Mongoose ODM with schema validationdocker-compose down

- No exposed MongoDB ports in production

- Data validation at model level# Remove volumes and rebuild

docker-compose down -v

### Security Best Practicesdocker-compose up --build

```

```javascript

// Example: Using the API securely---

const response = await fetch('/url', {

  method: 'POST',## ğŸ›‘ Stopping the Application

  headers: {

    'Content-Type': 'application/json',```bash

  },# Stop containers (keeps data)

  body: JSON.stringify({ url: sanitizedUrl })docker-compose stop

});

```# Stop and remove containers (keeps volumes)

docker-compose down

---

# Stop, remove containers AND delete all data

## ğŸ› Troubleshootingdocker-compose down -v

```

### Common Issues

---

#### Port Already in Use

```bash## ğŸ“Š Viewing Logs

# Find process using port 8001

# Windows```bash

netstat -ano | findstr :8001# View all logs

docker-compose logs

# Linux/Mac

lsof -i :8001# Follow logs in real-time

docker-compose logs -f

# Change port in docker-compose.yml

ports:# View logs for specific service

  - "8002:8001"  # Use port 8002 insteaddocker-compose logs -f api

```docker-compose logs -f mongo

```

#### MongoDB Connection Failed

```bash---

# Check MongoDB is running

docker ps | grep mongo## ğŸ” Useful Docker Commands



# Restart MongoDB```bash

docker-compose restart mongo# List running containers

docker ps

# Check MongoDB logs

docker logs url-shortener-mongo# List all containers (including stopped)

docker ps -a

# Fresh start (removes all data)

docker-compose down -v# View container resource usage

docker-compose up -ddocker stats

```

# Execute command in running container

#### Cannot Access Applicationdocker exec -it url-shortener-api sh

```bash

# Check if containers are running# Access MongoDB shell

docker psdocker exec -it url-shortener-mongo mongosh



# Check API logs# Remove unused images and containers

docker logs url-shortener-apidocker system prune -a

```

# Check health endpoint

curl http://localhost:8001/health---



# Rebuild from scratch## ğŸ“š Next Phases

docker-compose down -v

docker-compose build --no-cache### âœ… Phase 2: Infrastructure as Code (COMPLETE)

docker-compose up -d- âœ… Provision AWS VPC, EKS Cluster

```- âœ… Set up DocumentDB (managed MongoDB)

- âœ… Create ECR repository for Docker images

#### Rate Limit Exceeded- âœ… Configure S3 for Terraform state

```bash

# Wait 15 minutes, or**Guide**: [terraform/README.md](terraform/README.md)

# Restart the API container to reset

docker-compose restart api### âœ… Phase 3: Configuration Management (COMPLETE)

```- âœ… Automate Jenkins EC2 server setup

- âœ… Install required tools (Docker, kubectl, etc.)

---- âœ… Configure Jenkins plugins



## ğŸ“Š Monitoring & Logs**Guide**: [ansible/README.md](ansible/README.md)



### View Logs### âœ… Phase 4: CI/CD Pipeline (COMPLETE) 

- âœ… Create Kubernetes manifests (deployments, services)

```bash- âœ… Write Jenkinsfile for automated pipeline

# All services- âœ… Set up Git webhooks for auto-deployment

docker-compose logs- âœ… Deploy to AWS EKS



# Follow logs in real-time**Guides**: 

docker-compose logs -f- [JENKINS-SETUP.md](JENKINS-SETUP.md) - Configure Jenkins

- [DEPLOYMENT-GUIDE.md](DEPLOYMENT-GUIDE.md) - Deploy application

# Specific service- [PHASE4-COMPLETE.md](PHASE4-COMPLETE.md) - Summary & next steps

docker-compose logs -f api

docker-compose logs -f mongo---



# Last 100 lines## ğŸ‘¥ Team

docker-compose logs --tail=100 api

```- **Team Size**: 3 members

- **Your Role**: DevOps Engineer / Full-Stack Developer

### Health Monitoring- **Instructor**: Senior DevOps Lead



```bash---

# Check application health

curl http://localhost:8001/health## ğŸ“ Learning Objectives



# Check container healthBy completing this project, you will learn:

docker ps

âœ… **Containerization**: Docker, multi-stage builds, optimization  

# View resource usageâœ… **Orchestration**: Docker Compose, Kubernetes  

docker statsâœ… **Cloud**: AWS services (EC2, EKS, ECR, DocumentDB, S3)  

```âœ… **IaC**: Terraform for infrastructure provisioning  

âœ… **Config Management**: Ansible for server configuration  

---âœ… **CI/CD**: Jenkins pipeline, automated deployments  

âœ… **Version Control**: Git workflows, branching strategies  

## ğŸ¤ Contributingâœ… **DevOps Best Practices**: 12-factor apps, health checks, logging  



Contributions are welcome! Here's how you can help:---



### Reporting Bugs## ğŸ“ Need Help?



1. Check if the bug already exists in [Issues](https://github.com/theshikharpurwar/devops-url-shortener/issues)1. **WSL Issues**: See [SETUP-WSL2.md](./SETUP-WSL2.md)

2. Create a new issue with:2. **File Structure Questions**: See [PROJECT-STRUCTURE.md](./PROJECT-STRUCTURE.md)

   - Clear title3. **Docker Issues**: Check the Troubleshooting section above

   - Steps to reproduce

   - Expected vs actual behavior---

   - Screenshots (if applicable)

## ğŸ“ Educational Use

### Suggesting Features

This project is designed for educational purposes as part of a university DevOps course. Feel free to modify and extend it for your learning!

1. Open a new issue with the `enhancement` label

2. Describe the feature and its benefits---

3. Include mockups or examples if possible

## ğŸ“„ License

### Pull Requests

MIT License - See LICENSE file for details

1. Fork the repository

2. Create a feature branch (`git checkout -b feature/amazing-feature`)---

3. Commit your changes (`git commit -m 'Add amazing feature'`)

4. Push to the branch (`git push origin feature/amazing-feature`)## âœ… Phase 1 Checklist

5. Open a Pull Request

- [x] WSL 2 is installed and working

### Code Style- [x] Docker Desktop is running with WSL 2 backend

- [x] VS Code is connected to WSL

- Use ES6+ JavaScript- [x] `docker-compose up --build` runs without errors

- Follow existing code formatting- [x] Application is accessible at http://localhost:8001

- Add comments for complex logic- [x] You can create and use shortened URLs

- Update README if needed- [x] You understand the codebase structure

- [x] All API endpoints are tested and working

---

**Phase 1 Complete! âœ…**

## ğŸ“ Future Enhancements

---

See [IMPROVEMENTS.md](./IMPROVEMENTS.md) for detailed enhancement proposals:

## âœ… Phase 2 Checklist

- ğŸ¨ Custom short URL IDs

- â° URL expiration (TTL)**Infrastructure as Code with Terraform**

- ğŸ“± QR code generation

- ğŸ” Password-protected URLsBefore moving to Phase 3, ensure:

- ğŸ“Š Advanced analytics dashboard

- ğŸŒ Geographic location tracking- [ ] Terraform and AWS CLI installed

- ğŸ”‘ API key authentication- [ ] AWS credentials configured (`aws configure`)

- ğŸ“¦ Bulk URL creation- [ ] SSH key pair generated (`~/.ssh/id_rsa`)

- ğŸ’¾ Redis caching- [ ] S3 backend created (run `setup-backend.sh`)

- ğŸ§ª Comprehensive testing- [ ] `terraform.tfvars` created with YOUR IP address

- [ ] `terraform apply` completed successfully

---- [ ] All ~40-50 resources created in AWS

- [ ] EKS cluster accessible (`kubectl get nodes`)

## ğŸ“„ License- [ ] Jenkins UI accessible at http://JENKINS_IP:8080

- [ ] ECR repository created

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.- [ ] DocumentDB cluster running

- [ ] All outputs saved for Phase 3

```

MIT License**Quick Start:** See [terraform/QUICKSTART.md](terraform/QUICKSTART.md)  

**Full Guide:** See [terraform/README.md](terraform/README.md)

Copyright (c) 2025 Shikhar Purwar

**Once all items are checked, you're ready for Phase 3! ğŸš€**

Permission is hereby granted, free of charge, to any person obtaining a copy

of this software and associated documentation files (the "Software"), to deal---

in the Software without restriction, including without limitation the rights

to use, copy, modify, merge, publish, distribute, sublicense, and/or sell## âœ… Phase 3 Checklist

copies of the Software, and to permit persons to whom the Software is

furnished to do so, subject to the following conditions:**Configuration Management with Ansible**



The above copyright notice and this permission notice shall be included in allBefore moving to Phase 4, ensure:

copies or substantial portions of the Software.

```- [ ] Jenkins server is accessible via SSH

- [ ] Ansible playbook executed successfully

---- [ ] Jenkins is running on port 8080

- [ ] Docker installed and jenkins user added to docker group

## ğŸ™ Acknowledgments- [ ] kubectl installed and configured

- [ ] AWS CLI v2 installed

- **Node.js Community** - For the awesome runtime- [ ] Initial Jenkins admin password retrieved

- **MongoDB** - For the flexible database- [ ] Jenkins setup wizard completed

- **Google Cloud Platform** - For reliable hosting

- **Open Source Community** - For inspiration and tools**Quick Start:** See [ansible/QUICKSTART.md](ansible/QUICKSTART.md)  

**Full Guide:** See [ansible/README.md](ansible/README.md)  

---**Windows Guide:** See [ansible/WINDOWS-GUIDE.md](ansible/WINDOWS-GUIDE.md)



## ğŸ“ Contact & Support**Once all items are checked, you're ready for Phase 4! ğŸš€**



- **Author**: Shikhar Purwar---

- **GitHub**: [@theshikharpurwar](https://github.com/theshikharpurwar)

- **Repository**: [devops-url-shortener](https://github.com/theshikharpurwar/devops-url-shortener)## âœ… Phase 4 Checklist

- **Issues**: [Report a bug or request a feature](https://github.com/theshikharpurwar/devops-url-shortener/issues)

**CI/CD Pipeline & Kubernetes Deployment**

---

Deployment checklist:

## â­ Show Your Support

- [ ] Jenkinsfile updated with Terraform outputs (ECR URL, EKS cluster, DB secret)

If you found this project helpful, please give it a â­ï¸ on GitHub!- [ ] Jenkins plugins installed (Docker Pipeline, Amazon ECR, Kubernetes CLI)

- [ ] AWS credentials configured in Jenkins

---- [ ] Pipeline job created (`url-shortener-pipeline`)

- [ ] GitHub webhook configured

<div align="center">- [ ] Code committed and pushed to GitHub

- [ ] Pipeline executed successfully (all 6 stages pass)

**Made with â¤ï¸ by [Shikhar Purwar](https://github.com/theshikharpurwar)**- [ ] Kubernetes deployment created (2 pods running)

- [ ] Load Balancer provisioned and accessible

**October 2025**- [ ] Application accessible via Load Balancer URL

- [ ] URL shortening working end-to-end

[â¬† Back to Top](#-shorty---url-shortener)- [ ] Health check endpoint responding



</div>**Setup Guide:** See [JENKINS-SETUP.md](JENKINS-SETUP.md)  

**Deployment Guide:** See [DEPLOYMENT-GUIDE.md](DEPLOYMENT-GUIDE.md)  
**Summary:** See [PHASE4-COMPLETE.md](PHASE4-COMPLETE.md)

**Once all items are checked, your DevOps pipeline is COMPLETE! ğŸ‰**

---

Made with â¤ï¸ for DevOps learning | October 2025
