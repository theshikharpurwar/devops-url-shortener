# âš¡ Shorty - URL Shortener# âš¡ Shorty - URL Shortener# âš¡ Shorty - URL Shortener



<div align="center">



**Lightning-fast URL shortening with a stunning modern interface**<div align="center"><div align="center">



[![Node.js](https://img.shields.io/badge/Node.js-18+-339933?style=flat&logo=node.js&logoColor=white)](https://nodejs.org/)

[![Docker](https://img.shields.io/badge/Docker-Ready-2496ED?style=flat&logo=docker&logoColor=white)](https://www.docker.com/)

[![MongoDB](https://img.shields.io/badge/MongoDB-7.0-47A248?style=flat&logo=mongodb&logoColor=white)](https://www.mongodb.com/)**Lightning-fast URL shortening with a stunning modern interface**![Shorty Logo](https://img.shields.io/badge/âš¡-Shorty-blueviolet?style=for-the-badge)

[![Google Cloud](https://img.shields.io/badge/GCP-Deployed-4285F4?style=flat&logo=google-cloud&logoColor=white)](https://cloud.google.com/)

[![License](https://img.shields.io/badge/License-MIT-yellow.svg)](LICENSE)



![GitHub last commit](https://img.shields.io/github/last-commit/theshikharpurwar/devops-url-shortener)[![Node.js](https://img.shields.io/badge/Node.js-18+-339933?style=flat&logo=node.js&logoColor=white)](https://nodejs.org/)**Lightning-fast URL shortening with a stunning modern interface**

![GitHub repo size](https://img.shields.io/github/repo-size/theshikharpurwar/devops-url-shortener)

[![Docker](https://img.shields.io/badge/Docker-Ready-2496ED?style=flat&logo=docker&logoColor=white)](https://www.docker.com/)

[Live Demo](http://34.72.126.110:8001) â€¢ [Report Bug](https://github.com/theshikharpurwar/devops-url-shortener/issues) â€¢ [Request Feature](https://github.com/theshikharpurwar/devops-url-shortener/issues)

[![MongoDB](https://img.shields.io/badge/MongoDB-7.0-47A248?style=flat&logo=mongodb&logoColor=white)](https://www.mongodb.com/)[![Node.js](https://img.shields.io/badge/Node.js-18+-green.svg)](https://nodejs.org/)

</div>

[![License](https://img.shields.io/badge/License-MIT-yellow.svg)](LICENSE)

---

[![Docker](https://img.shields.io/badge/Docker-20+-blue.svg)](https://www.docker.com/)

## ğŸ“– Table of Contents

![GitHub last commit](https://img.shields.io/github/last-commit/theshikharpurwar/devops-url-shortener)

- [About](#-about)

- [Features](#-features)![GitHub repo size](https://img.shields.io/github/repo-size/theshikharpurwar/devops-url-shortener)[![Node.js](https://img.shields.io/badge/Node.js-18+-green.svg)](https://nodejs.org/)[![MongoDB](https://img.shields.io/badge/MongoDB-Latest-green.svg)](https://www.mongodb.com/)

- [Demo](#-demo)

- [Quick Start](#-quick-start)

- [Usage](#-usage)

- [API Documentation](#-api-documentation)[Live Demo](http://34.72.126.110:8001) â€¢ [Report Bug](https://github.com/theshikharpurwar/devops-url-shortener/issues) â€¢ [Request Feature](https://github.com/theshikharpurwar/devops-url-shortener/issues)[![Docker](https://img.shields.io/badge/Docker-Ready-blue.svg)](https://www.docker.com/)[![License](https://img.shields.io/badge/License-MIT-yellow.svg)](LICENSE)

- [Technology Stack](#-technology-stack)

- [DevOps & Deployment](#-devops--deployment)

- [Project Structure](#-project-structure)

- [Configuration](#-configuration)</div>[![MongoDB](https://img.shields.io/badge/MongoDB-7.0-green.svg)](https://www.mongodb.com/)

- [Security](#-security)

- [Troubleshooting](#-troubleshooting)

- [Contributing](#-contributing)

- [License](#-license)---[![License](https://img.shields.io/badge/License-MIT-yellow.svg)](LICENSE)> **End-to-End DevOps Pipeline Project** - A complete URL shortener application with containerization, built for learning CI/CD, Kubernetes, AWS, and Infrastructure as Code.



---



## ğŸ¯ About## ğŸ“– Table of Contents



**Shorty** is a modern, production-ready URL shortener built with the MERN stack and deployed on Google Cloud Platform. It features a stunning animated interface, comprehensive analytics, enterprise-grade security, and a complete CI/CD pipeline using GitHub Actions.



### Why Shorty?- [About](#-about)## âœ¨ Features---



- ğŸ¨ **Beautiful Design** - Modern UI with animated gradients and smooth interactions- [Features](#-features)

- âš¡ **Blazing Fast** - Optimized performance with Docker containerization

- ğŸ“Š **Analytics Ready** - Track every click with detailed visit history- [Demo](#-demo)

- ğŸ”’ **Secure by Default** - Rate limiting, security headers, and input validation

- â˜ï¸ **Cloud Native** - Deployed on Google Cloud Platform with automated CI/CD- [Quick Start](#-quick-start)

- ğŸš€ **Production Ready** - Enterprise-grade DevOps practices

- [Usage](#-usage)- ğŸš€ **Lightning Fast** - Instant URL shortening## ğŸ“‹ Table of Contents

---

- [API Documentation](#-api-documentation)

## âœ¨ Features

- [Technology Stack](#-technology-stack)- ğŸ¨ **Modern UI** - Beautiful, animated interface

### Core Features

- âš¡ **Instant URL Shortening** - Generate short links in milliseconds- [Project Structure](#-project-structure)

- ğŸ”„ **Smart Redirects** - Fast 302 redirects to original URLs

- ğŸ“Š **Real-time Analytics** - Track clicks, timestamps, user agents, and IPs- [Configuration](#-configuration)- ğŸ“Š **Analytics** - Track clicks and visit history- [Project Overview](#-project-overview)

- ğŸ¨ **Modern UI** - Animated gradient backgrounds with floating shapes

- ğŸ“± **Fully Responsive** - Works perfectly on desktop, tablet, and mobile- [Deployment](#-deployment)

- ğŸ”— **One-Click Copy** - Copy shortened URLs with visual feedback

- [Security](#-security)- ğŸ”’ **Secure** - Rate limiting and security headers- [Phase 1: Local Development](#-phase-1-local-development-current)

### Security Features

- ğŸ›¡ï¸ **Helmet.js Integration** - 12+ security headers enabled- [Contributing](#-contributing)

- â±ï¸ **Rate Limiting** - 10 URLs per 15 minutes per IP

- âœ… **Input Validation** - URL format validation and sanitization- [License](#-license)- ğŸ³ **Docker Ready** - One command to run- [Prerequisites](#-prerequisites)

- ğŸ”’ **CORS Protection** - Configurable cross-origin policies

- ğŸš« **XSS Protection** - Content Security Policy headers



### DevOps Features---- ğŸ“± **Responsive** - Works on all devices- [Quick Start](#-quick-start)

- ğŸ³ **Docker Support** - Multi-stage builds with Alpine Linux

- ğŸ“¦ **Docker Compose** - One-command local development

- ğŸ”„ **CI/CD Pipeline** - Automated deployment with GitHub Actions

- â˜ï¸ **Cloud Deployment** - Running on Google Compute Engine## ğŸ¯ About- [Project Structure](#-project-structure)

- ğŸ” **Health Checks** - Built-in monitoring and health endpoints

- ğŸ“ **Comprehensive Logging** - Detailed request/response logs



---**Shorty** is a modern, production-ready URL shortener built with the MERN stack (MongoDB, Express, React-inspired UI, Node.js). It features a stunning animated interface, comprehensive analytics, and enterprise-grade security features.## ğŸš€ Quick Start- [API Documentation](#-api-documentation)



## ğŸ¬ Demo



### Live Application### Why Shorty?- [Testing the Application](#-testing-the-application)

ğŸŒ **Live Demo**: [http://34.72.126.110:8001](http://34.72.126.110:8001)



### Features Showcase

- ğŸ¨ **Beautiful Design** - Modern UI with animated gradients and smooth interactions### Prerequisites- [Troubleshooting](#-troubleshooting)

**Modern Animated Interface**

- Gradient background with 4-color animation- âš¡ **Blazing Fast** - Optimized performance with Docker containerization

- Floating blur shapes effects

- Glassmorphism design (frosted glass)- ğŸ“Š **Analytics Ready** - Track every click with detailed visit history- [Next Phases](#-next-phases)

- Smooth button ripple effects

- Responsive copy-to-clipboard- ğŸ”’ **Secure by Default** - Rate limiting, security headers, and input validation



---- ğŸ³ **Cloud Ready** - Deployed on Google Cloud Platform with CI/CD- Docker & Docker Compose



## ğŸš€ Quick Start



### Prerequisites---- Git---



- **Docker** (v20.0+)

- **Docker Compose** (v2.0+)

- **Git**## âœ¨ Features



### Local Installation



```bash### Core Features### Run Locally## ğŸ¯ Project Overview

# 1. Clone the repository

git clone https://github.com/theshikharpurwar/devops-url-shortener.git- âš¡ **Instant URL Shortening** - Generate short links in milliseconds

cd devops-url-shortener

- ğŸ”„ **Smart Redirects** - Fast 302 redirects to original URLs

# 2. Start the application

docker-compose up -d- ğŸ“Š **Real-time Analytics** - Track clicks, timestamps, user agents, and IPs



# 3. Access the application- ğŸ¨ **Modern UI** - Animated gradient backgrounds with floating shapes```bashThis is a **complete DevOps project** designed to demonstrate the full software development lifecycle with modern DevOps practices. We're building a URL shortener application and deploying it through a professional CI/CD pipeline.

# Open http://localhost:8001 in your browser

```- ğŸ“± **Fully Responsive** - Works perfectly on desktop, tablet, and mobile



That's it! The app is now running! ğŸ‰- ğŸ”— **One-Click Copy** - Copy shortened URLs with visual feedback# Clone the repository



### Verify Installation



```bash### Security Featuresgit clone https://github.com/theshikharpurwar/devops-url-shortener.git### The Complete Journey (4 Phases)

# Check if containers are running

docker ps- ğŸ›¡ï¸ **Helmet.js Integration** - 12+ security headers enabled



# You should see:- â±ï¸ **Rate Limiting** - 10 URLs per 15 minutes per IPcd devops-url-shortener

# - url-shortener-api (Node.js app)

# - url-shortener-mongo (MongoDB)- âœ… **Input Validation** - URL format validation and sanitization



# Test the health endpoint- ğŸ”’ **CORS Protection** - Configurable cross-origin policies| Phase | Focus | Tools | Status |

curl http://localhost:8001/health

- ğŸš« **XSS Protection** - Content Security Policy headers

# Expected response:

# {"status":"OK","message":"Server is running"}# Start the application|-------|-------|-------|--------|

```

### Developer Features

---

- ğŸ³ **Docker Support** - Multi-stage builds with Alpine Linuxdocker-compose up -d| **Phase 1** | **Local Development** | Node.js, MongoDB, Docker, Docker Compose | âœ… **COMPLETE** |

## ğŸ’¡ Usage

- ğŸ“¦ **Docker Compose** - One-command local development

### Web Interface

- ğŸ” **Health Checks** - Built-in health monitoring endpoint| **Phase 2** | **Infrastructure as Code** | Terraform, AWS (VPC, EKS, ECR, DocumentDB) | âœ… **COMPLETE** |

1. **Open the App**: Navigate to `http://localhost:8001`

2. **Shorten a URL**: Enter any long URL and click "âœ¨ Shorten Now!"- ğŸ“ **Comprehensive Logging** - Detailed request/response logs

3. **Copy & Share**: Copy your new short URL

4. **Track Analytics**: Access `/url/analytics/{shortId}` for statistics- ğŸ§ª **RESTful API** - Clean, well-documented endpoints# Access at http://localhost:8001| **Phase 3** | **Configuration Management** | Ansible, Jenkins Setup | âœ… **COMPLETE** |



### Command Line Usage



```bash---```| **Phase 4** | **CI/CD Pipeline & Deployment** | Jenkins, Kubernetes, AWS EKS | âœ… **COMPLETE** |

# Create a short URL

curl -X POST http://localhost:8001/url \

  -H "Content-Type: application/json" \

  -d '{"url": "https://github.com/theshikharpurwar"}'## ğŸ¬ Demo



# Response:

# {

#   "success": true,### Live ApplicationThat's it! ğŸ‰**Current Status**: ğŸŸ¢ **Phase 4 - Complete Pipeline Deployed!**

#   "id": "abc123",

#   "shortUrl": "http://localhost:8001/abc123",ğŸŒ **Live Demo**: [http://34.72.126.110:8001](http://34.72.126.110:8001)

#   "originalUrl": "https://github.com/theshikharpurwar"

# }



# Get analytics### Screenshots

curl http://localhost:8001/url/analytics/abc123

```## ğŸ¯ Usage---



---**Homepage - Animated Gradient Design**



## ğŸ“¡ API Documentation```



### Base URLsâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”

```

Local:  http://localhost:8001â”‚           âš¡                             â”‚### Web Interface## ğŸš€ Phase 1: Local Development

Cloud:  http://34.72.126.110:8001

```â”‚        Shorty                            â”‚



### Endpointsâ”‚  Lightning-fast URL shortening           â”‚



#### 1. Create Short URLâ”‚                                          â”‚

**POST** `/url`

â”‚  [Enter your long URL...        ]       â”‚1. Open http://localhost:8001 in your browserIn this phase, you will:

**Request:**

```jsonâ”‚                                          â”‚

{

  "url": "https://example.com/very/long/url"â”‚  [ âœ¨ Shorten Now!              ]       â”‚2. Enter a long URL

}

```â”‚                                          â”‚



**Response:** `201 Created`â”‚  Features:                               â”‚3. Click "Shorten Now!"âœ… Get a fully functional Node.js URL shortener application  

```json

{â”‚  âš¡ Fast    ğŸ”’ Secure    ğŸ“Š Analytics   â”‚

  "success": true,

  "id": "XyZ123",â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜4. Copy and share your shortened URLâœ… Containerize the application using Docker  

  "shortUrl": "http://localhost:8001/XyZ123",

  "originalUrl": "https://example.com/very/long/url"```

}

```âœ… Run the entire stack locally with Docker Compose  



**Rate Limit:** 10 requests per 15 minutes per IP**Features**



---- Animated gradient background (4-color rotation)### API Endpointsâœ… Test all API endpoints  



#### 2. Redirect to Original URL- Floating blur shapes animation

**GET** `/:shortId`

- Glassmorphism design (frosted glass effect)âœ… Understand the codebase before moving to cloud deployment  

Redirects to the original URL and tracks analytics.

- Smooth button ripple effects

**Response:** `302 Found` (Redirects to original URL)

- Responsive copy-to-clipboard functionality#### Create Short URL

---



#### 3. Get Analytics

**GET** `/url/analytics/:shortId`---```bash### â¡ï¸ Next: Phase 2 - Infrastructure as Code



**Response:** `200 OK`

```json

{## ğŸš€ Quick Startcurl -X POST http://localhost:8001/url \

  "success": true,

  "shortId": "XyZ123",

  "originalUrl": "https://example.com",

  "totalClicks": 42,### Prerequisites  -H "Content-Type: application/json" \See **[terraform/README.md](terraform/README.md)** or **[terraform/QUICKSTART.md](terraform/QUICKSTART.md)**  

  "visitHistory": [

    {

      "timestamp": "2025-10-26T12:30:00.000Z",

      "userAgent": "Mozilla/5.0...",- **Docker** (v20.0+)  -d '{"url": "https://example.com/long/url"}'

      "ipAddress": "192.168.1.1"

    }- **Docker Compose** (v2.0+)

  ],

  "createdAt": "2025-10-25T10:00:00.000Z",- **Git**```---

  "updatedAt": "2025-10-26T12:30:00.000Z"

}

```

### Installation

---



#### 4. Health Check

**GET** `/health````bash#### Get Analytics## âš™ï¸ Prerequisites



**Response:** `200 OK`# 1. Clone the repository

```json

{git clone https://github.com/theshikharpurwar/devops-url-shortener.git```bash

  "status": "OK",

  "message": "Server is running",cd devops-url-shortener

  "timestamp": "2025-10-26T12:30:00.000Z"

}curl http://localhost:8001/url/analytics/{shortId}### 1ï¸âƒ£ Windows 11 Setup (CRITICAL)

```

# 2. Start the application

---

docker-compose up -d```

## ğŸ› ï¸ Technology Stack



### Backend

- **Runtime**: Node.js 18 (LTS)# 3. Access the applicationSince you're on Windows 11, you **MUST** use **WSL 2** for this project. Follow these steps:

- **Framework**: Express.js 4.18

- **Database**: MongoDB 7.0# Open http://localhost:8001 in your browser

- **ODM**: Mongoose 8.0

- **ID Generation**: shortid 2.2```#### Health Check



### Security

- **Helmet.js** - Security headers

- **express-rate-limit** - Rate limitingThat's it! The app is now running! ğŸ‰```bash#### **Step 1: Install WSL 2**

- **Input Validation** - URL sanitization



### Frontend

- **Template Engine**: EJS 3.1### Verify Installationcurl http://localhost:8001/healthOpen PowerShell as Administrator and run:

- **CSS**: Custom CSS3 with animations

- **Fonts**: Google Fonts (Poppins)

- **JavaScript**: Vanilla ES6+

```bash``````powershell

### DevOps & Cloud

- **Containerization**: Docker with multi-stage builds# Check if containers are running

- **Orchestration**: Docker Compose

- **CI/CD**: GitHub Actionsdocker pswsl --install

- **Cloud Platform**: Google Cloud Platform (GCP)

- **Compute**: Google Compute Engine (GCE)

- **Container Registry**: Google Artifact Registry

- **Authentication**: Workload Identity Federation (keyless)# You should see:## ğŸ“ Project Structure```



---# - url-shortener-api (Node.js app)



## â˜ï¸ DevOps & Deployment# - url-shortener-mongo (MongoDB)



### CI/CD Pipeline



This project uses **GitHub Actions** for automated deployment to Google Cloud Platform.# Test the health endpoint```Restart your computer, then verify:



#### Pipeline Stagescurl http://localhost:8001/health



1. **Build & Test** (on every push and PR)â”œâ”€â”€ src/```powershell

   - Install dependencies

   - Run tests# Expected response:

   - Build Docker image

   - Validate code quality# {"status":"OK","message":"Server is running"}â”‚   â”œâ”€â”€ models/         # MongoDB schemaswsl --list --verbose



2. **Deploy** (on push to main - including merged PRs)```

   - Authenticate to GCP (keyless via Workload Identity)

   - Push image to Google Artifact Registryâ”‚   â”œâ”€â”€ controllers/    # Business logic```

   - Deploy to Google Compute Engine

   - Start MongoDB and application containers---

   - Health check verification

â”‚   â””â”€â”€ routes/         # API routes

#### Workflow Triggers

## ğŸ’¡ Usage

- âœ… **Push to main** - Full build, test, and deploy

- âœ… **Pull Requests** - Build and test only (no deployment)â”œâ”€â”€ views/              # Frontend templatesYou should see `VERSION 2` for Ubuntu.

- âœ… **Manual** - Via workflow_dispatch

### Web Interface

### Google Cloud Platform Architecture

â”œâ”€â”€ index.js            # Server entry point

```

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”1. **Open the App**

â”‚              GitHub Repository                  â”‚

â”‚         (devops-url-shortener)                  â”‚   - Navigate to `http://localhost:8001`â”œâ”€â”€ Dockerfile          # Container definitionğŸ“– **Detailed Instructions**: See [SETUP-WSL2.md](./SETUP-WSL2.md) for complete WSL 2 setup.

â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

               â”‚

               â”‚ Push to main

               â–¼2. **Shorten a URL**â””â”€â”€ docker-compose.yml  # Multi-container setup

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”

â”‚           GitHub Actions                        â”‚   - Enter any long URL (e.g., `https://github.com/username/very-long-repository-name`)

â”‚  (Workload Identity Federation - Keyless Auth)  â”‚

â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   - Click "âœ¨ Shorten Now!"```#### **Step 2: Install Docker Desktop**

               â”‚

               â”‚ Build & Push   - Copy your new short URL

               â–¼

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”1. Download from: https://www.docker.com/products/docker-desktop/

â”‚      Google Artifact Registry                   â”‚

â”‚    (us-central1-docker.pkg.dev)                 â”‚3. **Use the Short URL**

â”‚         Docker Image Storage                    â”‚

â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   - Share the short URL anywhere## ğŸ› ï¸ Technology Stack2. Install with **WSL 2 backend enabled**

               â”‚

               â”‚ Pull & Deploy   - Anyone clicking it will be redirected to the original URL

               â–¼

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”3. In Docker Desktop Settings:

â”‚      Google Compute Engine (GCE)                â”‚

â”‚           VM: url-shortener-vm                  â”‚4. **View Analytics**

â”‚         Region: us-central1-a                   â”‚

â”‚          IP: 34.72.126.110                      â”‚   - Access `/url/analytics/{shortId}` to see click statistics- **Backend**: Node.js + Express   - âœ… Enable "Use the WSL 2 based engine"

â”‚                                                 â”‚

â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚

â”‚  â”‚  MongoDB       â”‚  â”‚  Node.js API    â”‚      â”‚

â”‚  â”‚  Container     â”‚  â”‚  Container      â”‚      â”‚### Command Line Usage- **Database**: MongoDB   - âœ… Enable WSL Integration with Ubuntu

â”‚  â”‚  Port: 27017   â”‚  â”‚  Port: 8001     â”‚      â”‚

â”‚  â”‚  Volume: Data  â”‚  â”‚  (Public)       â”‚      â”‚

â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚

â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜```bash- **Frontend**: EJS + CSS3 (Animated gradients)

               â”‚

               â–¼# Create a short URL

         Public Access

    http://34.72.126.110:8001curl -X POST http://localhost:8001/url \- **Security**: Helmet.js + Rate limiting#### **Step 3: Install VS Code + WSL Extension**

```

  -H "Content-Type: application/json" \

### Deployment Configuration

  -d '{"url": "https://github.com/theshikharpurwar"}'- **Containerization**: Docker + Docker Compose1. Install VS Code: https://code.visualstudio.com/

**GCP Resources:**

- **Project**: banded-oven-471507-q9

- **Service Account**: github-actions-sa@banded-oven-471507-q9.iam.gserviceaccount.com

- **Workload Identity Pool**: github-pool# Response:2. Install the **WSL** extension (by Microsoft)

- **VM Instance**: url-shortener-vm (us-central1-a)

- **Artifact Registry**: url-shortener (us-central1)# {



**GitHub Secrets Required:**#   "success": true,## ğŸ”’ Security Features3. Open VS Code and connect to WSL:

- `GCP_PROJECT_ID`

- `GCP_PROJECT_NUMBER`#   "id": "abc123",

- `GCP_SERVICE_ACCOUNT_EMAIL`

- `GCP_WORKLOAD_IDENTITY_PROVIDER`#   "shortUrl": "http://localhost:8001/abc123",   - Press `F1` â†’ Type `WSL: Connect to WSL`

- `GCP_REGION`

- `GCP_ARTIFACT_REPO`#   "originalUrl": "https://github.com/theshikharpurwar"

- `GCE_INSTANCE_NAME`

- `GCE_ZONE`# }- âœ… Helmet.js security headers

- `GCE_SSH_PRIVATE_KEY`

- `GCE_SSH_USERNAME`



---# Use the short URL (will redirect)- âœ… Rate limiting (10 URLs per 15 minutes per IP)### 2ï¸âƒ£ Required Software (Inside WSL 2)



## ğŸ“ Project Structurecurl -L http://localhost:8001/abc123



```- âœ… Input validation

devops-url-shortener/

â”‚# Get analytics

â”œâ”€â”€ .github/

â”‚   â””â”€â”€ workflows/curl http://localhost:8001/url/analytics/abc123- âœ… URL sanitizationOpen your WSL 2 terminal (Ubuntu) in VS Code and verify:

â”‚       â””â”€â”€ deploy.yml          # GitHub Actions CI/CD pipeline

â”‚```

â”œâ”€â”€ k8s/                         # Kubernetes manifests (optional)

â”‚   â”œâ”€â”€ deployment.yml

â”‚   â””â”€â”€ service.yml

â”‚---

â”œâ”€â”€ src/                         # Application source code

â”‚   â”œâ”€â”€ controllers/## ğŸ“Š Analytics```bash

â”‚   â”‚   â””â”€â”€ urlController.js    # Business logic

â”‚   â”œâ”€â”€ models/## ğŸ“¡ API Documentation

â”‚   â”‚   â””â”€â”€ url.js              # Mongoose schema

â”‚   â”œâ”€â”€ routes/# Check Docker

â”‚   â”‚   â””â”€â”€ url.js              # API routes

â”‚   â””â”€â”€ connect.js              # MongoDB connection### Base URL

â”‚

â”œâ”€â”€ views/```Track your shortened URLs with:docker --version

â”‚   â””â”€â”€ index.ejs               # Frontend template (modern UI)

â”‚Local:  http://localhost:8001

â”œâ”€â”€ index.js                     # Express server entry point

â”œâ”€â”€ package.json                 # Node.js dependenciesCloud:  http://34.72.126.110:8001- Total click countdocker-compose --version

â”œâ”€â”€ package-lock.json

â”‚```

â”œâ”€â”€ Dockerfile                   # Multi-stage Docker build

â”œâ”€â”€ docker-compose.yml           # Local development setup- Visit history with timestamps

â”œâ”€â”€ .dockerignore

â”‚### Endpoints

â”œâ”€â”€ .gitignore

â”œâ”€â”€ README.md                    # This file- User agent information# Check Git

â”œâ”€â”€ IMPROVEMENTS.md              # Future enhancements

â””â”€â”€ TRANSFORMATION-COMPLETE.md   # Project evolution summary#### 1. Create Short URL

```

- IP addressesgit --version

---

**POST** `/url`

## âš™ï¸ Configuration

```

### Environment Variables

Creates a new short URL from a long URL.

Create a `.env` file (optional):

## ğŸ›‘ Stopping the App

```env

# Server Configuration**Request Headers:**

PORT=8001

NODE_ENV=production```If anything is missing, refer to [SETUP-WSL2.md](./SETUP-WSL2.md).



# MongoDB ConfigurationContent-Type: application/json

MONGO_URL=mongodb://mongo:27017/url-shortener

``````bash

# Security (optional)

RATE_LIMIT_WINDOW_MS=900000    # 15 minutes

RATE_LIMIT_MAX_REQUESTS=10      # 10 requests per window

```**Request Body:**docker-compose down---



### Docker Compose Configuration```json



```yaml{```

version: '3.8'

services:  "url": "https://example.com/very/long/url/here"

  mongo:

    image: mongo:7.0}## ğŸ Quick Start

    ports:

      - "27017:27017"```

    volumes:

      - mongodb_data:/data/db## ğŸ› Troubleshooting



  api:**Response:** `201 Created`

    build: .

    ports:```json### Step 1: Navigate to Project Directory

      - "8001:8001"

    environment:{

      - MONGO_URL=mongodb://mongo:27017/url-shortener

      - PORT=8001  "success": true,**Port already in use?**

```

  "id": "XyZ123",

---

  "shortUrl": "http://localhost:8001/XyZ123",```bash**Important**: In WSL 2, your Windows drives are mounted under `/mnt/`:

## ğŸ”’ Security

  "originalUrl": "https://example.com/very/long/url/here"

### Implemented Security Measures

}# Change the port in docker-compose.yml

#### Security Headers (Helmet.js)

``````

âœ… Strict-Transport-Security

âœ… X-Content-Type-Options: nosniffports:```bash

âœ… X-Frame-Options: SAMEORIGIN

âœ… X-XSS-Protection**Error Response:** `400 Bad Request`

âœ… Referrer-Policy: no-referrer

âœ… Cross-Origin-Opener-Policy```json  - "8002:8001"  # Change 8001 to 8002# Navigate to your project

âœ… Cross-Origin-Resource-Policy

```{



#### Rate Limiting  "success": false,```cd /mnt/d/devops-url-shortener

- **Limit**: 10 URL creations per 15 minutes per IP

- **Purpose**: Prevent abuse and DDoS attacks  "error": "URL is required"

- **Scope**: Applied to POST /url endpoint

}

#### Input Validation

- URL format validation```

- Automatic protocol addition (http/https)

- Malicious input sanitization**MongoDB connection issues?**# Verify you're in the right place



---**Rate Limit:** 10 requests per 15 minutes per IP



## ğŸ› Troubleshooting```bashpwd



### Port Already in Use---

```bash

# Find process using port 8001docker-compose down -vls -la

netstat -ano | findstr :8001  # Windows

lsof -i :8001                  # Linux/Mac#### 2. Redirect to Original URL



# Change port in docker-compose.ymldocker-compose up -d```

ports:

  - "8002:8001"**GET** `/:shortId`

```

```

### MongoDB Connection Failed

```bashRedirects to the original URL and tracks analytics.

# Check MongoDB is running

docker ps | grep mongoYou should see files like `package.json`, `Dockerfile`, `docker-compose.yml`, etc.



# Restart MongoDB**Parameters:**

docker-compose restart mongo

- `shortId` (required) - The shortened URL identifier## ğŸ“ Environment Variables

# Fresh start (removes all data)

docker-compose down -v

docker-compose up -d

```**Response:** `302 Found`### Step 2: Build and Run with Docker Compose



### Cannot Access Application- Redirects to the original URL

```bash

# Check if containers are running- Increments click counterCreate a `.env` file (optional):

docker ps

- Logs visit history

# Check API logs

docker logs url-shortener-api```envRun the following command in your WSL 2 terminal:



# Health check**Error Response:** `404 Not Found`

curl http://localhost:8001/health

```jsonPORT=8001

# Rebuild from scratch

docker-compose down -v{

docker-compose build --no-cache

docker-compose up -d  "success": false,MONGO_URL=mongodb://mongo:27017/url-shortener```bash

```

  "error": "Short URL not found"

---

}NODE_ENV=productiondocker-compose up --build

## ğŸ“Š Monitoring & Logs

```

### View Logs

``````

```bash

# All services---

docker-compose logs -f



# Specific service

docker-compose logs -f api#### 3. Get Analytics

docker-compose logs -f mongo

## ğŸ¤ Contributing**What happens:**

# Last 100 lines

docker-compose logs --tail=100 api**GET** `/url/analytics/:shortId`

```

- Docker builds the Node.js application image

### Health Monitoring

Retrieves analytics data for a shortened URL.

```bash

# Application healthContributions are welcome! Feel free to:- Downloads MongoDB image (if not already cached)

curl http://localhost:8001/health

**Parameters:**

# Container health

docker ps- `shortId` (required) - The shortened URL identifier- Report bugs- Starts both `api` and `mongo` services



# Resource usage

docker stats

```**Response:** `200 OK`- Suggest features- Creates a network for inter-service communication



---```json



## ğŸ¤ Contributing{- Submit pull requests- Sets up persistent volumes for MongoDB data



Contributions are welcome! Here's how:  "success": true,



1. Fork the repository  "shortId": "XyZ123",

2. Create a feature branch (`git checkout -b feature/amazing-feature`)

3. Commit your changes (`git commit -m 'Add amazing feature'`)  "originalUrl": "https://example.com/very/long/url/here",

4. Push to the branch (`git push origin feature/amazing-feature`)

5. Open a Pull Request  "totalClicks": 42,## ğŸ“„ License**Expected Output:**



### Pull Request Guidelines  "visitHistory": [



- âœ… PRs trigger automatic build and test checks    {```

- âœ… All tests must pass before merge

- âœ… Deployment happens automatically after merge to main      "timestamp": "2025-10-26T12:30:00.000Z",

- âœ… Follow existing code style and conventions

      "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64)...",MIT License - feel free to use this project for learning and development!url-shortener-mongo    | waiting for connections on port 27017

---

      "ipAddress": "192.168.1.1",

## ğŸ“ Future Enhancements

      "_id": "6713a..."url-shortener-api      | âœ… MongoDB Connected Successfully

See [IMPROVEMENTS.md](./IMPROVEMENTS.md) for detailed proposals:

    }

- ğŸ¨ Custom short URL IDs

- â° URL expiration (TTL)  ],## ğŸ™ Acknowledgmentsurl-shortener-api      | ğŸš€ Server started on port 8001

- ğŸ“± QR code generation

- ğŸ” Password-protected URLs  "createdAt": "2025-10-25T10:00:00.000Z",

- ğŸ“Š Advanced analytics dashboard

- ğŸŒ Geographic location tracking  "updatedAt": "2025-10-26T12:30:00.000Z"```

- ğŸ”‘ API key authentication

- ğŸ“¦ Bulk URL creation}

- ğŸ’¾ Redis caching

- ğŸ§ª Comprehensive testing```Built as a DevOps learning project with modern best practices.



---



## ğŸ“„ License**Error Response:** `404 Not Found`### Step 3: Access the Application



This project is licensed under the MIT License.```json



```{---

MIT License

  "success": false,

Copyright (c) 2025 Shikhar Purwar

  "error": "Short URL not found"Open your browser and go to:

Permission is hereby granted, free of charge, to any person obtaining a copy

of this software and associated documentation files (the "Software"), to deal}

in the Software without restriction, including without limitation the rights

to use, copy, modify, merge, publish, distribute, sublicense, and/or sell```Made with â¤ï¸ by [Shikhar Purwar](https://github.com/theshikharpurwar) | 2025

copies of the Software, and to permit persons to whom the Software is

furnished to do so, subject to the following conditions:



The above copyright notice and this permission notice shall be included in all---```

copies or substantial portions of the Software.

```http://localhost:8001



---#### 4. Health Check```



## ğŸ™ Acknowledgments



- **Node.js Community** - Amazing runtime**GET** `/health`You should see a beautiful URL shortener interface! ğŸ‰

- **MongoDB** - Flexible database

- **Google Cloud Platform** - Reliable cloud infrastructure

- **GitHub Actions** - Seamless CI/CD

- **Open Source Community** - Inspiration and toolsChecks if the server is running and responsive.---



---



## ğŸ“ Contact & Support**Response:** `200 OK`## ğŸ“ Project Structure



- **Author**: Shikhar Purwar```json

- **GitHub**: [@theshikharpurwar](https://github.com/theshikharpurwar)

- **Repository**: [devops-url-shortener](https://github.com/theshikharpurwar/devops-url-shortener){```

- **Issues**: [Report a bug or request a feature](https://github.com/theshikharpurwar/devops-url-shortener/issues)

  "status": "OK",devops-url-shortener/

---

  "message": "Server is running",â”‚

## â­ Show Your Support

  "timestamp": "2025-10-26T12:30:00.000Z"â”œâ”€â”€ src/

If you found this project helpful, please give it a â­ï¸ on GitHub!

}â”‚   â”œâ”€â”€ models/

---

```â”‚   â”‚   â””â”€â”€ url.js                    # Mongoose URL schema

<div align="center">

â”‚   â”œâ”€â”€ routes/

**Built with â¤ï¸ using modern DevOps practices**

---â”‚   â”‚   â””â”€â”€ url.js                    # Express routes

**Deployed on Google Cloud Platform**

â”‚   â”œâ”€â”€ controllers/

**October 2025**

## ğŸ› ï¸ Technology Stackâ”‚   â”‚   â””â”€â”€ urlController.js          # Business logic

[â¬† Back to Top](#-shorty---url-shortener)

â”‚   â””â”€â”€ connect.js                    # MongoDB connection

</div>

### Backendâ”‚

- **Runtime**: Node.js 18 (LTS)â”œâ”€â”€ views/

- **Framework**: Express.js 4.18â”‚   â””â”€â”€ index.ejs                     # Frontend UI

- **Database**: MongoDB 7.0â”‚

- **ODM**: Mongoose 8.0â”œâ”€â”€ index.js                          # Express server entry point

- **ID Generation**: shortid 2.2â”œâ”€â”€ package.json                      # Dependencies

â”œâ”€â”€ Dockerfile                        # Container image definition

### Securityâ”œâ”€â”€ docker-compose.yml                # Multi-container orchestration

- **Helmet.js** - Security headersâ”œâ”€â”€ .dockerignore                     # Docker build exclusions

- **express-rate-limit** - Rate limiting middlewareâ”œâ”€â”€ .gitignore                        # Git exclusions

- **Input Validation** - URL format validationâ”‚

â””â”€â”€ Documentation/

### Frontend    â”œâ”€â”€ README.md                     # This file

- **Template Engine**: EJS 3.1    â”œâ”€â”€ SETUP-WSL2.md                 # WSL 2 setup guide

- **CSS**: Custom CSS3 with animations    â””â”€â”€ PROJECT-STRUCTURE.md          # Detailed structure docs

- **Fonts**: Google Fonts (Poppins)```

- **JavaScript**: Vanilla ES6+

---

### DevOps

- **Containerization**: Docker with multi-stage builds## ğŸ“¡ API Documentation

- **Orchestration**: Docker Compose

- **CI/CD**: GitHub Actions### 1. Create Short URL

- **Cloud**: Google Cloud Platform (GCE)

- **Image Registry**: Google Artifact Registry**Endpoint**: `POST /url`



---**Request Body**:

```json

## ğŸ“ Project Structure{

  "url": "https://www.example.com/very/long/url/here"

```}

devops-url-shortener/```

â”‚

â”œâ”€â”€ .github/**Response**:

â”‚   â””â”€â”€ workflows/```json

â”‚       â””â”€â”€ deploy.yml          # GCP deployment pipeline{

â”‚  "success": true,

â”œâ”€â”€ k8s/                         # Kubernetes manifests  "id": "XyZ123",

â”‚   â”œâ”€â”€ deployment.yml          # K8s deployment config  "shortUrl": "http://localhost:8001/XyZ123",

â”‚   â””â”€â”€ service.yml             # K8s service config  "originalUrl": "https://www.example.com/very/long/url/here"

â”‚}

â”œâ”€â”€ src/                         # Application source code```

â”‚   â”œâ”€â”€ controllers/

â”‚   â”‚   â””â”€â”€ urlController.js    # Business logic**cURL Example**:

â”‚   â”œâ”€â”€ models/```bash

â”‚   â”‚   â””â”€â”€ url.js              # Mongoose schemacurl -X POST http://localhost:8001/url \

â”‚   â”œâ”€â”€ routes/  -H "Content-Type: application/json" \

â”‚   â”‚   â””â”€â”€ url.js              # API routes  -d '{"url": "https://github.com/yourusername/repo"}'

â”‚   â””â”€â”€ connect.js              # MongoDB connection```

â”‚

â”œâ”€â”€ views/### 2. Redirect to Original URL

â”‚   â””â”€â”€ index.ejs               # Frontend template

â”‚**Endpoint**: `GET /:shortId`

â”œâ”€â”€ index.js                     # Express server entry point

â”œâ”€â”€ package.json                 # Node.js dependencies**Example**: `http://localhost:8001/XyZ123`

â”œâ”€â”€ package-lock.json            # Locked dependency versions

â”‚This will redirect you to the original URL.

â”œâ”€â”€ Dockerfile                   # Container image definition

â”œâ”€â”€ docker-compose.yml           # Local development setup### 3. Get Analytics

â”œâ”€â”€ .dockerignore               # Docker build exclusions

â”‚**Endpoint**: `GET /url/analytics/:shortId`

â”œâ”€â”€ .gitignore                  # Git exclusions

â”œâ”€â”€ README.md                   # This file**Example**: `http://localhost:8001/url/analytics/XyZ123`

â””â”€â”€ IMPROVEMENTS.md             # Enhancement proposals

```**Response**:

```json

---{

  "success": true,

## âš™ï¸ Configuration  "shortId": "XyZ123",

  "originalUrl": "https://github.com/yourusername/repo",

### Environment Variables  "totalClicks": 5,

  "visitHistory": [

Create a `.env` file in the project root (optional):    {

      "timestamp": "2025-10-25T10:30:00.000Z",

```env      "userAgent": "Mozilla/5.0...",

# Server Configuration      "ipAddress": "::1"

PORT=8001    }

NODE_ENV=production  ],

  "createdAt": "2025-10-25T10:00:00.000Z",

# MongoDB Configuration  "updatedAt": "2025-10-25T10:30:00.000Z"

MONGO_URL=mongodb://mongo:27017/url-shortener}

```

# Security (optional)

RATE_LIMIT_WINDOW_MS=900000    # 15 minutes### 4. Health Check

RATE_LIMIT_MAX_REQUESTS=10      # 10 requests per window

```**Endpoint**: `GET /health`



### Docker Compose Configuration**Response**:

```json

Modify `docker-compose.yml` to customize:{

  "status": "OK",

```yaml  "message": "Server is running",

version: '3.8'  "timestamp": "2025-10-25T10:30:00.000Z"

services:}

  mongo:```

    image: mongo:7.0

    ports:---

      - "27017:27017"  # Change MongoDB port if needed

    volumes:## ğŸ§ª Testing the Application

      - mongodb_data:/data/db

### Test 1: Using the Web Interface

  api:

    build: .1. Open http://localhost:8001

    ports:2. Enter a long URL (e.g., `https://github.com/yourusername/long-repo-name`)

      - "8001:8001"    # Change application port3. Click "Shorten URL"

    environment:4. Copy the shortened URL

      - MONGO_URL=mongodb://mongo:27017/url-shortener5. Open it in a new tab - you should be redirected!

      - PORT=8001

```### Test 2: Using cURL (Recommended for DevOps)



---```bash

# Test 1: Create a short URL

## ğŸš€ Deploymentcurl -X POST http://localhost:8001/url \

  -H "Content-Type: application/json" \

### Local Deployment (Docker Compose)  -d '{"url": "https://www.google.com"}'



```bash# Expected output: {"success":true,"id":"abc123",...}

# Build and start

docker-compose up -d --build# Test 2: Get analytics (replace abc123 with your ID)

curl http://localhost:8001/url/analytics/abc123

# View logs

docker-compose logs -f# Test 3: Health check

curl http://localhost:8001/health

# Stop```

docker-compose down

### Test 3: Using PowerShell (Windows)

# Stop and remove volumes (fresh start)

docker-compose down -v```powershell

```# Create a short URL

Invoke-RestMethod -Uri "http://localhost:8001/url" `

### Cloud Deployment (GCP)  -Method Post `

  -ContentType "application/json" `

This project includes automated deployment to Google Cloud Platform:  -Body '{"url": "https://www.google.com"}'

```

1. **GitHub Actions** - Automated CI/CD pipeline

2. **Google Artifact Registry** - Docker image storage---

3. **Google Compute Engine** - Production hosting

4. **Workload Identity Federation** - Secure, keyless authentication## ğŸ› Troubleshooting



**Deployment Trigger:**### Issue 1: "docker: command not found"

- Push to `main` or `gcp-actions-cicd` branch

- GitHub Actions automatically builds and deploys**Solution**: 

- Ensure Docker Desktop is running

**Live URL:** http://34.72.126.110:8001- Verify WSL Integration is enabled in Docker Desktop Settings

- Restart WSL: `wsl --shutdown` (in PowerShell), then reopen

### Manual Docker Deployment

### Issue 2: "Cannot connect to MongoDB"

```bash

# Build the image**Solution**:

docker build -t shorty:latest .```bash

# Check if MongoDB container is running

# Run the containerdocker ps

docker run -d \

  -p 8001:8001 \# Check MongoDB logs

  -e MONGO_URL=mongodb://your-mongo-host:27017/url-shortener \docker logs url-shortener-mongo

  --name shorty-app \

  shorty:latest# Restart the entire stack

docker-compose down

# Check logsdocker-compose up --build

docker logs -f shorty-app```

```

### Issue 3: Port 8001 already in use

---

**Solution**:

## ğŸ”’ Security```bash

# Find what's using the port

### Implemented Security Measuresnetstat -ano | findstr :8001



#### 1. **Security Headers (Helmet.js)**# Kill the process (PowerShell as Admin)

```Stop-Process -Id <PID> -Force

âœ… Strict-Transport-Security

âœ… X-Content-Type-Options: nosniff# Or change the port in docker-compose.yml

âœ… X-Frame-Options: SAMEORIGIN# Change "8001:8001" to "8002:8001"

âœ… X-XSS-Protection```

âœ… Referrer-Policy: no-referrer

âœ… Cross-Origin-Opener-Policy### Issue 4: Slow file performance in WSL

âœ… Cross-Origin-Resource-Policy

```**Solution**: Always work in the Linux filesystem, not `/mnt/`:



#### 2. **Rate Limiting**```bash

- **Limit**: 10 URL creations per 15 minutes per IP# Copy project to Linux filesystem

- **Purpose**: Prevent abuse and DDoS attackscp -r /mnt/d/devops-url-shortener ~/projects/devops-url-shortener

- **Scope**: Applied to POST /url endpointcd ~/projects/devops-url-shortener

```

#### 3. **Input Validation**

- URL format validation### Issue 5: Changes not reflecting after rebuild

- Automatic protocol addition (http/https)

- Malicious input sanitization**Solution**:

```bash

#### 4. **MongoDB Security**# Stop all containers

- Mongoose ODM with schema validationdocker-compose down

- No exposed MongoDB ports in production

- Data validation at model level# Remove volumes and rebuild

docker-compose down -v

### Security Best Practicesdocker-compose up --build

```

```javascript

// Example: Using the API securely---

const response = await fetch('/url', {

  method: 'POST',## ğŸ›‘ Stopping the Application

  headers: {

    'Content-Type': 'application/json',```bash

  },# Stop containers (keeps data)

  body: JSON.stringify({ url: sanitizedUrl })docker-compose stop

});

```# Stop and remove containers (keeps volumes)

docker-compose down

---

# Stop, remove containers AND delete all data

## ğŸ› Troubleshootingdocker-compose down -v

```

### Common Issues

---

#### Port Already in Use

```bash## ğŸ“Š Viewing Logs

# Find process using port 8001

# Windows```bash

netstat -ano | findstr :8001# View all logs

docker-compose logs

# Linux/Mac

lsof -i :8001# Follow logs in real-time

docker-compose logs -f

# Change port in docker-compose.yml

ports:# View logs for specific service

  - "8002:8001"  # Use port 8002 insteaddocker-compose logs -f api

```docker-compose logs -f mongo

```

#### MongoDB Connection Failed

```bash---

# Check MongoDB is running

docker ps | grep mongo## ğŸ” Useful Docker Commands



# Restart MongoDB```bash

docker-compose restart mongo# List running containers

docker ps

# Check MongoDB logs

docker logs url-shortener-mongo# List all containers (including stopped)

docker ps -a

# Fresh start (removes all data)

docker-compose down -v# View container resource usage

docker-compose up -ddocker stats

```

# Execute command in running container

#### Cannot Access Applicationdocker exec -it url-shortener-api sh

```bash

# Check if containers are running# Access MongoDB shell

docker psdocker exec -it url-shortener-mongo mongosh



# Check API logs# Remove unused images and containers

docker logs url-shortener-apidocker system prune -a

```

# Check health endpoint

curl http://localhost:8001/health---



# Rebuild from scratch## ğŸ“š Next Phases

docker-compose down -v

docker-compose build --no-cache### âœ… Phase 2: Infrastructure as Code (COMPLETE)

docker-compose up -d- âœ… Provision AWS VPC, EKS Cluster

```- âœ… Set up DocumentDB (managed MongoDB)

- âœ… Create ECR repository for Docker images

#### Rate Limit Exceeded- âœ… Configure S3 for Terraform state

```bash

# Wait 15 minutes, or**Guide**: [terraform/README.md](terraform/README.md)

# Restart the API container to reset

docker-compose restart api### âœ… Phase 3: Configuration Management (COMPLETE)

```- âœ… Automate Jenkins EC2 server setup

- âœ… Install required tools (Docker, kubectl, etc.)

---- âœ… Configure Jenkins plugins



## ğŸ“Š Monitoring & Logs**Guide**: [ansible/README.md](ansible/README.md)



### View Logs### âœ… Phase 4: CI/CD Pipeline (COMPLETE) 

- âœ… Create Kubernetes manifests (deployments, services)

```bash- âœ… Write Jenkinsfile for automated pipeline

# All services- âœ… Set up Git webhooks for auto-deployment

docker-compose logs- âœ… Deploy to AWS EKS



# Follow logs in real-time**Guides**: 

docker-compose logs -f- [JENKINS-SETUP.md](JENKINS-SETUP.md) - Configure Jenkins

- [DEPLOYMENT-GUIDE.md](DEPLOYMENT-GUIDE.md) - Deploy application

# Specific service- [PHASE4-COMPLETE.md](PHASE4-COMPLETE.md) - Summary & next steps

docker-compose logs -f api

docker-compose logs -f mongo---



# Last 100 lines## ğŸ‘¥ Team

docker-compose logs --tail=100 api

```- **Team Size**: 3 members

- **Your Role**: DevOps Engineer / Full-Stack Developer

### Health Monitoring- **Instructor**: Senior DevOps Lead



```bash---

# Check application health

curl http://localhost:8001/health## ğŸ“ Learning Objectives



# Check container healthBy completing this project, you will learn:

docker ps

âœ… **Containerization**: Docker, multi-stage builds, optimization  

# View resource usageâœ… **Orchestration**: Docker Compose, Kubernetes  

docker statsâœ… **Cloud**: AWS services (EC2, EKS, ECR, DocumentDB, S3)  

```âœ… **IaC**: Terraform for infrastructure provisioning  

âœ… **Config Management**: Ansible for server configuration  

---âœ… **CI/CD**: Jenkins pipeline, automated deployments  

âœ… **Version Control**: Git workflows, branching strategies  

## ğŸ¤ Contributingâœ… **DevOps Best Practices**: 12-factor apps, health checks, logging  



Contributions are welcome! Here's how you can help:---



### Reporting Bugs## ğŸ“ Need Help?



1. Check if the bug already exists in [Issues](https://github.com/theshikharpurwar/devops-url-shortener/issues)1. **WSL Issues**: See [SETUP-WSL2.md](./SETUP-WSL2.md)

2. Create a new issue with:2. **File Structure Questions**: See [PROJECT-STRUCTURE.md](./PROJECT-STRUCTURE.md)

   - Clear title3. **Docker Issues**: Check the Troubleshooting section above

   - Steps to reproduce

   - Expected vs actual behavior---

   - Screenshots (if applicable)

## ğŸ“ Educational Use

### Suggesting Features

This project is designed for educational purposes as part of a university DevOps course. Feel free to modify and extend it for your learning!

1. Open a new issue with the `enhancement` label

2. Describe the feature and its benefits---

3. Include mockups or examples if possible

## ğŸ“„ License

### Pull Requests

MIT License - See LICENSE file for details

1. Fork the repository

2. Create a feature branch (`git checkout -b feature/amazing-feature`)---

3. Commit your changes (`git commit -m 'Add amazing feature'`)

4. Push to the branch (`git push origin feature/amazing-feature`)## âœ… Phase 1 Checklist

5. Open a Pull Request

- [x] WSL 2 is installed and working

### Code Style- [x] Docker Desktop is running with WSL 2 backend

- [x] VS Code is connected to WSL

- Use ES6+ JavaScript- [x] `docker-compose up --build` runs without errors

- Follow existing code formatting- [x] Application is accessible at http://localhost:8001

- Add comments for complex logic- [x] You can create and use shortened URLs

- Update README if needed- [x] You understand the codebase structure

- [x] All API endpoints are tested and working

---

**Phase 1 Complete! âœ…**

## ğŸ“ Future Enhancements

---

See [IMPROVEMENTS.md](./IMPROVEMENTS.md) for detailed enhancement proposals:

## âœ… Phase 2 Checklist

- ğŸ¨ Custom short URL IDs

- â° URL expiration (TTL)**Infrastructure as Code with Terraform**

- ğŸ“± QR code generation

- ğŸ” Password-protected URLsBefore moving to Phase 3, ensure:

- ğŸ“Š Advanced analytics dashboard

- ğŸŒ Geographic location tracking- [ ] Terraform and AWS CLI installed

- ğŸ”‘ API key authentication- [ ] AWS credentials configured (`aws configure`)

- ğŸ“¦ Bulk URL creation- [ ] SSH key pair generated (`~/.ssh/id_rsa`)

- ğŸ’¾ Redis caching- [ ] S3 backend created (run `setup-backend.sh`)

- ğŸ§ª Comprehensive testing- [ ] `terraform.tfvars` created with YOUR IP address

- [ ] `terraform apply` completed successfully

---- [ ] All ~40-50 resources created in AWS

- [ ] EKS cluster accessible (`kubectl get nodes`)

## ğŸ“„ License- [ ] Jenkins UI accessible at http://JENKINS_IP:8080

- [ ] ECR repository created

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.- [ ] DocumentDB cluster running

- [ ] All outputs saved for Phase 3

```

MIT License**Quick Start:** See [terraform/QUICKSTART.md](terraform/QUICKSTART.md)  

**Full Guide:** See [terraform/README.md](terraform/README.md)

Copyright (c) 2025 Shikhar Purwar

**Once all items are checked, you're ready for Phase 3! ğŸš€**

Permission is hereby granted, free of charge, to any person obtaining a copy

of this software and associated documentation files (the "Software"), to deal---

in the Software without restriction, including without limitation the rights

to use, copy, modify, merge, publish, distribute, sublicense, and/or sell## âœ… Phase 3 Checklist

copies of the Software, and to permit persons to whom the Software is

furnished to do so, subject to the following conditions:**Configuration Management with Ansible**



The above copyright notice and this permission notice shall be included in allBefore moving to Phase 4, ensure:

copies or substantial portions of the Software.

```- [ ] Jenkins server is accessible via SSH

- [ ] Ansible playbook executed successfully

---- [ ] Jenkins is running on port 8080

- [ ] Docker installed and jenkins user added to docker group

## ğŸ™ Acknowledgments- [ ] kubectl installed and configured

- [ ] AWS CLI v2 installed

- **Node.js Community** - For the awesome runtime- [ ] Initial Jenkins admin password retrieved

- **MongoDB** - For the flexible database- [ ] Jenkins setup wizard completed

- **Google Cloud Platform** - For reliable hosting

- **Open Source Community** - For inspiration and tools**Quick Start:** See [ansible/QUICKSTART.md](ansible/QUICKSTART.md)  

**Full Guide:** See [ansible/README.md](ansible/README.md)  

---**Windows Guide:** See [ansible/WINDOWS-GUIDE.md](ansible/WINDOWS-GUIDE.md)



## ğŸ“ Contact & Support**Once all items are checked, you're ready for Phase 4! ğŸš€**



- **Author**: Shikhar Purwar---

- **GitHub**: [@theshikharpurwar](https://github.com/theshikharpurwar)

- **Repository**: [devops-url-shortener](https://github.com/theshikharpurwar/devops-url-shortener)## âœ… Phase 4 Checklist

- **Issues**: [Report a bug or request a feature](https://github.com/theshikharpurwar/devops-url-shortener/issues)

**CI/CD Pipeline & Kubernetes Deployment**

---

Deployment checklist:

## â­ Show Your Support

- [ ] Jenkinsfile updated with Terraform outputs (ECR URL, EKS cluster, DB secret)

If you found this project helpful, please give it a â­ï¸ on GitHub!- [ ] Jenkins plugins installed (Docker Pipeline, Amazon ECR, Kubernetes CLI)

- [ ] AWS credentials configured in Jenkins

---- [ ] Pipeline job created (`url-shortener-pipeline`)

- [ ] GitHub webhook configured

<div align="center">- [ ] Code committed and pushed to GitHub

- [ ] Pipeline executed successfully (all 6 stages pass)

**Made with â¤ï¸ by [Shikhar Purwar](https://github.com/theshikharpurwar)**- [ ] Kubernetes deployment created (2 pods running)

- [ ] Load Balancer provisioned and accessible

**October 2025**- [ ] Application accessible via Load Balancer URL

- [ ] URL shortening working end-to-end

[â¬† Back to Top](#-shorty---url-shortener)- [ ] Health check endpoint responding



</div>**Setup Guide:** See [JENKINS-SETUP.md](JENKINS-SETUP.md)  

**Deployment Guide:** See [DEPLOYMENT-GUIDE.md](DEPLOYMENT-GUIDE.md)  
**Summary:** See [PHASE4-COMPLETE.md](PHASE4-COMPLETE.md)

**Once all items are checked, your DevOps pipeline is COMPLETE! ğŸ‰**

---

Made with â¤ï¸ for DevOps learning | October 2025
