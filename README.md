# ⚡ Shorty - URL Shortener# ⚡ Shorty - URL Shortener# ÔÜí Shorty - URL Shortener# ÔÜí Shorty - URL Shortener# ÔÜí Shorty - URL Shortener



<div align="center">



**Lightning-fast URL shortening with stunning modern UI**<div align="center">



[![Node.js](https://img.shields.io/badge/Node.js-18+-339933?style=flat&logo=node.js&logoColor=white)](https://nodejs.org/)

[![Docker](https://img.shields.io/badge/Docker-Ready-2496ED?style=flat&logo=docker&logoColor=white)](https://www.docker.com/)

[![MongoDB](https://img.shields.io/badge/MongoDB-7.0-47A248?style=flat&logo=mongodb&logoColor=white)](https://www.mongodb.com/)**Lightning-fast URL shortening with a stunning modern interface**<div align="center">

[![GCP](https://img.shields.io/badge/GCP-Deployed-4285F4?style=flat&logo=google-cloud&logoColor=white)](https://cloud.google.com/)

[![License](https://img.shields.io/badge/License-MIT-yellow.svg)](LICENSE)



![GitHub last commit](https://img.shields.io/github/last-commit/theshikharpurwar/devops-url-shortener)[![Node.js](https://img.shields.io/badge/Node.js-18+-339933?style=flat&logo=node.js&logoColor=white)](https://nodejs.org/)



[🌐 Live Demo](http://34.72.126.110:8001) • [🐛 Report Bug](https://github.com/theshikharpurwar/devops-url-shortener/issues) • [✨ Request Feature](https://github.com/theshikharpurwar/devops-url-shortener/issues)[![Docker](https://img.shields.io/badge/Docker-Ready-2496ED?style=flat&logo=docker&logoColor=white)](https://www.docker.com/)



</div>[![MongoDB](https://img.shields.io/badge/MongoDB-7.0-47A248?style=flat&logo=mongodb&logoColor=white)](https://www.mongodb.com/)**Lightning-fast URL shortening with a stunning modern interface**<div align="center"><div align="center">



---[![Google Cloud](https://img.shields.io/badge/GCP-Deployed-4285F4?style=flat&logo=google-cloud&logoColor=white)](https://cloud.google.com/)



## 📋 Table of Contents[![License](https://img.shields.io/badge/License-MIT-yellow.svg)](LICENSE)



- [About](#-about)

- [Features](#-features)

- [Quick Start](#-quick-start)![GitHub last commit](https://img.shields.io/github/last-commit/theshikharpurwar/devops-url-shortener)[![Node.js](https://img.shields.io/badge/Node.js-18+-339933?style=flat&logo=node.js&logoColor=white)](https://nodejs.org/)

- [Usage](#-usage)

- [API Documentation](#-api-documentation)![GitHub repo size](https://img.shields.io/github/repo-size/theshikharpurwar/devops-url-shortener)

- [Technology Stack](#-technology-stack)

- [GCP Deployment](#-gcp-deployment)[![Docker](https://img.shields.io/badge/Docker-Ready-2496ED?style=flat&logo=docker&logoColor=white)](https://www.docker.com/)

- [Project Structure](#-project-structure)

- [Security](#-security)[Live Demo](http://34.72.126.110:8001) • [Report Bug](https://github.com/theshikharpurwar/devops-url-shortener/issues) • [Request Feature](https://github.com/theshikharpurwar/devops-url-shortener/issues)

- [Troubleshooting](#-troubleshooting)

- [Contributing](#-contributing)[![MongoDB](https://img.shields.io/badge/MongoDB-7.0-47A248?style=flat&logo=mongodb&logoColor=white)](https://www.mongodb.com/)**Lightning-fast URL shortening with a stunning modern interface**![Shorty Logo](https://img.shields.io/badge/ÔÜí-Shorty-blueviolet?style=for-the-badge)

- [License](#-license)

</div>

---

[![Google Cloud](https://img.shields.io/badge/GCP-Deployed-4285F4?style=flat&logo=google-cloud&logoColor=white)](https://cloud.google.com/)

## 🎯 About

---

**Shorty** is a modern, production-ready URL shortener built with Node.js, Express, and MongoDB. It features a stunning animated interface, real-time analytics, enterprise-grade security, and automated deployment to Google Cloud Platform using GitHub Actions.

[![License](https://img.shields.io/badge/License-MIT-yellow.svg)](LICENSE)

### Why Shorty?

## 📖 Table of Contents

- 🎨 **Beautiful Design** - Animated gradients and glassmorphism effects

- ⚡ **Lightning Fast** - Optimized performance with Docker

- 📊 **Analytics Ready** - Track clicks, timestamps, and visitor data

- 🔒 **Secure** - Rate limiting, security headers, input validation- [About](#-about)

- ☁️ **Cloud Native** - Deployed on GCP with CI/CD automation

- 🚀 **Production Ready** - Battle-tested DevOps practices- [Features](#-features)![GitHub last commit](https://img.shields.io/github/last-commit/theshikharpurwar/devops-url-shortener)[![Node.js](https://img.shields.io/badge/Node.js-18+-339933?style=flat&logo=node.js&logoColor=white)](https://nodejs.org/)**Lightning-fast URL shortening with a stunning modern interface**



---- [Demo](#-demo)



## ✨ Features- [Quick Start](#-quick-start)![GitHub repo size](https://img.shields.io/github/repo-size/theshikharpurwar/devops-url-shortener)



### 🔥 Core Features- [Usage](#-usage)

- ⚡ **Instant URL Shortening** - Generate short links in milliseconds

- 🔄 **Smart Redirects** - Fast 302 redirects with analytics tracking- [API Documentation](#-api-documentation)[![Docker](https://img.shields.io/badge/Docker-Ready-2496ED?style=flat&logo=docker&logoColor=white)](https://www.docker.com/)

- 📊 **Real-time Analytics** - Track clicks, user agents, and IP addresses

- 🎨 **Modern UI** - Animated 4-color gradient background with floating shapes- [Technology Stack](#-technology-stack)

- 📱 **Fully Responsive** - Perfect on desktop, tablet, and mobile

- 🔗 **One-Click Copy** - Copy shortened URLs with visual feedback- [DevOps & Deployment](#-devops--deployment)[Live Demo](http://34.72.126.110:8001) ÔÇó [Report Bug](https://github.com/theshikharpurwar/devops-url-shortener/issues) ÔÇó [Request Feature](https://github.com/theshikharpurwar/devops-url-shortener/issues)



### 🛡️ Security Features- [Project Structure](#-project-structure)

- **Helmet.js** - 12+ security headers enabled

- **Rate Limiting** - 10 URLs per 15 minutes per IP- [Configuration](#-configuration)[![MongoDB](https://img.shields.io/badge/MongoDB-7.0-47A248?style=flat&logo=mongodb&logoColor=white)](https://www.mongodb.com/)[![Node.js](https://img.shields.io/badge/Node.js-18+-green.svg)](https://nodejs.org/)

- **Input Validation** - URL format validation and sanitization

- **CORS Protection** - Configurable cross-origin policies- [Security](#-security)

- **XSS Protection** - Content Security Policy headers

- [Troubleshooting](#-troubleshooting)</div>

### 🐳 DevOps Features

- **Docker** - Multi-stage builds with Alpine Linux- [Contributing](#-contributing)

- **Docker Compose** - One-command local development

- **GitHub Actions** - Automated CI/CD pipeline- [License](#-license)[![License](https://img.shields.io/badge/License-MIT-yellow.svg)](LICENSE)

- **GCP Deployment** - Running on Google Compute Engine

- **Health Checks** - Built-in monitoring endpoints

- **Logging** - Comprehensive request/response logs

------

---



## 🚀 Quick Start

## 🎯 About[![Docker](https://img.shields.io/badge/Docker-20+-blue.svg)](https://www.docker.com/)

### Prerequisites



- Docker (v20.0+)

- Docker Compose (v2.0+)**Shorty** is a modern, production-ready URL shortener built with the MERN stack and deployed on Google Cloud Platform. It features a stunning animated interface, comprehensive analytics, enterprise-grade security, and a complete CI/CD pipeline using GitHub Actions.## ­ƒôû Table of Contents

- Git



### Installation

### Why Shorty?![GitHub last commit](https://img.shields.io/github/last-commit/theshikharpurwar/devops-url-shortener)

```bash

# 1. Clone the repository

git clone https://github.com/theshikharpurwar/devops-url-shortener.git

cd devops-url-shortener- 🎨 **Beautiful Design** - Modern UI with animated gradients and smooth interactions- [About](#-about)



# 2. Start the application- ⚡ **Blazing Fast** - Optimized performance with Docker containerization

docker-compose up -d

- 📊 **Analytics Ready** - Track every click with detailed visit history- [Features](#-features)![GitHub repo size](https://img.shields.io/github/repo-size/theshikharpurwar/devops-url-shortener)[![Node.js](https://img.shields.io/badge/Node.js-18+-green.svg)](https://nodejs.org/)[![MongoDB](https://img.shields.io/badge/MongoDB-Latest-green.svg)](https://www.mongodb.com/)

# 3. Access the app

# Open http://localhost:8001 in your browser- 🔒 **Secure by Default** - Rate limiting, security headers, and input validation

```

- ☁️ **Cloud Native** - Deployed on Google Cloud Platform with automated CI/CD- [Demo](#-demo)

**That's it!** The app is now running! 🎉

- 🚀 **Production Ready** - Enterprise-grade DevOps practices

### Verify Installation

- [Quick Start](#-quick-start)

```bash

# Check containers---

docker ps

- [Usage](#-usage)

# Test health endpoint

curl http://localhost:8001/health## ✨ Features



# Expected: {"status":"OK","message":"Server is running"}- [API Documentation](#-api-documentation)[Live Demo](http://34.72.126.110:8001) ÔÇó [Report Bug](https://github.com/theshikharpurwar/devops-url-shortener/issues) ÔÇó [Request Feature](https://github.com/theshikharpurwar/devops-url-shortener/issues)[![Docker](https://img.shields.io/badge/Docker-Ready-blue.svg)](https://www.docker.com/)[![License](https://img.shields.io/badge/License-MIT-yellow.svg)](LICENSE)

```

### Core Features

---

- ⚡ **Instant URL Shortening** - Generate short links in milliseconds- [Technology Stack](#-technology-stack)

## 💡 Usage

- 🔄 **Smart Redirects** - Fast 302 redirects to original URLs

### Web Interface

- 📊 **Real-time Analytics** - Track clicks, timestamps, user agents, and IPs- [DevOps & Deployment](#-devops--deployment)

1. Open `http://localhost:8001`

2. Enter a long URL- 🎨 **Modern UI** - Animated gradient backgrounds with floating shapes

3. Click **"✨ Shorten Now!"**

4. Copy and share your short URL- 📱 **Fully Responsive** - Works perfectly on desktop, tablet, and mobile- [Project Structure](#-project-structure)

5. View analytics at `/url/analytics/{shortId}`

- 🔗 **One-Click Copy** - Copy shortened URLs with visual feedback

### Command Line

- [Configuration](#-configuration)</div>[![MongoDB](https://img.shields.io/badge/MongoDB-7.0-green.svg)](https://www.mongodb.com/)

```bash

# Create short URL### Security Features

curl -X POST http://localhost:8001/url \

  -H "Content-Type: application/json" \- 🛡️ **Helmet.js Integration** - 12+ security headers enabled- [Security](#-security)

  -d '{"url": "https://github.com/theshikharpurwar"}'

- ⏱️ **Rate Limiting** - 10 URLs per 15 minutes per IP

# Response:

# {- ✅ **Input Validation** - URL format validation and sanitization- [Troubleshooting](#-troubleshooting)

#   "success": true,

#   "id": "abc123",- 🔒 **CORS Protection** - Configurable cross-origin policies

#   "shortUrl": "http://localhost:8001/abc123",

#   "originalUrl": "https://github.com/theshikharpurwar"- 🚫 **XSS Protection** - Content Security Policy headers- [Contributing](#-contributing)

# }



# Get analytics

curl http://localhost:8001/url/analytics/abc123### DevOps Features- [License](#-license)---[![License](https://img.shields.io/badge/License-MIT-yellow.svg)](LICENSE)> **End-to-End DevOps Pipeline Project** - A complete URL shortener application with containerization, built for learning CI/CD, Kubernetes, AWS, and Infrastructure as Code.

```

- 🐳 **Docker Support** - Multi-stage builds with Alpine Linux

---

- 📦 **Docker Compose** - One-command local development

## 📡 API Documentation

- 🔄 **CI/CD Pipeline** - Automated deployment with GitHub Actions

### Base URLs

- **Local:** `http://localhost:8001`- ☁️ **Cloud Deployment** - Running on Google Compute Engine---

- **Production:** `http://34.72.126.110:8001`

- 🔍 **Health Checks** - Built-in monitoring and health endpoints

### Endpoints

- 📝 **Comprehensive Logging** - Detailed request/response logs

#### 1️⃣ Create Short URL



**POST** `/url`

---## ­ƒÄ» About## ­ƒôû Table of Contents

**Request:**

```json

{

  "url": "https://example.com/very/long/url"## 🎬 Demo

}

```



**Response:** `201 Created`### Live Application**Shorty** is a modern, production-ready URL shortener built with the MERN stack and deployed on Google Cloud Platform. It features a stunning animated interface, comprehensive analytics, enterprise-grade security, and a complete CI/CD pipeline using GitHub Actions.

```json

{🌐 **Live Demo**: [http://34.72.126.110:8001](http://34.72.126.110:8001)

  "success": true,

  "id": "XyZ123",

  "shortUrl": "http://localhost:8001/XyZ123",

  "originalUrl": "https://example.com/very/long/url"### Features Showcase

}

```### Why Shorty?- [About](#-about)## Ô£¿ Features---



**Rate Limit:** 10 requests per 15 minutes per IP**Modern Animated Interface**



---- Gradient background with 4-color animation



#### 2️⃣ Redirect to Original URL- Floating blur shapes effects



**GET** `/:shortId`- Glassmorphism design (frosted glass)- ­ƒÄ¿ **Beautiful Design** - Modern UI with animated gradients and smooth interactions- [Features](#-features)



Redirects to the original URL and tracks analytics.- Smooth button ripple effects



**Response:** `302 Found` (Redirects to original URL)- Responsive copy-to-clipboard- ÔÜí **Blazing Fast** - Optimized performance with Docker containerization



---



#### 3️⃣ Get Analytics---- ­ƒôè **Analytics Ready** - Track every click with detailed visit history- [Demo](#-demo)



**GET** `/url/analytics/:shortId`



**Response:** `200 OK`## 🚀 Quick Start- ­ƒöÆ **Secure by Default** - Rate limiting, security headers, and input validation

```json

{

  "success": true,

  "shortId": "XyZ123",### Prerequisites- Ôÿü´©Å **Cloud Native** - Deployed on Google Cloud Platform with automated CI/CD- [Quick Start](#-quick-start)

  "originalUrl": "https://example.com",

  "totalClicks": 42,

  "visitHistory": [

    {- **Docker** (v20.0+)- ­ƒÜÇ **Production Ready** - Enterprise-grade DevOps practices

      "timestamp": "2025-10-28T12:30:00.000Z",

      "userAgent": "Mozilla/5.0...",- **Docker Compose** (v2.0+)

      "ipAddress": "192.168.1.1"

    }- **Git**- [Usage](#-usage)- ­ƒÜÇ **Lightning Fast** - Instant URL shortening## ­ƒôï Table of Contents

  ],

  "createdAt": "2025-10-25T10:00:00.000Z",

  "updatedAt": "2025-10-28T12:30:00.000Z"

}### Local Installation---

```



---

```bash- [API Documentation](#-api-documentation)

#### 4️⃣ Health Check

# 1. Clone the repository

**GET** `/health`

git clone https://github.com/theshikharpurwar/devops-url-shortener.git## Ô£¿ Features

**Response:** `200 OK`

```jsoncd devops-url-shortener

{

  "status": "OK",- [Technology Stack](#-technology-stack)- ­ƒÄ¿ **Modern UI** - Beautiful, animated interface

  "message": "Server is running",

  "timestamp": "2025-10-28T12:30:00.000Z"# 2. Start the application

}

```docker-compose up -d### Core Features



---



## 🛠️ Technology Stack# 3. Access the application- ÔÜí **Instant URL Shortening** - Generate short links in milliseconds- [Project Structure](#-project-structure)



### Backend# Open http://localhost:8001 in your browser

- **Node.js** 18 (LTS)

- **Express.js** 4.18```- ­ƒöä **Smart Redirects** - Fast 302 redirects to original URLs

- **MongoDB** 7.0

- **Mongoose** 8.0

- **shortid** 2.2

That's it! The app is now running! 🎉- ­ƒôè **Real-time Analytics** - Track clicks, timestamps, user agents, and IPs- [Configuration](#-configuration)- ­ƒôè **Analytics** - Track clicks and visit history- [Project Overview](#-project-overview)

### Security

- **Helmet.js** - Security headers

- **express-rate-limit** - Rate limiting middleware

### Verify Installation- ­ƒÄ¿ **Modern UI** - Animated gradient backgrounds with floating shapes

### Frontend

- **EJS** 3.1 - Template engine

- **CSS3** - Animations and gradients

- **Google Fonts** - Poppins typography```bash- ­ƒô▒ **Fully Responsive** - Works perfectly on desktop, tablet, and mobile- [Deployment](#-deployment)

- **Vanilla JavaScript** - ES6+

# Check if containers are running

### DevOps & Cloud

- **Docker** - Containerizationdocker ps- ­ƒöù **One-Click Copy** - Copy shortened URLs with visual feedback

- **Docker Compose** - Multi-container orchestration

- **GitHub Actions** - CI/CD automation

- **Google Cloud Platform** - Cloud hosting

- **Google Compute Engine** - VM hosting# You should see:- [Security](#-security)- ­ƒöÆ **Secure** - Rate limiting and security headers- [Phase 1: Local Development](#-phase-1-local-development-current)

- **Google Artifact Registry** - Container registry

- **Workload Identity Federation** - Keyless authentication# - url-shortener-api (Node.js app)



---# - url-shortener-mongo (MongoDB)### Security Features



## ☁️ GCP Deployment



This project uses **GitHub Actions** for automated deployment to **Google Cloud Platform**.# Test the health endpoint- ­ƒøí´©Å **Helmet.js Integration** - 12+ security headers enabled- [Contributing](#-contributing)



### Architecturecurl http://localhost:8001/health



```- ÔÅ▒´©Å **Rate Limiting** - 10 URLs per 15 minutes per IP

┌──────────────────────────────────┐

│      GitHub Repository           │# Expected response:

│   (devops-url-shortener)         │

└────────────┬─────────────────────┘# {"status":"OK","message":"Server is running"}- Ô£à **Input Validation** - URL format validation and sanitization- [License](#-license)- ­ƒÉ│ **Docker Ready** - One command to run- [Prerequisites](#-prerequisites)

             │

             │ Push to main```

             ▼

┌──────────────────────────────────┐- ­ƒöÆ **CORS Protection** - Configurable cross-origin policies

│      GitHub Actions              │

│  (Workload Identity Federation)  │---

└────────────┬─────────────────────┘

             │- ­ƒÜ½ **XSS Protection** - Content Security Policy headers

             │ Build & Push Image

             ▼## 💡 Usage

┌──────────────────────────────────┐

│   Google Artifact Registry       │

│     (us-central1)                │

└────────────┬─────────────────────┘### Web Interface

             │

             │ Pull & Deploy### DevOps Features---- ­ƒô▒ **Responsive** - Works on all devices- [Quick Start](#-quick-start)

             ▼

┌──────────────────────────────────┐1. **Open the App**: Navigate to `http://localhost:8001`

│   Google Compute Engine          │

│    VM: url-shortener-vm          │2. **Shorten a URL**: Enter any long URL and click "✨ Shorten Now!"- ­ƒÉ│ **Docker Support** - Multi-stage builds with Alpine Linux

│    IP: 34.72.126.110             │

│                                  │3. **Copy & Share**: Copy your new short URL

│  ┌──────────┐  ┌──────────────┐ │

│  │ MongoDB  │  │  Node.js API │ │4. **Track Analytics**: Access `/url/analytics/{shortId}` for statistics- ­ƒôª **Docker Compose** - One-command local development

│  │ :27017   │  │  :8001       │ │

│  └──────────┘  └──────────────┘ │

└──────────────────────────────────┘

             │### Command Line Usage- ­ƒöä **CI/CD Pipeline** - Automated deployment with GitHub Actions

             ▼

      Public Access

  http://34.72.126.110:8001

``````bash- Ôÿü´©Å **Cloud Deployment** - Running on Google Compute Engine## ­ƒÄ» About- [Project Structure](#-project-structure)



### CI/CD Pipeline# Create a short URL



**Triggers:**curl -X POST http://localhost:8001/url \- ­ƒöì **Health Checks** - Built-in monitoring and health endpoints

- ✅ Push to `main` → Build, test, and deploy

- ✅ Pull Request → Build and test only (no deployment)  -H "Content-Type: application/json" \

- ✅ Manual dispatch → Full pipeline

  -d '{"url": "https://github.com/theshikharpurwar"}'- ­ƒôØ **Comprehensive Logging** - Detailed request/response logs

**Jobs:**



1. **Build & Test** (runs on all events)

   - Install dependencies# Response:

   - Run tests

   - Build Docker image# {

   - Validate code

#   "success": true,---**Shorty** is a modern, production-ready URL shortener built with the MERN stack (MongoDB, Express, React-inspired UI, Node.js). It features a stunning animated interface, comprehensive analytics, and enterprise-grade security features.## ­ƒÜÇ Quick Start- [API Documentation](#-api-documentation)

2. **Deploy** (runs only on push to main)

   - Authenticate to GCP (keyless)#   "id": "abc123",

   - Push image to Artifact Registry

   - SSH to Compute Engine#   "shortUrl": "http://localhost:8001/abc123",

   - Deploy MongoDB + API containers

   - Run health checks#   "originalUrl": "https://github.com/theshikharpurwar"



### GCP Resources# }## ­ƒÄ¼ Demo



- **Project:** banded-oven-471507-q9

- **Region:** us-central1

- **VM Instance:** url-shortener-vm# Get analytics

- **Artifact Registry:** url-shortener

- **Service Account:** github-actions-sa@banded-oven-471507-q9.iam.gserviceaccount.comcurl http://localhost:8001/url/analytics/abc123



---```### Live Application### Why Shorty?- [Testing the Application](#-testing-the-application)



## 📁 Project Structure



```---­ƒîÉ **Live Demo**: [http://34.72.126.110:8001](http://34.72.126.110:8001)

devops-url-shortener/

│

├── .github/

│   └── workflows/## 📡 API Documentation

│       └── deploy.yml              # GitHub Actions CI/CD

│

├── src/

│   ├── controllers/### Base URLs### Features Showcase

│   │   └── urlController.js        # Business logic

│   ├── models/```

│   │   └── url.js                  # Mongoose schema

│   ├── routes/Local:  http://localhost:8001- ­ƒÄ¿ **Beautiful Design** - Modern UI with animated gradients and smooth interactions### Prerequisites- [Troubleshooting](#-troubleshooting)

│   │   └── url.js                  # API routes

│   └── connect.js                  # MongoDB connectionCloud:  http://34.72.126.110:8001

│

├── views/```**Modern Animated Interface**

│   └── index.ejs                   # Frontend UI

│

├── index.js                        # Express server

├── package.json                    # Dependencies### Endpoints- Gradient background with 4-color animation- ÔÜí **Blazing Fast** - Optimized performance with Docker containerization

├── Dockerfile                      # Container image

├── docker-compose.yml              # Local development

├── .dockerignore

├── .gitignore#### 1. Create Short URL- Floating blur shapes effects

├── README.md                       # This file

├── IMPROVEMENTS.md                 # Future features**POST** `/url`

└── BRANCH-CONSOLIDATION-SUMMARY.md # Project evolution

```- Glassmorphism design (frosted glass)- ­ƒôè **Analytics Ready** - Track every click with detailed visit history- [Next Phases](#-next-phases)



---**Request:**



## ⚙️ Configuration```json- Smooth button ripple effects



### Environment Variables{



Create `.env` file (optional):  "url": "https://example.com/very/long/url"- Responsive copy-to-clipboard- ­ƒöÆ **Secure by Default** - Rate limiting, security headers, and input validation



```env}

# Server

PORT=8001```

NODE_ENV=production



# MongoDB

MONGO_URL=mongodb://mongo:27017/url-shortener**Response:** `201 Created`---- ­ƒÉ│ **Cloud Ready** - Deployed on Google Cloud Platform with CI/CD- Docker & Docker Compose



# Security```json

RATE_LIMIT_WINDOW_MS=900000    # 15 minutes

RATE_LIMIT_MAX_REQUESTS=10     # 10 requests{

```

  "success": true,

### Docker Compose

  "id": "XyZ123",## ­ƒÜÇ Quick Start

```yaml

version: '3.8'  "shortUrl": "http://localhost:8001/XyZ123",

services:

  mongo:  "originalUrl": "https://example.com/very/long/url"

    image: mongo:7.0

    ports:}

      - "27017:27017"

    volumes:```### Prerequisites---- Git---

      - mongodb_data:/data/db



  api:

    build: .**Rate Limit:** 10 requests per 15 minutes per IP

    ports:

      - "8001:8001"

    environment:

      - MONGO_URL=mongodb://mongo:27017/url-shortener---- **Docker** (v20.0+)

      - PORT=8001

```



---#### 2. Redirect to Original URL- **Docker Compose** (v2.0+)



## 🔒 Security**GET** `/:shortId`



### Implemented Measures- **Git**## Ô£¿ Features



#### Security Headers (Helmet.js)Redirects to the original URL and tracks analytics.

```

✅ Strict-Transport-Security

✅ X-Content-Type-Options: nosniff

✅ X-Frame-Options: SAMEORIGIN**Response:** `302 Found` (Redirects to original URL)

✅ X-XSS-Protection

✅ Referrer-Policy: no-referrer### Local Installation

✅ Cross-Origin-Opener-Policy

✅ Cross-Origin-Resource-Policy---

```



#### Rate Limiting

- **Limit:** 10 URL creations per 15 minutes per IP#### 3. Get Analytics

- **Scope:** POST /url endpoint

- **Purpose:** Prevent abuse and DDoS**GET** `/url/analytics/:shortId````bash### Core Features### Run Locally## ­ƒÄ» Project Overview



#### Input Validation

- URL format validation

- Automatic protocol addition (http/https)**Response:** `200 OK`# 1. Clone the repository

- Malicious input sanitization

```json

---

{git clone https://github.com/theshikharpurwar/devops-url-shortener.git- ÔÜí **Instant URL Shortening** - Generate short links in milliseconds

## 🐛 Troubleshooting

  "success": true,

### Port Already in Use

  "shortId": "XyZ123",cd devops-url-shortener

```bash

# Windows  "originalUrl": "https://example.com",

netstat -ano | findstr :8001

  "totalClicks": 42,- ­ƒöä **Smart Redirects** - Fast 302 redirects to original URLs

# Linux/Mac

lsof -i :8001  "visitHistory": [



# Change port in docker-compose.yml    {# 2. Start the application

ports:

  - "8002:8001"      "timestamp": "2025-10-26T12:30:00.000Z",

```

      "userAgent": "Mozilla/5.0...",docker-compose up -d- ­ƒôè **Real-time Analytics** - Track clicks, timestamps, user agents, and IPs

### MongoDB Connection Failed

      "ipAddress": "192.168.1.1"

```bash

# Check MongoDB    }

docker ps | grep mongo

  ],

# Restart

docker-compose restart mongo  "createdAt": "2025-10-25T10:00:00.000Z",# 3. Access the application- ­ƒÄ¿ **Modern UI** - Animated gradient backgrounds with floating shapes```bashThis is a **complete DevOps project** designed to demonstrate the full software development lifecycle with modern DevOps practices. We're building a URL shortener application and deploying it through a professional CI/CD pipeline.



# Fresh start (deletes data!)  "updatedAt": "2025-10-26T12:30:00.000Z"

docker-compose down -v

docker-compose up -d}# Open http://localhost:8001 in your browser

```

```

### Cannot Access Application

```- ­ƒô▒ **Fully Responsive** - Works perfectly on desktop, tablet, and mobile

```bash

# Check containers---

docker ps



# Check logs

docker logs url-shortener-api#### 4. Health Check



# Health check**GET** `/health`That's it! The app is now running! ­ƒÄë- ­ƒöù **One-Click Copy** - Copy shortened URLs with visual feedback# Clone the repository

curl http://localhost:8001/health



# Rebuild

docker-compose down -v**Response:** `200 OK`

docker-compose build --no-cache

docker-compose up -d```json

```

{### Verify Installation

---

  "status": "OK",

## 📊 Monitoring

  "message": "Server is running",

### View Logs

  "timestamp": "2025-10-26T12:30:00.000Z"

```bash

# All services}```bash### Security Featuresgit clone https://github.com/theshikharpurwar/devops-url-shortener.git### The Complete Journey (4 Phases)

docker-compose logs -f

```

# Specific service

docker-compose logs -f api# Check if containers are running

docker-compose logs -f mongo

---

# Last 100 lines

docker-compose logs --tail=100 apidocker ps- ­ƒøí´©Å **Helmet.js Integration** - 12+ security headers enabled

```

## 🛠️ Technology Stack

### Health Monitoring



```bash

# App health### Backend

curl http://localhost:8001/health

- **Runtime**: Node.js 18 (LTS)# You should see:- ÔÅ▒´©Å **Rate Limiting** - 10 URLs per 15 minutes per IPcd devops-url-shortener

# Container stats

docker stats- **Framework**: Express.js 4.18



# Container health- **Database**: MongoDB 7.0# - url-shortener-api (Node.js app)

docker ps

```- **ODM**: Mongoose 8.0



---- **ID Generation**: shortid 2.2# - url-shortener-mongo (MongoDB)- Ô£à **Input Validation** - URL format validation and sanitization



## 🤝 Contributing



Contributions are welcome!### Security



1. Fork the repository- **Helmet.js** - Security headers

2. Create feature branch (`git checkout -b feature/amazing-feature`)

3. Commit changes (`git commit -m 'Add amazing feature'`)- **express-rate-limit** - Rate limiting# Test the health endpoint- ­ƒöÆ **CORS Protection** - Configurable cross-origin policies| Phase | Focus | Tools | Status |

4. Push to branch (`git push origin feature/amazing-feature`)

5. Open Pull Request- **Input Validation** - URL sanitization



### PR Guidelinescurl http://localhost:8001/health



- ✅ All PRs trigger build and test checks### Frontend

- ✅ Tests must pass before merge

- ✅ Deployment happens automatically after merge- **Template Engine**: EJS 3.1- ­ƒÜ½ **XSS Protection** - Content Security Policy headers

- ✅ Follow existing code style

- **CSS**: Custom CSS3 with animations

---

- **Fonts**: Google Fonts (Poppins)# Expected response:

## 📝 Future Enhancements

- **JavaScript**: Vanilla ES6+

See [IMPROVEMENTS.md](./IMPROVEMENTS.md):

# {"status":"OK","message":"Server is running"}# Start the application|-------|-------|-------|--------|

- 🎨 Custom short URL IDs

- ⏰ URL expiration (TTL)### DevOps & Cloud

- 📱 QR code generation

- 🔐 Password-protected URLs- **Containerization**: Docker with multi-stage builds```

- 📊 Advanced analytics dashboard

- 🌍 Geographic location tracking- **Orchestration**: Docker Compose

- 🔑 API key authentication

- 📦 Bulk URL creation- **CI/CD**: GitHub Actions### Developer Features

- 💾 Redis caching

- 🧪 Comprehensive testing- **Cloud Platform**: Google Cloud Platform (GCP)



---- **Compute**: Google Compute Engine (GCE)---



## 📄 License- **Container Registry**: Google Artifact Registry



MIT License- **Authentication**: Workload Identity Federation (keyless)- ­ƒÉ│ **Docker Support** - Multi-stage builds with Alpine Linuxdocker-compose up -d| **Phase 1** | **Local Development** | Node.js, MongoDB, Docker, Docker Compose | Ô£à **COMPLETE** |



```

Copyright (c) 2025 Shikhar Purwar

---## ­ƒÆí Usage

Permission is hereby granted, free of charge, to any person obtaining a copy

of this software and associated documentation files (the "Software"), to deal

in the Software without restriction, including without limitation the rights

to use, copy, modify, merge, publish, distribute, sublicense, and/or sell## ☁️ DevOps & Deployment- ­ƒôª **Docker Compose** - One-command local development

copies of the Software, and to permit persons to whom the Software is

furnished to do so, subject to the following conditions:



The above copyright notice and this permission notice shall be included in all### CI/CD Pipeline### Web Interface

copies or substantial portions of the Software.

```



---This project uses **GitHub Actions** for automated deployment to Google Cloud Platform.- ­ƒöì **Health Checks** - Built-in health monitoring endpoint| **Phase 2** | **Infrastructure as Code** | Terraform, AWS (VPC, EKS, ECR, DocumentDB) | Ô£à **COMPLETE** |



## 🙏 Acknowledgments



- **Node.js Community** - Amazing runtime#### Pipeline Stages1. **Open the App**: Navigate to `http://localhost:8001`

- **MongoDB** - Flexible database

- **Google Cloud Platform** - Reliable infrastructure

- **GitHub Actions** - Seamless CI/CD

- **Open Source Community** - Inspiration and tools1. **Build & Test** (on every push and PR)2. **Shorten a URL**: Enter any long URL and click "Ô£¿ Shorten Now!"- ­ƒôØ **Comprehensive Logging** - Detailed request/response logs



---   - Install dependencies



## 📞 Contact & Support   - Run tests3. **Copy & Share**: Copy your new short URL



- **Author:** Shikhar Purwar   - Build Docker image

- **GitHub:** [@theshikharpurwar](https://github.com/theshikharpurwar)

- **Repository:** [devops-url-shortener](https://github.com/theshikharpurwar/devops-url-shortener)   - Validate code quality4. **Track Analytics**: Access `/url/analytics/{shortId}` for statistics- ­ƒº¬ **RESTful API** - Clean, well-documented endpoints# Access at http://localhost:8001| **Phase 3** | **Configuration Management** | Ansible, Jenkins Setup | Ô£à **COMPLETE** |

- **Issues:** [Report a bug](https://github.com/theshikharpurwar/devops-url-shortener/issues)



---

2. **Deploy** (on push to main - including merged PRs)

## ⭐ Show Your Support

   - Authenticate to GCP (keyless via Workload Identity)

If you found this project helpful, give it a ⭐️ on GitHub!

   - Push image to Google Artifact Registry### Command Line Usage

---

   - Deploy to Google Compute Engine

<div align="center">

   - Start MongoDB and application containers

**Built with ❤️ using modern DevOps practices**

   - Health check verification

**Deployed on Google Cloud Platform**

```bash---```| **Phase 4** | **CI/CD Pipeline & Deployment** | Jenkins, Kubernetes, AWS EKS | Ô£à **COMPLETE** |

**October 2025**

#### Workflow Triggers

[⬆ Back to Top](#-shorty---url-shortener)

# Create a short URL

</div>

- ✅ **Push to main** - Full build, test, and deploy

- ✅ **Pull Requests** - Build and test only (no deployment)curl -X POST http://localhost:8001/url \

- ✅ **Manual** - Via workflow_dispatch

  -H "Content-Type: application/json" \

### Google Cloud Platform Architecture

  -d '{"url": "https://github.com/theshikharpurwar"}'## ­ƒÄ¼ Demo

```

┌─────────────────────────────────────────────────┐

│              GitHub Repository                  │

│         (devops-url-shortener)                  │# Response:

└──────────────┬──────────────────────────────────┘

               │# {

               │ Push to main

               ▼#   "success": true,### Live ApplicationThat's it! ­ƒÄë**Current Status**: ­ƒƒó **Phase 4 - Complete Pipeline Deployed!**

┌─────────────────────────────────────────────────┐

│           GitHub Actions                        │#   "id": "abc123",

│  (Workload Identity Federation - Keyless Auth)  │

└──────────────┬──────────────────────────────────┘#   "shortUrl": "http://localhost:8001/abc123",­ƒîÉ **Live Demo**: [http://34.72.126.110:8001](http://34.72.126.110:8001)

               │

               │ Build & Push#   "originalUrl": "https://github.com/theshikharpurwar"

               ▼

┌─────────────────────────────────────────────────┐# }

│      Google Artifact Registry                   │

│    (us-central1-docker.pkg.dev)                 │

│         Docker Image Storage                    │

└──────────────┬──────────────────────────────────┘# Get analytics### Screenshots

               │

               │ Pull & Deploycurl http://localhost:8001/url/analytics/abc123

               ▼

┌─────────────────────────────────────────────────┐```## ­ƒÄ» Usage---

│      Google Compute Engine (GCE)                │

│           VM: url-shortener-vm                  │

│         Region: us-central1-a                   │

│          IP: 34.72.126.110                      │---**Homepage - Animated Gradient Design**

│                                                 │

│  ┌────────────────┐  ┌─────────────────┐      │

│  │  MongoDB       │  │  Node.js API    │      │

│  │  Container     │  │  Container      │      │## ­ƒôí API Documentation```

│  │  Port: 27017   │  │  Port: 8001     │      │

│  │  Volume: Data  │  │  (Public)       │      │

│  └────────────────┘  └─────────────────┘      │

└─────────────────────────────────────────────────┘### Base URLsÔöîÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÉ

               │

               ▼```

         Public Access

    http://34.72.126.110:8001Local:  http://localhost:8001Ôöé           ÔÜí                             Ôöé### Web Interface## ­ƒÜÇ Phase 1: Local Development

```

Cloud:  http://34.72.126.110:8001

### Deployment Configuration

```Ôöé        Shorty                            Ôöé

**GCP Resources:**

- **Project**: banded-oven-471507-q9

- **Service Account**: github-actions-sa@banded-oven-471507-q9.iam.gserviceaccount.com

- **Workload Identity Pool**: github-pool### EndpointsÔöé  Lightning-fast URL shortening           Ôöé

- **VM Instance**: url-shortener-vm (us-central1-a)

- **Artifact Registry**: url-shortener (us-central1)



**GitHub Secrets Required:**#### 1. Create Short URLÔöé                                          Ôöé

- `GCP_PROJECT_ID`

- `GCP_PROJECT_NUMBER`**POST** `/url`

- `GCP_SERVICE_ACCOUNT_EMAIL`

- `GCP_WORKLOAD_IDENTITY_PROVIDER`Ôöé  [Enter your long URL...        ]       Ôöé1. Open http://localhost:8001 in your browserIn this phase, you will:

- `GCP_REGION`

- `GCP_ARTIFACT_REPO`**Request:**

- `GCE_INSTANCE_NAME`

- `GCE_ZONE````jsonÔöé                                          Ôöé

- `GCE_SSH_PRIVATE_KEY`

- `GCE_SSH_USERNAME`{



---  "url": "https://example.com/very/long/url"Ôöé  [ Ô£¿ Shorten Now!              ]       Ôöé2. Enter a long URL



## 📁 Project Structure}



``````Ôöé                                          Ôöé

devops-url-shortener/

│

├── .github/

│   └── workflows/**Response:** `201 Created`Ôöé  Features:                               Ôöé3. Click "Shorten Now!"Ô£à Get a fully functional Node.js URL shortener application  

│       └── deploy.yml          # GitHub Actions CI/CD pipeline

│```json

├── k8s/                         # Kubernetes manifests (optional)

│   ├── deployment.yml{Ôöé  ÔÜí Fast    ­ƒöÆ Secure    ­ƒôè Analytics   Ôöé

│   └── service.yml

│  "success": true,

├── src/                         # Application source code

│   ├── controllers/  "id": "XyZ123",ÔööÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÿ4. Copy and share your shortened URLÔ£à Containerize the application using Docker  

│   │   └── urlController.js    # Business logic

│   ├── models/  "shortUrl": "http://localhost:8001/XyZ123",

│   │   └── url.js              # Mongoose schema

│   ├── routes/  "originalUrl": "https://example.com/very/long/url"```

│   │   └── url.js              # API routes

│   └── connect.js              # MongoDB connection}

│

├── views/```Ô£à Run the entire stack locally with Docker Compose  

│   └── index.ejs               # Frontend template (modern UI)

│

├── index.js                     # Express server entry point

├── package.json                 # Node.js dependencies**Rate Limit:** 10 requests per 15 minutes per IP**Features**

├── package-lock.json

│

├── Dockerfile                   # Multi-stage Docker build

├── docker-compose.yml           # Local development setup---- Animated gradient background (4-color rotation)### API EndpointsÔ£à Test all API endpoints  

├── .dockerignore

│

├── .gitignore

├── README.md                    # This file#### 2. Redirect to Original URL- Floating blur shapes animation

├── IMPROVEMENTS.md              # Future enhancements

└── BRANCH-CONSOLIDATION-SUMMARY.md   # Branch consolidation details**GET** `/:shortId`

```

- Glassmorphism design (frosted glass effect)Ô£à Understand the codebase before moving to cloud deployment  

---

Redirects to the original URL and tracks analytics.

## ⚙️ Configuration

- Smooth button ripple effects

### Environment Variables

**Response:** `302 Found` (Redirects to original URL)

Create a `.env` file (optional):

- Responsive copy-to-clipboard functionality#### Create Short URL

```env

# Server Configuration---

PORT=8001

NODE_ENV=production



# MongoDB Configuration#### 3. Get Analytics

MONGO_URL=mongodb://mongo:27017/url-shortener

**GET** `/url/analytics/:shortId`---```bash### Ô×í´©Å Next: Phase 2 - Infrastructure as Code

# Security (optional)

RATE_LIMIT_WINDOW_MS=900000    # 15 minutes

RATE_LIMIT_MAX_REQUESTS=10      # 10 requests per window

```**Response:** `200 OK`



### Docker Compose Configuration```json



```yaml{## ­ƒÜÇ Quick Startcurl -X POST http://localhost:8001/url \

version: '3.8'

services:  "success": true,

  mongo:

    image: mongo:7.0  "shortId": "XyZ123",

    ports:

      - "27017:27017"  "originalUrl": "https://example.com",

    volumes:

      - mongodb_data:/data/db  "totalClicks": 42,### Prerequisites  -H "Content-Type: application/json" \See **[terraform/README.md](terraform/README.md)** or **[terraform/QUICKSTART.md](terraform/QUICKSTART.md)**  



  api:  "visitHistory": [

    build: .

    ports:    {

      - "8001:8001"

    environment:      "timestamp": "2025-10-26T12:30:00.000Z",

      - MONGO_URL=mongodb://mongo:27017/url-shortener

      - PORT=8001      "userAgent": "Mozilla/5.0...",- **Docker** (v20.0+)  -d '{"url": "https://example.com/long/url"}'

```

      "ipAddress": "192.168.1.1"

---

    }- **Docker Compose** (v2.0+)

## 🔒 Security

  ],

### Implemented Security Measures

  "createdAt": "2025-10-25T10:00:00.000Z",- **Git**```---

#### Security Headers (Helmet.js)

```  "updatedAt": "2025-10-26T12:30:00.000Z"

✅ Strict-Transport-Security

✅ X-Content-Type-Options: nosniff}

✅ X-Frame-Options: SAMEORIGIN

✅ X-XSS-Protection```

✅ Referrer-Policy: no-referrer

✅ Cross-Origin-Opener-Policy### Installation

✅ Cross-Origin-Resource-Policy

```---



#### Rate Limiting

- **Limit**: 10 URL creations per 15 minutes per IP

- **Purpose**: Prevent abuse and DDoS attacks#### 4. Health Check

- **Scope**: Applied to POST /url endpoint

**GET** `/health````bash#### Get Analytics## ÔÜÖ´©Å Prerequisites

#### Input Validation

- URL format validation

- Automatic protocol addition (http/https)

- Malicious input sanitization**Response:** `200 OK`# 1. Clone the repository



---```json



## 🐛 Troubleshooting{git clone https://github.com/theshikharpurwar/devops-url-shortener.git```bash



### Port Already in Use  "status": "OK",

```bash

# Find process using port 8001  "message": "Server is running",cd devops-url-shortener

netstat -ano | findstr :8001  # Windows

lsof -i :8001                  # Linux/Mac  "timestamp": "2025-10-26T12:30:00.000Z"



# Change port in docker-compose.yml}curl http://localhost:8001/url/analytics/{shortId}### 1´©ÅÔâú Windows 11 Setup (CRITICAL)

ports:

  - "8002:8001"```

```

# 2. Start the application

### MongoDB Connection Failed

```bash---

# Check MongoDB is running

docker ps | grep mongodocker-compose up -d```



# Restart MongoDB## ­ƒøá´©Å Technology Stack

docker-compose restart mongo



# Fresh start (removes all data)

docker-compose down -v### Backend

docker-compose up -d

```- **Runtime**: Node.js 18 (LTS)# 3. Access the applicationSince you're on Windows 11, you **MUST** use **WSL 2** for this project. Follow these steps:



### Cannot Access Application- **Framework**: Express.js 4.18

```bash

# Check if containers are running- **Database**: MongoDB 7.0# Open http://localhost:8001 in your browser

docker ps

- **ODM**: Mongoose 8.0

# Check API logs

docker logs url-shortener-api- **ID Generation**: shortid 2.2```#### Health Check



# Health check

curl http://localhost:8001/health

### Security

# Rebuild from scratch

docker-compose down -v- **Helmet.js** - Security headers

docker-compose build --no-cache

docker-compose up -d- **express-rate-limit** - Rate limitingThat's it! The app is now running! ­ƒÄë```bash#### **Step 1: Install WSL 2**

```

- **Input Validation** - URL sanitization

---



## 📊 Monitoring & Logs

### Frontend

### View Logs

- **Template Engine**: EJS 3.1### Verify Installationcurl http://localhost:8001/healthOpen PowerShell as Administrator and run:

```bash

# All services- **CSS**: Custom CSS3 with animations

docker-compose logs -f

- **Fonts**: Google Fonts (Poppins)

# Specific service

docker-compose logs -f api- **JavaScript**: Vanilla ES6+

docker-compose logs -f mongo

```bash``````powershell

# Last 100 lines

docker-compose logs --tail=100 api### DevOps & Cloud

```

- **Containerization**: Docker with multi-stage builds# Check if containers are running

### Health Monitoring

- **Orchestration**: Docker Compose

```bash

# Application health- **CI/CD**: GitHub Actionsdocker pswsl --install

curl http://localhost:8001/health

- **Cloud Platform**: Google Cloud Platform (GCP)

# Container health

docker ps- **Compute**: Google Compute Engine (GCE)



# Resource usage- **Container Registry**: Google Artifact Registry

docker stats

```- **Authentication**: Workload Identity Federation (keyless)# You should see:## ­ƒôü Project Structure```



---



## 🤝 Contributing---# - url-shortener-api (Node.js app)



Contributions are welcome! Here's how:



1. Fork the repository## Ôÿü´©Å DevOps & Deployment# - url-shortener-mongo (MongoDB)

2. Create a feature branch (`git checkout -b feature/amazing-feature`)

3. Commit your changes (`git commit -m 'Add amazing feature'`)

4. Push to the branch (`git push origin feature/amazing-feature`)

5. Open a Pull Request### CI/CD Pipeline



### Pull Request Guidelines



- ✅ PRs trigger automatic build and test checksThis project uses **GitHub Actions** for automated deployment to Google Cloud Platform.# Test the health endpoint```Restart your computer, then verify:

- ✅ All tests must pass before merge

- ✅ Deployment happens automatically after merge to main

- ✅ Follow existing code style and conventions

#### Pipeline Stagescurl http://localhost:8001/health

---



## 📝 Future Enhancements

1. **Build & Test** (on every push and PR)Ôö£ÔöÇÔöÇ src/```powershell

See [IMPROVEMENTS.md](./IMPROVEMENTS.md) for detailed proposals:

   - Install dependencies

- 🎨 Custom short URL IDs

- ⏰ URL expiration (TTL)   - Run tests# Expected response:

- 📱 QR code generation

- 🔐 Password-protected URLs   - Build Docker image

- 📊 Advanced analytics dashboard

- 🌍 Geographic location tracking   - Validate code quality# {"status":"OK","message":"Server is running"}Ôöé   Ôö£ÔöÇÔöÇ models/         # MongoDB schemaswsl --list --verbose

- 🔑 API key authentication

- 📦 Bulk URL creation

- 💾 Redis caching

- 🧪 Comprehensive testing2. **Deploy** (on push to main - including merged PRs)```



---   - Authenticate to GCP (keyless via Workload Identity)



## 📄 License   - Push image to Google Artifact RegistryÔöé   Ôö£ÔöÇÔöÇ controllers/    # Business logic```



This project is licensed under the MIT License.   - Deploy to Google Compute Engine



```   - Start MongoDB and application containers---

MIT License

   - Health check verification

Copyright (c) 2025 Shikhar Purwar

Ôöé   ÔööÔöÇÔöÇ routes/         # API routes

Permission is hereby granted, free of charge, to any person obtaining a copy

of this software and associated documentation files (the "Software"), to deal#### Workflow Triggers

in the Software without restriction, including without limitation the rights

to use, copy, modify, merge, publish, distribute, sublicense, and/or sell## ­ƒÆí Usage

copies of the Software, and to permit persons to whom the Software is

furnished to do so, subject to the following conditions:- Ô£à **Push to main** - Full build, test, and deploy



The above copyright notice and this permission notice shall be included in all- Ô£à **Pull Requests** - Build and test only (no deployment)Ôö£ÔöÇÔöÇ views/              # Frontend templatesYou should see `VERSION 2` for Ubuntu.

copies or substantial portions of the Software.

```- Ô£à **Manual** - Via workflow_dispatch



---### Web Interface



## 🙏 Acknowledgments### Google Cloud Platform Architecture



- **Node.js Community** - Amazing runtimeÔö£ÔöÇÔöÇ index.js            # Server entry point

- **MongoDB** - Flexible database

- **Google Cloud Platform** - Reliable cloud infrastructure```

- **GitHub Actions** - Seamless CI/CD

- **Open Source Community** - Inspiration and toolsÔöîÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÉ1. **Open the App**



---Ôöé              GitHub Repository                  Ôöé



## 📞 Contact & SupportÔöé         (devops-url-shortener)                  Ôöé   - Navigate to `http://localhost:8001`Ôö£ÔöÇÔöÇ Dockerfile          # Container definition­ƒôû **Detailed Instructions**: See [SETUP-WSL2.md](./SETUP-WSL2.md) for complete WSL 2 setup.



- **Author**: Shikhar PurwarÔööÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔö¼ÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÿ

- **GitHub**: [@theshikharpurwar](https://github.com/theshikharpurwar)

- **Repository**: [devops-url-shortener](https://github.com/theshikharpurwar/devops-url-shortener)               Ôöé

- **Issues**: [Report a bug or request a feature](https://github.com/theshikharpurwar/devops-url-shortener/issues)

               Ôöé Push to main

---

               Ôû╝2. **Shorten a URL**ÔööÔöÇÔöÇ docker-compose.yml  # Multi-container setup

## ⭐ Show Your Support

ÔöîÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÉ

If you found this project helpful, please give it a ⭐️ on GitHub!

Ôöé           GitHub Actions                        Ôöé   - Enter any long URL (e.g., `https://github.com/username/very-long-repository-name`)

---

Ôöé  (Workload Identity Federation - Keyless Auth)  Ôöé

<div align="center">

ÔööÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔö¼ÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÿ   - Click "Ô£¿ Shorten Now!"```#### **Step 2: Install Docker Desktop**

**Built with ❤️ using modern DevOps practices**

               Ôöé

**Deployed on Google Cloud Platform**

               Ôöé Build & Push   - Copy your new short URL

**October 2025**

               Ôû╝

[⬆ Back to Top](#-shorty---url-shortener)

ÔöîÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÉ1. Download from: https://www.docker.com/products/docker-desktop/

</div>

Ôöé      Google Artifact Registry                   Ôöé

Ôöé    (us-central1-docker.pkg.dev)                 Ôöé3. **Use the Short URL**

Ôöé         Docker Image Storage                    Ôöé

ÔööÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔö¼ÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÿ   - Share the short URL anywhere## ­ƒøá´©Å Technology Stack2. Install with **WSL 2 backend enabled**

               Ôöé

               Ôöé Pull & Deploy   - Anyone clicking it will be redirected to the original URL

               Ôû╝

ÔöîÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÉ3. In Docker Desktop Settings:

Ôöé      Google Compute Engine (GCE)                Ôöé

Ôöé           VM: url-shortener-vm                  Ôöé4. **View Analytics**

Ôöé         Region: us-central1-a                   Ôöé

Ôöé          IP: 34.72.126.110                      Ôöé   - Access `/url/analytics/{shortId}` to see click statistics- **Backend**: Node.js + Express   - Ô£à Enable "Use the WSL 2 based engine"

Ôöé                                                 Ôöé

Ôöé  ÔöîÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÉ  ÔöîÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÉ      Ôöé

Ôöé  Ôöé  MongoDB       Ôöé  Ôöé  Node.js API    Ôöé      Ôöé

Ôöé  Ôöé  Container     Ôöé  Ôöé  Container      Ôöé      Ôöé### Command Line Usage- **Database**: MongoDB   - Ô£à Enable WSL Integration with Ubuntu

Ôöé  Ôöé  Port: 27017   Ôöé  Ôöé  Port: 8001     Ôöé      Ôöé

Ôöé  Ôöé  Volume: Data  Ôöé  Ôöé  (Public)       Ôöé      Ôöé

Ôöé  ÔööÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÿ  ÔööÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÿ      Ôöé

ÔööÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÿ```bash- **Frontend**: EJS + CSS3 (Animated gradients)

               Ôöé

               Ôû╝# Create a short URL

         Public Access

    http://34.72.126.110:8001curl -X POST http://localhost:8001/url \- **Security**: Helmet.js + Rate limiting#### **Step 3: Install VS Code + WSL Extension**

```

  -H "Content-Type: application/json" \

### Deployment Configuration

  -d '{"url": "https://github.com/theshikharpurwar"}'- **Containerization**: Docker + Docker Compose1. Install VS Code: https://code.visualstudio.com/

**GCP Resources:**

- **Project**: banded-oven-471507-q9

- **Service Account**: github-actions-sa@banded-oven-471507-q9.iam.gserviceaccount.com

- **Workload Identity Pool**: github-pool# Response:2. Install the **WSL** extension (by Microsoft)

- **VM Instance**: url-shortener-vm (us-central1-a)

- **Artifact Registry**: url-shortener (us-central1)# {



**GitHub Secrets Required:**#   "success": true,## ­ƒöÆ Security Features3. Open VS Code and connect to WSL:

- `GCP_PROJECT_ID`

- `GCP_PROJECT_NUMBER`#   "id": "abc123",

- `GCP_SERVICE_ACCOUNT_EMAIL`

- `GCP_WORKLOAD_IDENTITY_PROVIDER`#   "shortUrl": "http://localhost:8001/abc123",   - Press `F1` ÔåÆ Type `WSL: Connect to WSL`

- `GCP_REGION`

- `GCP_ARTIFACT_REPO`#   "originalUrl": "https://github.com/theshikharpurwar"

- `GCE_INSTANCE_NAME`

- `GCE_ZONE`# }- Ô£à Helmet.js security headers

- `GCE_SSH_PRIVATE_KEY`

- `GCE_SSH_USERNAME`



---# Use the short URL (will redirect)- Ô£à Rate limiting (10 URLs per 15 minutes per IP)### 2´©ÅÔâú Required Software (Inside WSL 2)



## ­ƒôü Project Structurecurl -L http://localhost:8001/abc123



```- Ô£à Input validation

devops-url-shortener/

Ôöé# Get analytics

Ôö£ÔöÇÔöÇ .github/

Ôöé   ÔööÔöÇÔöÇ workflows/curl http://localhost:8001/url/analytics/abc123- Ô£à URL sanitizationOpen your WSL 2 terminal (Ubuntu) in VS Code and verify:

Ôöé       ÔööÔöÇÔöÇ deploy.yml          # GitHub Actions CI/CD pipeline

Ôöé```

Ôö£ÔöÇÔöÇ k8s/                         # Kubernetes manifests (optional)

Ôöé   Ôö£ÔöÇÔöÇ deployment.yml

Ôöé   ÔööÔöÇÔöÇ service.yml

Ôöé---

Ôö£ÔöÇÔöÇ src/                         # Application source code

Ôöé   Ôö£ÔöÇÔöÇ controllers/## ­ƒôè Analytics```bash

Ôöé   Ôöé   ÔööÔöÇÔöÇ urlController.js    # Business logic

Ôöé   Ôö£ÔöÇÔöÇ models/## ­ƒôí API Documentation

Ôöé   Ôöé   ÔööÔöÇÔöÇ url.js              # Mongoose schema

Ôöé   Ôö£ÔöÇÔöÇ routes/# Check Docker

Ôöé   Ôöé   ÔööÔöÇÔöÇ url.js              # API routes

Ôöé   ÔööÔöÇÔöÇ connect.js              # MongoDB connection### Base URL

Ôöé

Ôö£ÔöÇÔöÇ views/```Track your shortened URLs with:docker --version

Ôöé   ÔööÔöÇÔöÇ index.ejs               # Frontend template (modern UI)

ÔöéLocal:  http://localhost:8001

Ôö£ÔöÇÔöÇ index.js                     # Express server entry point

Ôö£ÔöÇÔöÇ package.json                 # Node.js dependenciesCloud:  http://34.72.126.110:8001- Total click countdocker-compose --version

Ôö£ÔöÇÔöÇ package-lock.json

Ôöé```

Ôö£ÔöÇÔöÇ Dockerfile                   # Multi-stage Docker build

Ôö£ÔöÇÔöÇ docker-compose.yml           # Local development setup- Visit history with timestamps

Ôö£ÔöÇÔöÇ .dockerignore

Ôöé### Endpoints

Ôö£ÔöÇÔöÇ .gitignore

Ôö£ÔöÇÔöÇ README.md                    # This file- User agent information# Check Git

Ôö£ÔöÇÔöÇ IMPROVEMENTS.md              # Future enhancements

ÔööÔöÇÔöÇ TRANSFORMATION-COMPLETE.md   # Project evolution summary#### 1. Create Short URL

```

- IP addressesgit --version

---

**POST** `/url`

## ÔÜÖ´©Å Configuration

```

### Environment Variables

Creates a new short URL from a long URL.

Create a `.env` file (optional):

## ­ƒøæ Stopping the App

```env

# Server Configuration**Request Headers:**

PORT=8001

NODE_ENV=production```If anything is missing, refer to [SETUP-WSL2.md](./SETUP-WSL2.md).



# MongoDB ConfigurationContent-Type: application/json

MONGO_URL=mongodb://mongo:27017/url-shortener

``````bash

# Security (optional)

RATE_LIMIT_WINDOW_MS=900000    # 15 minutes

RATE_LIMIT_MAX_REQUESTS=10      # 10 requests per window

```**Request Body:**docker-compose down---



### Docker Compose Configuration```json



```yaml{```

version: '3.8'

services:  "url": "https://example.com/very/long/url/here"

  mongo:

    image: mongo:7.0}## ­ƒÅü Quick Start

    ports:

      - "27017:27017"```

    volumes:

      - mongodb_data:/data/db## ­ƒÉø Troubleshooting



  api:**Response:** `201 Created`

    build: .

    ports:```json### Step 1: Navigate to Project Directory

      - "8001:8001"

    environment:{

      - MONGO_URL=mongodb://mongo:27017/url-shortener

      - PORT=8001  "success": true,**Port already in use?**

```

  "id": "XyZ123",

---

  "shortUrl": "http://localhost:8001/XyZ123",```bash**Important**: In WSL 2, your Windows drives are mounted under `/mnt/`:

## ­ƒöÆ Security

  "originalUrl": "https://example.com/very/long/url/here"

### Implemented Security Measures

}# Change the port in docker-compose.yml

#### Security Headers (Helmet.js)

``````

Ô£à Strict-Transport-Security

Ô£à X-Content-Type-Options: nosniffports:```bash

Ô£à X-Frame-Options: SAMEORIGIN

Ô£à X-XSS-Protection**Error Response:** `400 Bad Request`

Ô£à Referrer-Policy: no-referrer

Ô£à Cross-Origin-Opener-Policy```json  - "8002:8001"  # Change 8001 to 8002# Navigate to your project

Ô£à Cross-Origin-Resource-Policy

```{



#### Rate Limiting  "success": false,```cd /mnt/d/devops-url-shortener

- **Limit**: 10 URL creations per 15 minutes per IP

- **Purpose**: Prevent abuse and DDoS attacks  "error": "URL is required"

- **Scope**: Applied to POST /url endpoint

}

#### Input Validation

- URL format validation```

- Automatic protocol addition (http/https)

- Malicious input sanitization**MongoDB connection issues?**# Verify you're in the right place



---**Rate Limit:** 10 requests per 15 minutes per IP



## ­ƒÉø Troubleshooting```bashpwd



### Port Already in Use---

```bash

# Find process using port 8001docker-compose down -vls -la

netstat -ano | findstr :8001  # Windows

lsof -i :8001                  # Linux/Mac#### 2. Redirect to Original URL



# Change port in docker-compose.ymldocker-compose up -d```

ports:

  - "8002:8001"**GET** `/:shortId`

```

```

### MongoDB Connection Failed

```bashRedirects to the original URL and tracks analytics.

# Check MongoDB is running

docker ps | grep mongoYou should see files like `package.json`, `Dockerfile`, `docker-compose.yml`, etc.



# Restart MongoDB**Parameters:**

docker-compose restart mongo

- `shortId` (required) - The shortened URL identifier## ­ƒôØ Environment Variables

# Fresh start (removes all data)

docker-compose down -v

docker-compose up -d

```**Response:** `302 Found`### Step 2: Build and Run with Docker Compose



### Cannot Access Application- Redirects to the original URL

```bash

# Check if containers are running- Increments click counterCreate a `.env` file (optional):

docker ps

- Logs visit history

# Check API logs

docker logs url-shortener-api```envRun the following command in your WSL 2 terminal:



# Health check**Error Response:** `404 Not Found`

curl http://localhost:8001/health

```jsonPORT=8001

# Rebuild from scratch

docker-compose down -v{

docker-compose build --no-cache

docker-compose up -d  "success": false,MONGO_URL=mongodb://mongo:27017/url-shortener```bash

```

  "error": "Short URL not found"

---

}NODE_ENV=productiondocker-compose up --build

## ­ƒôè Monitoring & Logs

```

### View Logs

``````

```bash

# All services---

docker-compose logs -f



# Specific service

docker-compose logs -f api#### 3. Get Analytics

docker-compose logs -f mongo

## ­ƒñØ Contributing**What happens:**

# Last 100 lines

docker-compose logs --tail=100 api**GET** `/url/analytics/:shortId`

```

- Docker builds the Node.js application image

### Health Monitoring

Retrieves analytics data for a shortened URL.

```bash

# Application healthContributions are welcome! Feel free to:- Downloads MongoDB image (if not already cached)

curl http://localhost:8001/health

**Parameters:**

# Container health

docker ps- `shortId` (required) - The shortened URL identifier- Report bugs- Starts both `api` and `mongo` services



# Resource usage

docker stats

```**Response:** `200 OK`- Suggest features- Creates a network for inter-service communication



---```json



## ­ƒñØ Contributing{- Submit pull requests- Sets up persistent volumes for MongoDB data



Contributions are welcome! Here's how:  "success": true,



1. Fork the repository  "shortId": "XyZ123",

2. Create a feature branch (`git checkout -b feature/amazing-feature`)

3. Commit your changes (`git commit -m 'Add amazing feature'`)  "originalUrl": "https://example.com/very/long/url/here",

4. Push to the branch (`git push origin feature/amazing-feature`)

5. Open a Pull Request  "totalClicks": 42,## ­ƒôä License**Expected Output:**



### Pull Request Guidelines  "visitHistory": [



- Ô£à PRs trigger automatic build and test checks    {```

- Ô£à All tests must pass before merge

- Ô£à Deployment happens automatically after merge to main      "timestamp": "2025-10-26T12:30:00.000Z",

- Ô£à Follow existing code style and conventions

      "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64)...",MIT License - feel free to use this project for learning and development!url-shortener-mongo    | waiting for connections on port 27017

---

      "ipAddress": "192.168.1.1",

## ­ƒôØ Future Enhancements

      "_id": "6713a..."url-shortener-api      | Ô£à MongoDB Connected Successfully

See [IMPROVEMENTS.md](./IMPROVEMENTS.md) for detailed proposals:

    }

- ­ƒÄ¿ Custom short URL IDs

- ÔÅ░ URL expiration (TTL)  ],## ­ƒÖÅ Acknowledgmentsurl-shortener-api      | ­ƒÜÇ Server started on port 8001

- ­ƒô▒ QR code generation

- ­ƒöÉ Password-protected URLs  "createdAt": "2025-10-25T10:00:00.000Z",

- ­ƒôè Advanced analytics dashboard

- ­ƒîì Geographic location tracking  "updatedAt": "2025-10-26T12:30:00.000Z"```

- ­ƒöæ API key authentication

- ­ƒôª Bulk URL creation}

- ­ƒÆ¥ Redis caching

- ­ƒº¬ Comprehensive testing```Built as a DevOps learning project with modern best practices.



---



## ­ƒôä License**Error Response:** `404 Not Found`### Step 3: Access the Application



This project is licensed under the MIT License.```json



```{---

MIT License

  "success": false,

Copyright (c) 2025 Shikhar Purwar

  "error": "Short URL not found"Open your browser and go to:

Permission is hereby granted, free of charge, to any person obtaining a copy

of this software and associated documentation files (the "Software"), to deal}

in the Software without restriction, including without limitation the rights

to use, copy, modify, merge, publish, distribute, sublicense, and/or sell```Made with ÔØñ´©Å by [Shikhar Purwar](https://github.com/theshikharpurwar) | 2025

copies of the Software, and to permit persons to whom the Software is

furnished to do so, subject to the following conditions:



The above copyright notice and this permission notice shall be included in all---```

copies or substantial portions of the Software.

```http://localhost:8001



---#### 4. Health Check```



## ­ƒÖÅ Acknowledgments



- **Node.js Community** - Amazing runtime**GET** `/health`You should see a beautiful URL shortener interface! ­ƒÄë

- **MongoDB** - Flexible database

- **Google Cloud Platform** - Reliable cloud infrastructure

- **GitHub Actions** - Seamless CI/CD

- **Open Source Community** - Inspiration and toolsChecks if the server is running and responsive.---



---



## ­ƒô× Contact & Support**Response:** `200 OK`## ­ƒôü Project Structure



- **Author**: Shikhar Purwar```json

- **GitHub**: [@theshikharpurwar](https://github.com/theshikharpurwar)

- **Repository**: [devops-url-shortener](https://github.com/theshikharpurwar/devops-url-shortener){```

- **Issues**: [Report a bug or request a feature](https://github.com/theshikharpurwar/devops-url-shortener/issues)

  "status": "OK",devops-url-shortener/

---

  "message": "Server is running",Ôöé

## Ô¡É Show Your Support

  "timestamp": "2025-10-26T12:30:00.000Z"Ôö£ÔöÇÔöÇ src/

If you found this project helpful, please give it a Ô¡É´©Å on GitHub!

}Ôöé   Ôö£ÔöÇÔöÇ models/

---

```Ôöé   Ôöé   ÔööÔöÇÔöÇ url.js                    # Mongoose URL schema

<div align="center">

Ôöé   Ôö£ÔöÇÔöÇ routes/

**Built with ÔØñ´©Å using modern DevOps practices**

---Ôöé   Ôöé   ÔööÔöÇÔöÇ url.js                    # Express routes

**Deployed on Google Cloud Platform**

Ôöé   Ôö£ÔöÇÔöÇ controllers/

**October 2025**

## ­ƒøá´©Å Technology StackÔöé   Ôöé   ÔööÔöÇÔöÇ urlController.js          # Business logic

[Ô¼å Back to Top](#-shorty---url-shortener)

Ôöé   ÔööÔöÇÔöÇ connect.js                    # MongoDB connection

</div>

### BackendÔöé

- **Runtime**: Node.js 18 (LTS)Ôö£ÔöÇÔöÇ views/

- **Framework**: Express.js 4.18Ôöé   ÔööÔöÇÔöÇ index.ejs                     # Frontend UI

- **Database**: MongoDB 7.0Ôöé

- **ODM**: Mongoose 8.0Ôö£ÔöÇÔöÇ index.js                          # Express server entry point

- **ID Generation**: shortid 2.2Ôö£ÔöÇÔöÇ package.json                      # Dependencies

Ôö£ÔöÇÔöÇ Dockerfile                        # Container image definition

### SecurityÔö£ÔöÇÔöÇ docker-compose.yml                # Multi-container orchestration

- **Helmet.js** - Security headersÔö£ÔöÇÔöÇ .dockerignore                     # Docker build exclusions

- **express-rate-limit** - Rate limiting middlewareÔö£ÔöÇÔöÇ .gitignore                        # Git exclusions

- **Input Validation** - URL format validationÔöé

ÔööÔöÇÔöÇ Documentation/

### Frontend    Ôö£ÔöÇÔöÇ README.md                     # This file

- **Template Engine**: EJS 3.1    Ôö£ÔöÇÔöÇ SETUP-WSL2.md                 # WSL 2 setup guide

- **CSS**: Custom CSS3 with animations    ÔööÔöÇÔöÇ PROJECT-STRUCTURE.md          # Detailed structure docs

- **Fonts**: Google Fonts (Poppins)```

- **JavaScript**: Vanilla ES6+

---

### DevOps

- **Containerization**: Docker with multi-stage builds## ­ƒôí API Documentation

- **Orchestration**: Docker Compose

- **CI/CD**: GitHub Actions### 1. Create Short URL

- **Cloud**: Google Cloud Platform (GCE)

- **Image Registry**: Google Artifact Registry**Endpoint**: `POST /url`



---**Request Body**:

```json

## ­ƒôü Project Structure{

  "url": "https://www.example.com/very/long/url/here"

```}

devops-url-shortener/```

Ôöé

Ôö£ÔöÇÔöÇ .github/**Response**:

Ôöé   ÔööÔöÇÔöÇ workflows/```json

Ôöé       ÔööÔöÇÔöÇ deploy.yml          # GCP deployment pipeline{

Ôöé  "success": true,

Ôö£ÔöÇÔöÇ k8s/                         # Kubernetes manifests  "id": "XyZ123",

Ôöé   Ôö£ÔöÇÔöÇ deployment.yml          # K8s deployment config  "shortUrl": "http://localhost:8001/XyZ123",

Ôöé   ÔööÔöÇÔöÇ service.yml             # K8s service config  "originalUrl": "https://www.example.com/very/long/url/here"

Ôöé}

Ôö£ÔöÇÔöÇ src/                         # Application source code```

Ôöé   Ôö£ÔöÇÔöÇ controllers/

Ôöé   Ôöé   ÔööÔöÇÔöÇ urlController.js    # Business logic**cURL Example**:

Ôöé   Ôö£ÔöÇÔöÇ models/```bash

Ôöé   Ôöé   ÔööÔöÇÔöÇ url.js              # Mongoose schemacurl -X POST http://localhost:8001/url \

Ôöé   Ôö£ÔöÇÔöÇ routes/  -H "Content-Type: application/json" \

Ôöé   Ôöé   ÔööÔöÇÔöÇ url.js              # API routes  -d '{"url": "https://github.com/yourusername/repo"}'

Ôöé   ÔööÔöÇÔöÇ connect.js              # MongoDB connection```

Ôöé

Ôö£ÔöÇÔöÇ views/### 2. Redirect to Original URL

Ôöé   ÔööÔöÇÔöÇ index.ejs               # Frontend template

Ôöé**Endpoint**: `GET /:shortId`

Ôö£ÔöÇÔöÇ index.js                     # Express server entry point

Ôö£ÔöÇÔöÇ package.json                 # Node.js dependencies**Example**: `http://localhost:8001/XyZ123`

Ôö£ÔöÇÔöÇ package-lock.json            # Locked dependency versions

ÔöéThis will redirect you to the original URL.

Ôö£ÔöÇÔöÇ Dockerfile                   # Container image definition

Ôö£ÔöÇÔöÇ docker-compose.yml           # Local development setup### 3. Get Analytics

Ôö£ÔöÇÔöÇ .dockerignore               # Docker build exclusions

Ôöé**Endpoint**: `GET /url/analytics/:shortId`

Ôö£ÔöÇÔöÇ .gitignore                  # Git exclusions

Ôö£ÔöÇÔöÇ README.md                   # This file**Example**: `http://localhost:8001/url/analytics/XyZ123`

ÔööÔöÇÔöÇ IMPROVEMENTS.md             # Enhancement proposals

```**Response**:

```json

---{

  "success": true,

## ÔÜÖ´©Å Configuration  "shortId": "XyZ123",

  "originalUrl": "https://github.com/yourusername/repo",

### Environment Variables  "totalClicks": 5,

  "visitHistory": [

Create a `.env` file in the project root (optional):    {

      "timestamp": "2025-10-25T10:30:00.000Z",

```env      "userAgent": "Mozilla/5.0...",

# Server Configuration      "ipAddress": "::1"

PORT=8001    }

NODE_ENV=production  ],

  "createdAt": "2025-10-25T10:00:00.000Z",

# MongoDB Configuration  "updatedAt": "2025-10-25T10:30:00.000Z"

MONGO_URL=mongodb://mongo:27017/url-shortener}

```

# Security (optional)

RATE_LIMIT_WINDOW_MS=900000    # 15 minutes### 4. Health Check

RATE_LIMIT_MAX_REQUESTS=10      # 10 requests per window

```**Endpoint**: `GET /health`



### Docker Compose Configuration**Response**:

```json

Modify `docker-compose.yml` to customize:{

  "status": "OK",

```yaml  "message": "Server is running",

version: '3.8'  "timestamp": "2025-10-25T10:30:00.000Z"

services:}

  mongo:```

    image: mongo:7.0

    ports:---

      - "27017:27017"  # Change MongoDB port if needed

    volumes:## ­ƒº¬ Testing the Application

      - mongodb_data:/data/db

### Test 1: Using the Web Interface

  api:

    build: .1. Open http://localhost:8001

    ports:2. Enter a long URL (e.g., `https://github.com/yourusername/long-repo-name`)

      - "8001:8001"    # Change application port3. Click "Shorten URL"

    environment:4. Copy the shortened URL

      - MONGO_URL=mongodb://mongo:27017/url-shortener5. Open it in a new tab - you should be redirected!

      - PORT=8001

```### Test 2: Using cURL (Recommended for DevOps)



---```bash

# Test 1: Create a short URL

## ­ƒÜÇ Deploymentcurl -X POST http://localhost:8001/url \

  -H "Content-Type: application/json" \

### Local Deployment (Docker Compose)  -d '{"url": "https://www.google.com"}'



```bash# Expected output: {"success":true,"id":"abc123",...}

# Build and start

docker-compose up -d --build# Test 2: Get analytics (replace abc123 with your ID)

curl http://localhost:8001/url/analytics/abc123

# View logs

docker-compose logs -f# Test 3: Health check

curl http://localhost:8001/health

# Stop```

docker-compose down

### Test 3: Using PowerShell (Windows)

# Stop and remove volumes (fresh start)

docker-compose down -v```powershell

```# Create a short URL

Invoke-RestMethod -Uri "http://localhost:8001/url" `

### Cloud Deployment (GCP)  -Method Post `

  -ContentType "application/json" `

This project includes automated deployment to Google Cloud Platform:  -Body '{"url": "https://www.google.com"}'

```

1. **GitHub Actions** - Automated CI/CD pipeline

2. **Google Artifact Registry** - Docker image storage---

3. **Google Compute Engine** - Production hosting

4. **Workload Identity Federation** - Secure, keyless authentication## ­ƒÉø Troubleshooting



**Deployment Trigger:**### Issue 1: "docker: command not found"

- Push to `main` or `gcp-actions-cicd` branch

- GitHub Actions automatically builds and deploys**Solution**: 

- Ensure Docker Desktop is running

**Live URL:** http://34.72.126.110:8001- Verify WSL Integration is enabled in Docker Desktop Settings

- Restart WSL: `wsl --shutdown` (in PowerShell), then reopen

### Manual Docker Deployment

### Issue 2: "Cannot connect to MongoDB"

```bash

# Build the image**Solution**:

docker build -t shorty:latest .```bash

# Check if MongoDB container is running

# Run the containerdocker ps

docker run -d \

  -p 8001:8001 \# Check MongoDB logs

  -e MONGO_URL=mongodb://your-mongo-host:27017/url-shortener \docker logs url-shortener-mongo

  --name shorty-app \

  shorty:latest# Restart the entire stack

docker-compose down

# Check logsdocker-compose up --build

docker logs -f shorty-app```

```

### Issue 3: Port 8001 already in use

---

**Solution**:

## ­ƒöÆ Security```bash

# Find what's using the port

### Implemented Security Measuresnetstat -ano | findstr :8001



#### 1. **Security Headers (Helmet.js)**# Kill the process (PowerShell as Admin)

```Stop-Process -Id <PID> -Force

Ô£à Strict-Transport-Security

Ô£à X-Content-Type-Options: nosniff# Or change the port in docker-compose.yml

Ô£à X-Frame-Options: SAMEORIGIN# Change "8001:8001" to "8002:8001"

Ô£à X-XSS-Protection```

Ô£à Referrer-Policy: no-referrer

Ô£à Cross-Origin-Opener-Policy### Issue 4: Slow file performance in WSL

Ô£à Cross-Origin-Resource-Policy

```**Solution**: Always work in the Linux filesystem, not `/mnt/`:



#### 2. **Rate Limiting**```bash

- **Limit**: 10 URL creations per 15 minutes per IP# Copy project to Linux filesystem

- **Purpose**: Prevent abuse and DDoS attackscp -r /mnt/d/devops-url-shortener ~/projects/devops-url-shortener

- **Scope**: Applied to POST /url endpointcd ~/projects/devops-url-shortener

```

#### 3. **Input Validation**

- URL format validation### Issue 5: Changes not reflecting after rebuild

- Automatic protocol addition (http/https)

- Malicious input sanitization**Solution**:

```bash

#### 4. **MongoDB Security**# Stop all containers

- Mongoose ODM with schema validationdocker-compose down

- No exposed MongoDB ports in production

- Data validation at model level# Remove volumes and rebuild

docker-compose down -v

### Security Best Practicesdocker-compose up --build

```

```javascript

// Example: Using the API securely---

const response = await fetch('/url', {

  method: 'POST',## ­ƒøæ Stopping the Application

  headers: {

    'Content-Type': 'application/json',```bash

  },# Stop containers (keeps data)

  body: JSON.stringify({ url: sanitizedUrl })docker-compose stop

});

```# Stop and remove containers (keeps volumes)

docker-compose down

---

# Stop, remove containers AND delete all data

## ­ƒÉø Troubleshootingdocker-compose down -v

```

### Common Issues

---

#### Port Already in Use

```bash## ­ƒôè Viewing Logs

# Find process using port 8001

# Windows```bash

netstat -ano | findstr :8001# View all logs

docker-compose logs

# Linux/Mac

lsof -i :8001# Follow logs in real-time

docker-compose logs -f

# Change port in docker-compose.yml

ports:# View logs for specific service

  - "8002:8001"  # Use port 8002 insteaddocker-compose logs -f api

```docker-compose logs -f mongo

```

#### MongoDB Connection Failed

```bash---

# Check MongoDB is running

docker ps | grep mongo## ­ƒöì Useful Docker Commands



# Restart MongoDB```bash

docker-compose restart mongo# List running containers

docker ps

# Check MongoDB logs

docker logs url-shortener-mongo# List all containers (including stopped)

docker ps -a

# Fresh start (removes all data)

docker-compose down -v# View container resource usage

docker-compose up -ddocker stats

```

# Execute command in running container

#### Cannot Access Applicationdocker exec -it url-shortener-api sh

```bash

# Check if containers are running# Access MongoDB shell

docker psdocker exec -it url-shortener-mongo mongosh



# Check API logs# Remove unused images and containers

docker logs url-shortener-apidocker system prune -a

```

# Check health endpoint

curl http://localhost:8001/health---



# Rebuild from scratch## ­ƒôÜ Next Phases

docker-compose down -v

docker-compose build --no-cache### Ô£à Phase 2: Infrastructure as Code (COMPLETE)

docker-compose up -d- Ô£à Provision AWS VPC, EKS Cluster

```- Ô£à Set up DocumentDB (managed MongoDB)

- Ô£à Create ECR repository for Docker images

#### Rate Limit Exceeded- Ô£à Configure S3 for Terraform state

```bash

# Wait 15 minutes, or**Guide**: [terraform/README.md](terraform/README.md)

# Restart the API container to reset

docker-compose restart api### Ô£à Phase 3: Configuration Management (COMPLETE)

```- Ô£à Automate Jenkins EC2 server setup

- Ô£à Install required tools (Docker, kubectl, etc.)

---- Ô£à Configure Jenkins plugins



## ­ƒôè Monitoring & Logs**Guide**: [ansible/README.md](ansible/README.md)



### View Logs### Ô£à Phase 4: CI/CD Pipeline (COMPLETE) 

- Ô£à Create Kubernetes manifests (deployments, services)

```bash- Ô£à Write Jenkinsfile for automated pipeline

# All services- Ô£à Set up Git webhooks for auto-deployment

docker-compose logs- Ô£à Deploy to AWS EKS



# Follow logs in real-time**Guides**: 

docker-compose logs -f- [JENKINS-SETUP.md](JENKINS-SETUP.md) - Configure Jenkins

- [DEPLOYMENT-GUIDE.md](DEPLOYMENT-GUIDE.md) - Deploy application

# Specific service- [PHASE4-COMPLETE.md](PHASE4-COMPLETE.md) - Summary & next steps

docker-compose logs -f api

docker-compose logs -f mongo---



# Last 100 lines## ­ƒæÑ Team

docker-compose logs --tail=100 api

```- **Team Size**: 3 members

- **Your Role**: DevOps Engineer / Full-Stack Developer

### Health Monitoring- **Instructor**: Senior DevOps Lead



```bash---

# Check application health

curl http://localhost:8001/health## ­ƒôØ Learning Objectives



# Check container healthBy completing this project, you will learn:

docker ps

Ô£à **Containerization**: Docker, multi-stage builds, optimization  

# View resource usageÔ£à **Orchestration**: Docker Compose, Kubernetes  

docker statsÔ£à **Cloud**: AWS services (EC2, EKS, ECR, DocumentDB, S3)  

```Ô£à **IaC**: Terraform for infrastructure provisioning  

Ô£à **Config Management**: Ansible for server configuration  

---Ô£à **CI/CD**: Jenkins pipeline, automated deployments  

Ô£à **Version Control**: Git workflows, branching strategies  

## ­ƒñØ ContributingÔ£à **DevOps Best Practices**: 12-factor apps, health checks, logging  



Contributions are welcome! Here's how you can help:---



### Reporting Bugs## ­ƒô× Need Help?



1. Check if the bug already exists in [Issues](https://github.com/theshikharpurwar/devops-url-shortener/issues)1. **WSL Issues**: See [SETUP-WSL2.md](./SETUP-WSL2.md)

2. Create a new issue with:2. **File Structure Questions**: See [PROJECT-STRUCTURE.md](./PROJECT-STRUCTURE.md)

   - Clear title3. **Docker Issues**: Check the Troubleshooting section above

   - Steps to reproduce

   - Expected vs actual behavior---

   - Screenshots (if applicable)

## ­ƒÄô Educational Use

### Suggesting Features

This project is designed for educational purposes as part of a university DevOps course. Feel free to modify and extend it for your learning!

1. Open a new issue with the `enhancement` label

2. Describe the feature and its benefits---

3. Include mockups or examples if possible

## ­ƒôä License

### Pull Requests

MIT License - See LICENSE file for details

1. Fork the repository

2. Create a feature branch (`git checkout -b feature/amazing-feature`)---

3. Commit your changes (`git commit -m 'Add amazing feature'`)

4. Push to the branch (`git push origin feature/amazing-feature`)## Ô£à Phase 1 Checklist

5. Open a Pull Request

- [x] WSL 2 is installed and working

### Code Style- [x] Docker Desktop is running with WSL 2 backend

- [x] VS Code is connected to WSL

- Use ES6+ JavaScript- [x] `docker-compose up --build` runs without errors

- Follow existing code formatting- [x] Application is accessible at http://localhost:8001

- Add comments for complex logic- [x] You can create and use shortened URLs

- Update README if needed- [x] You understand the codebase structure

- [x] All API endpoints are tested and working

---

**Phase 1 Complete! Ô£à**

## ­ƒôØ Future Enhancements

---

See [IMPROVEMENTS.md](./IMPROVEMENTS.md) for detailed enhancement proposals:

## Ô£à Phase 2 Checklist

- ­ƒÄ¿ Custom short URL IDs

- ÔÅ░ URL expiration (TTL)**Infrastructure as Code with Terraform**

- ­ƒô▒ QR code generation

- ­ƒöÉ Password-protected URLsBefore moving to Phase 3, ensure:

- ­ƒôè Advanced analytics dashboard

- ­ƒîì Geographic location tracking- [ ] Terraform and AWS CLI installed

- ­ƒöæ API key authentication- [ ] AWS credentials configured (`aws configure`)

- ­ƒôª Bulk URL creation- [ ] SSH key pair generated (`~/.ssh/id_rsa`)

- ­ƒÆ¥ Redis caching- [ ] S3 backend created (run `setup-backend.sh`)

- ­ƒº¬ Comprehensive testing- [ ] `terraform.tfvars` created with YOUR IP address

- [ ] `terraform apply` completed successfully

---- [ ] All ~40-50 resources created in AWS

- [ ] EKS cluster accessible (`kubectl get nodes`)

## ­ƒôä License- [ ] Jenkins UI accessible at http://JENKINS_IP:8080

- [ ] ECR repository created

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.- [ ] DocumentDB cluster running

- [ ] All outputs saved for Phase 3

```

MIT License**Quick Start:** See [terraform/QUICKSTART.md](terraform/QUICKSTART.md)  

**Full Guide:** See [terraform/README.md](terraform/README.md)

Copyright (c) 2025 Shikhar Purwar

**Once all items are checked, you're ready for Phase 3! ­ƒÜÇ**

Permission is hereby granted, free of charge, to any person obtaining a copy

of this software and associated documentation files (the "Software"), to deal---

in the Software without restriction, including without limitation the rights

to use, copy, modify, merge, publish, distribute, sublicense, and/or sell## Ô£à Phase 3 Checklist

copies of the Software, and to permit persons to whom the Software is

furnished to do so, subject to the following conditions:**Configuration Management with Ansible**



The above copyright notice and this permission notice shall be included in allBefore moving to Phase 4, ensure:

copies or substantial portions of the Software.

```- [ ] Jenkins server is accessible via SSH

- [ ] Ansible playbook executed successfully

---- [ ] Jenkins is running on port 8080

- [ ] Docker installed and jenkins user added to docker group

## ­ƒÖÅ Acknowledgments- [ ] kubectl installed and configured

- [ ] AWS CLI v2 installed

- **Node.js Community** - For the awesome runtime- [ ] Initial Jenkins admin password retrieved

- **MongoDB** - For the flexible database- [ ] Jenkins setup wizard completed

- **Google Cloud Platform** - For reliable hosting

- **Open Source Community** - For inspiration and tools**Quick Start:** See [ansible/QUICKSTART.md](ansible/QUICKSTART.md)  

**Full Guide:** See [ansible/README.md](ansible/README.md)  

---**Windows Guide:** See [ansible/WINDOWS-GUIDE.md](ansible/WINDOWS-GUIDE.md)



## ­ƒô× Contact & Support**Once all items are checked, you're ready for Phase 4! ­ƒÜÇ**



- **Author**: Shikhar Purwar---

- **GitHub**: [@theshikharpurwar](https://github.com/theshikharpurwar)

- **Repository**: [devops-url-shortener](https://github.com/theshikharpurwar/devops-url-shortener)## Ô£à Phase 4 Checklist

- **Issues**: [Report a bug or request a feature](https://github.com/theshikharpurwar/devops-url-shortener/issues)

**CI/CD Pipeline & Kubernetes Deployment**

---

Deployment checklist:

## Ô¡É Show Your Support

- [ ] Jenkinsfile updated with Terraform outputs (ECR URL, EKS cluster, DB secret)

If you found this project helpful, please give it a Ô¡É´©Å on GitHub!- [ ] Jenkins plugins installed (Docker Pipeline, Amazon ECR, Kubernetes CLI)

- [ ] AWS credentials configured in Jenkins

---- [ ] Pipeline job created (`url-shortener-pipeline`)

- [ ] GitHub webhook configured

<div align="center">- [ ] Code committed and pushed to GitHub

- [ ] Pipeline executed successfully (all 6 stages pass)

**Made with ÔØñ´©Å by [Shikhar Purwar](https://github.com/theshikharpurwar)**- [ ] Kubernetes deployment created (2 pods running)

- [ ] Load Balancer provisioned and accessible

**October 2025**- [ ] Application accessible via Load Balancer URL

- [ ] URL shortening working end-to-end

[Ô¼å Back to Top](#-shorty---url-shortener)- [ ] Health check endpoint responding



</div>**Setup Guide:** See [JENKINS-SETUP.md](JENKINS-SETUP.md)  

**Deployment Guide:** See [DEPLOYMENT-GUIDE.md](DEPLOYMENT-GUIDE.md)  
**Summary:** See [PHASE4-COMPLETE.md](PHASE4-COMPLETE.md)

**Once all items are checked, your DevOps pipeline is COMPLETE! ­ƒÄë**

---

Made with ÔØñ´©Å for DevOps learning | October 2025
